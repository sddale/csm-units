\hypertarget{fmt_2include_2fmt_2format_8h_source}{}\doxysection{format.\+h}
\label{fmt_2include_2fmt_2format_8h_source}\index{csm-\/units/fmt/include/fmt/format.h@{csm-\/units/fmt/include/fmt/format.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ Formatting\ library\ for\ C++}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ Copyright\ (c)\ 2012\ -\/\ present,\ Victor\ Zverovich}}
\DoxyCodeLine{00005\ \textcolor{comment}{}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ Permission\ is\ hereby\ granted,\ free\ of\ charge,\ to\ any\ person\ obtaining}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ \ a\ copy\ of\ this\ software\ and\ associated\ documentation\ files\ (the}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ "{}Software"{}),\ to\ deal\ in\ the\ Software\ without\ restriction,\ including}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ \ without\ limitation\ the\ rights\ to\ use,\ copy,\ modify,\ merge,\ publish,}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ distribute,\ sublicense,\ and/or\ sell\ copies\ of\ the\ Software,\ and\ to}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ permit\ persons\ to\ whom\ the\ Software\ is\ furnished\ to\ do\ so,\ subject\ to}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ the\ following\ conditions:}}
\DoxyCodeLine{00013\ \textcolor{comment}{}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ The\ above\ copyright\ notice\ and\ this\ permission\ notice\ shall\ be}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ \ included\ in\ all\ copies\ or\ substantial\ portions\ of\ the\ Software.}}
\DoxyCodeLine{00016\ \textcolor{comment}{}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ \ THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ \ EXPRESS\ OR\ IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ \ MERCHANTABILITY,\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ \ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE\ AUTHORS\ OR\ COPYRIGHT\ HOLDERS\ BE}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER\ LIABILITY,\ WHETHER\ IN\ AN\ ACTION}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,\ OUT\ OF\ OR\ IN\ CONNECTION}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ \ WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE\ SOFTWARE.}}
\DoxyCodeLine{00024\ \textcolor{comment}{}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ \ -\/-\/-\/\ Optional\ exception\ to\ the\ license\ -\/-\/-\/}}
\DoxyCodeLine{00026\ \textcolor{comment}{}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ \ As\ an\ exception,\ if,\ as\ a\ result\ of\ your\ compiling\ your\ source\ code,\ portions}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ \ of\ this\ Software\ are\ embedded\ into\ a\ machine-\/executable\ object\ form\ of\ such}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ \ source\ code,\ you\ may\ redistribute\ such\ embedded\ portions\ in\ such\ object\ form}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ \ without\ including\ the\ above\ copyright\ and\ permission\ notices.}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#ifndef\ FMT\_FORMAT\_H\_}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ FMT\_FORMAT\_H\_}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ <cmath>}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::signbit}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ <cstdint>}\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ uint32\_t}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#include\ <cstring>}\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::memcpy}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ <initializer\_list>}\ \ \textcolor{comment}{//\ std::initializer\_list}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <limits>}\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::numeric\_limits}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#include\ <memory>}\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::uninitialized\_copy}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ <stdexcept>}\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::runtime\_error}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#include\ <system\_error>}\ \ \ \ \ \ \textcolor{comment}{//\ std::system\_error}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#ifdef\ \_\_cpp\_lib\_bit\_cast}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#\ \ include\ <bit>}\ \ \textcolor{comment}{//\ std::bitcast}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#include\ "{}core.h"{}}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#ifndef\ FMT\_BEGIN\_DETAIL\_NAMESPACE}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#\ \ define\ FMT\_BEGIN\_DETAIL\_NAMESPACE\ namespace\ detail\ \{}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#\ \ define\ FMT\_END\_DETAIL\_NAMESPACE\ \}}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#if\ FMT\_HAS\_CPP17\_ATTRIBUTE(fallthrough)}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#\ \ define\ FMT\_FALLTHROUGH\ [[fallthrough]]}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#elif\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#\ \ define\ FMT\_FALLTHROUGH\ [[clang::fallthrough]]}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#elif\ FMT\_GCC\_VERSION\ >=\ 700\ \&\&\ \(\backslash\)}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\ \ \ \ (!defined(\_\_EDG\_VERSION\_\_)\ ||\ \_\_EDG\_VERSION\_\_\ >=\ 520)}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#\ \ define\ FMT\_FALLTHROUGH\ [[gnu::fallthrough]]}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#\ \ define\ FMT\_FALLTHROUGH}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#ifndef\ FMT\_DEPRECATED}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#\ \ if\ FMT\_HAS\_CPP14\_ATTRIBUTE(deprecated)\ ||\ FMT\_MSC\_VERSION\ >=\ 1900}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_DEPRECATED\ [[deprecated]]}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#\ \ \ \ if\ (defined(\_\_GNUC\_\_)\ \&\&\ !defined(\_\_LCC\_\_))\ ||\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ FMT\_DEPRECATED\ \_\_attribute\_\_((deprecated))}}
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#\ \ \ \ elif\ FMT\_MSC\_VERSION}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ FMT\_DEPRECATED\ \_\_declspec(deprecated)}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#\ \ \ \ else}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ FMT\_DEPRECATED\ }\textcolor{comment}{/*\ deprecated\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#if\ FMT\_GCC\_VERSION}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#\ \ define\ FMT\_GCC\_VISIBILITY\_HIDDEN\ \_\_attribute\_\_((visibility("{}hidden"{}})))}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#\ \ define\ FMT\_GCC\_VISIBILITY\_HIDDEN}}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\#ifdef\ \_\_NVCC\_\_}}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#\ \ define\ FMT\_CUDA\_VERSION\ (\_\_CUDACC\_VER\_MAJOR\_\_\ *\ 100\ +\ \_\_CUDACC\_VER\_MINOR\_\_)}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#\ \ define\ FMT\_CUDA\_VERSION\ 0}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\#ifdef\ \_\_has\_builtin}}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#\ \ define\ FMT\_HAS\_BUILTIN(x)\ \_\_has\_builtin(x)}}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\#\ \ define\ FMT\_HAS\_BUILTIN(x)\ 0}}
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{preprocessor}{\#if\ FMT\_GCC\_VERSION\ ||\ FMT\_CLANG\_VERSION}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\#\ \ define\ FMT\_NOINLINE\ \_\_attribute\_\_((noinline))}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\#\ \ define\ FMT\_NOINLINE}}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\#ifndef\ FMT\_THROW}}
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\#\ \ if\ FMT\_EXCEPTIONS}}
\DoxyCodeLine{00107\ \textcolor{preprocessor}{\#\ \ \ \ if\ FMT\_MSC\_VERSION\ ||\ defined(\_\_NVCC\_\_)}}
\DoxyCodeLine{00108\ FMT\_BEGIN\_NAMESPACE}
\DoxyCodeLine{00109\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00110\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Exception>\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ do\_throw(\textcolor{keyword}{const}\ Exception\&\ x)\ \{}
\DoxyCodeLine{00111\ \ \ \textcolor{comment}{//\ Silence\ unreachable\ code\ warnings\ in\ MSVC\ and\ NVCC\ because\ these}}
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{//\ are\ nearly\ impossible\ to\ fix\ in\ a\ generic\ code.}}
\DoxyCodeLine{00113\ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ b\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{if}\ (b)\ \textcolor{keywordflow}{throw}\ x;}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ \}\ \ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00117\ FMT\_END\_NAMESPACE}
\DoxyCodeLine{00118\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ FMT\_THROW(x)\ detail::do\_throw(x)}}
\DoxyCodeLine{00119\ \textcolor{preprocessor}{\#\ \ \ \ else}}
\DoxyCodeLine{00120\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ FMT\_THROW(x)\ throw\ x}}
\DoxyCodeLine{00121\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00123\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_THROW(x)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00124\ \textcolor{preprocessor}{\ \ \ \ \ \ do\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00125\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ FMT\_ASSERT(false,\ (x).what());\ \(\backslash\)}}
\DoxyCodeLine{00126\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ while\ (false)}}
\DoxyCodeLine{00127\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00128\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#if\ FMT\_EXCEPTIONS}}
\DoxyCodeLine{00131\ \textcolor{preprocessor}{\#\ \ define\ FMT\_TRY\ try}}
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#\ \ define\ FMT\_CATCH(x)\ catch\ (x)}}
\DoxyCodeLine{00133\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\#\ \ define\ FMT\_TRY\ if\ (true)}}
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\#\ \ define\ FMT\_CATCH(x)\ if\ (false)}}
\DoxyCodeLine{00136\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{preprocessor}{\#ifndef\ FMT\_MAYBE\_UNUSED}}
\DoxyCodeLine{00139\ \textcolor{preprocessor}{\#\ \ if\ FMT\_HAS\_CPP17\_ATTRIBUTE(maybe\_unused)}}
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_MAYBE\_UNUSED\ [[maybe\_unused]]}}
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_MAYBE\_UNUSED}}
\DoxyCodeLine{00143\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00144\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{preprocessor}{\#ifndef\ FMT\_USE\_USER\_DEFINED\_LITERALS}}
\DoxyCodeLine{00147\ \textcolor{comment}{//\ EDG\ based\ compilers\ (Intel,\ NVIDIA,\ Elbrus,\ etc),\ GCC\ and\ MSVC\ support\ UDLs.}}
\DoxyCodeLine{00148\ \textcolor{preprocessor}{\#\ \ if\ (FMT\_HAS\_FEATURE(cxx\_user\_literals)\ ||\ FMT\_GCC\_VERSION\ >=\ 407\ ||\ \(\backslash\)}}
\DoxyCodeLine{00149\ \textcolor{preprocessor}{\ \ \ \ \ \ \ FMT\_MSC\_VERSION\ >=\ 1900)\ \&\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\ \ \ \ \ \ (!defined(\_\_EDG\_VERSION\_\_)\ ||\ \_\_EDG\_VERSION\_\_\ >=\ }\textcolor{comment}{/*\ UDL\ feature\ */}\textcolor{preprocessor}{\ 480)}}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_USE\_USER\_DEFINED\_LITERALS\ 1}}
\DoxyCodeLine{00152\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_USE\_USER\_DEFINED\_LITERALS\ 0}}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00155\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \textcolor{comment}{//\ Defining\ FMT\_REDUCE\_INT\_INSTANTIATIONS\ to\ 1,\ will\ reduce\ the\ number\ of}}
\DoxyCodeLine{00158\ \textcolor{comment}{//\ integer\ formatter\ template\ instantiations\ to\ just\ one\ by\ only\ using\ the}}
\DoxyCodeLine{00159\ \textcolor{comment}{//\ largest\ integer\ type.\ This\ results\ in\ a\ reduction\ in\ binary\ size\ but\ will}}
\DoxyCodeLine{00160\ \textcolor{comment}{//\ cause\ a\ decrease\ in\ integer\ formatting\ performance.}}
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\#if\ !defined(FMT\_REDUCE\_INT\_INSTANTIATIONS)}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#\ \ define\ FMT\_REDUCE\_INT\_INSTANTIATIONS\ 0}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{comment}{//\ \_\_builtin\_clz\ is\ broken\ in\ clang\ with\ Microsoft\ CodeGen:}}
\DoxyCodeLine{00166\ \textcolor{comment}{//\ https://github.com/fmtlib/fmt/issues/519.}}
\DoxyCodeLine{00167\ \textcolor{preprocessor}{\#if\ !FMT\_MSC\_VERSION}}
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#\ \ if\ FMT\_HAS\_BUILTIN(\_\_builtin\_clz)\ ||\ FMT\_GCC\_VERSION\ ||\ FMT\_ICC\_VERSION}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_BUILTIN\_CLZ(n)\ \_\_builtin\_clz(n)}}
\DoxyCodeLine{00170\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#\ \ if\ FMT\_HAS\_BUILTIN(\_\_builtin\_clzll)\ ||\ FMT\_GCC\_VERSION\ ||\ FMT\_ICC\_VERSION}}
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_BUILTIN\_CLZLL(n)\ \_\_builtin\_clzll(n)}}
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00174\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \textcolor{comment}{//\ \_\_builtin\_ctz\ is\ broken\ in\ Intel\ Compiler\ Classic\ on\ Windows:}}
\DoxyCodeLine{00177\ \textcolor{comment}{//\ https://github.com/fmtlib/fmt/issues/2510.}}
\DoxyCodeLine{00178\ \textcolor{preprocessor}{\#ifndef\ \_\_ICL}}
\DoxyCodeLine{00179\ \textcolor{preprocessor}{\#\ \ if\ FMT\_HAS\_BUILTIN(\_\_builtin\_ctz)\ ||\ FMT\_GCC\_VERSION\ ||\ FMT\_ICC\_VERSION\ ||\ \(\backslash\)}}
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\ \ \ \ \ \ defined(\_\_NVCOMPILER)}}
\DoxyCodeLine{00181\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_BUILTIN\_CTZ(n)\ \_\_builtin\_ctz(n)}}
\DoxyCodeLine{00182\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#\ \ if\ FMT\_HAS\_BUILTIN(\_\_builtin\_ctzll)\ ||\ FMT\_GCC\_VERSION\ ||\ \(\backslash\)}}
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\ \ \ \ \ \ FMT\_ICC\_VERSION\ ||\ defined(\_\_NVCOMPILER)}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_BUILTIN\_CTZLL(n)\ \_\_builtin\_ctzll(n)}}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\#if\ FMT\_MSC\_VERSION}}
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#\ \ include\ <intrin.h>}\ \ \textcolor{comment}{//\ \_BitScanReverse[64],\ \_BitScanForward[64],\ \_umul128}}
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \textcolor{comment}{//\ Some\ compilers\ masquerade\ as\ both\ MSVC\ and\ GCC-\/likes\ or\ otherwise\ support}}
\DoxyCodeLine{00194\ \textcolor{comment}{//\ \_\_builtin\_clz\ and\ \_\_builtin\_clzll,\ so\ only\ define\ FMT\_BUILTIN\_CLZ\ using\ the}}
\DoxyCodeLine{00195\ \textcolor{comment}{//\ MSVC\ intrinsics\ if\ the\ clz\ and\ clzll\ builtins\ are\ not\ available.}}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\#if\ FMT\_MSC\_VERSION\ \&\&\ !defined(FMT\_BUILTIN\_CLZLL)\ \&\&\ \(\backslash\)}}
\DoxyCodeLine{00197\ \textcolor{preprocessor}{\ \ \ \ !defined(FMT\_BUILTIN\_CTZLL)}}
\DoxyCodeLine{00198\ FMT\_BEGIN\_NAMESPACE}
\DoxyCodeLine{00199\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00200\ \textcolor{comment}{//\ Avoid\ Clang\ with\ Microsoft\ CodeGen's\ -\/Wunknown-\/pragmas\ warning.}}
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\#\ \ if\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{00202\ \textcolor{preprocessor}{\#\ \ \ \ pragma\ intrinsic(\_BitScanForward)}}
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\#\ \ \ \ pragma\ intrinsic(\_BitScanReverse)}}
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\#\ \ \ \ if\ defined(\_WIN64)}}
\DoxyCodeLine{00205\ \textcolor{preprocessor}{\#\ \ \ \ \ \ pragma\ intrinsic(\_BitScanForward64)}}
\DoxyCodeLine{00206\ \textcolor{preprocessor}{\#\ \ \ \ \ \ pragma\ intrinsic(\_BitScanReverse64)}}
\DoxyCodeLine{00207\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ clz(uint32\_t\ x)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ r\ =\ 0;}
\DoxyCodeLine{00212\ \ \ \_BitScanReverse(\&r,\ x);}
\DoxyCodeLine{00213\ \ \ FMT\_ASSERT(x\ !=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00214\ \ \ \textcolor{comment}{//\ Static\ analysis\ complains\ about\ using\ uninitialized\ data}}
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ "{}r"{},\ but\ the\ only\ way\ that\ can\ happen\ is\ if\ "{}x"{}\ is\ 0,}}
\DoxyCodeLine{00216\ \ \ \textcolor{comment}{//\ which\ the\ callers\ guarantee\ to\ not\ happen.}}
\DoxyCodeLine{00217\ \ \ FMT\_MSC\_WARNING(suppress\ :\ 6102)}
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{return}\ 31\ \string^\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(r);}
\DoxyCodeLine{00219\ \}}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#\ \ define\ FMT\_BUILTIN\_CLZ(n)\ detail::clz(n)}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ clzll(uint64\_t\ x)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00223\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ r\ =\ 0;}
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\#\ \ ifdef\ \_WIN64}}
\DoxyCodeLine{00225\ \ \ \_BitScanReverse64(\&r,\ x);}
\DoxyCodeLine{00226\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00227\ \ \ \textcolor{comment}{//\ Scan\ the\ high\ 32\ bits.}}
\DoxyCodeLine{00228\ \ \ \textcolor{keywordflow}{if}\ (\_BitScanReverse(\&r,\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(x\ >>\ 32)))}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{return}\ 63\ \string^\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(r\ +\ 32);}
\DoxyCodeLine{00230\ \ \ \textcolor{comment}{//\ Scan\ the\ low\ 32\ bits.}}
\DoxyCodeLine{00231\ \ \ \_BitScanReverse(\&r,\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(x));}
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00233\ \ \ FMT\_ASSERT(x\ !=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00234\ \ \ FMT\_MSC\_WARNING(suppress\ :\ 6102)\ \ \textcolor{comment}{//\ Suppress\ a\ bogus\ static\ analysis\ warning.}}
\DoxyCodeLine{00235\ \ \ \textcolor{keywordflow}{return}\ 63\ \string^\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(r);}
\DoxyCodeLine{00236\ \}}
\DoxyCodeLine{00237\ \textcolor{preprocessor}{\#\ \ define\ FMT\_BUILTIN\_CLZLL(n)\ detail::clzll(n)}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ ctz(uint32\_t\ x)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00240\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ r\ =\ 0;}
\DoxyCodeLine{00241\ \ \ \_BitScanForward(\&r,\ x);}
\DoxyCodeLine{00242\ \ \ FMT\_ASSERT(x\ !=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00243\ \ \ FMT\_MSC\_WARNING(suppress\ :\ 6102)\ \ \textcolor{comment}{//\ Suppress\ a\ bogus\ static\ analysis\ warning.}}
\DoxyCodeLine{00244\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(r);}
\DoxyCodeLine{00245\ \}}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\#\ \ define\ FMT\_BUILTIN\_CTZ(n)\ detail::ctz(n)}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ ctzll(uint64\_t\ x)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00249\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ r\ =\ 0;}
\DoxyCodeLine{00250\ \ \ FMT\_ASSERT(x\ !=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00251\ \ \ FMT\_MSC\_WARNING(suppress\ :\ 6102)\ \ \textcolor{comment}{//\ Suppress\ a\ bogus\ static\ analysis\ warning.}}
\DoxyCodeLine{00252\ \textcolor{preprocessor}{\#\ \ ifdef\ \_WIN64}}
\DoxyCodeLine{00253\ \ \ \_BitScanForward64(\&r,\ x);}
\DoxyCodeLine{00254\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//\ Scan\ the\ low\ 32\ bits.}}
\DoxyCodeLine{00256\ \ \ \textcolor{keywordflow}{if}\ (\_BitScanForward(\&r,\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(x)))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(r);}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ Scan\ the\ high\ 32\ bits.}}
\DoxyCodeLine{00258\ \ \ \_BitScanForward(\&r,\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(x\ >>\ 32));}
\DoxyCodeLine{00259\ \ \ r\ +=\ 32;}
\DoxyCodeLine{00260\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(r);}
\DoxyCodeLine{00262\ \}}
\DoxyCodeLine{00263\ \textcolor{preprocessor}{\#\ \ define\ FMT\_BUILTIN\_CTZLL(n)\ detail::ctzll(n)}}
\DoxyCodeLine{00264\ \}\ \ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00265\ FMT\_END\_NAMESPACE}
\DoxyCodeLine{00266\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ FMT\_BEGIN\_NAMESPACE}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdisjunction}{disjunction}}\ :\ std::false\_type\ \{\};}
\DoxyCodeLine{00271\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdisjunction}{disjunction<P>}}\ :\ P\ \{\};}
\DoxyCodeLine{00272\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P1,\ \textcolor{keyword}{typename}...\ Pn>}
\DoxyCodeLine{00273\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdisjunction}{disjunction}}<P1,\ Pn...>}
\DoxyCodeLine{00274\ \ \ \ \ :\ conditional\_t<bool(P1::value),\ P1,\ disjunction<Pn...>>\ \{\};}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structconjunction}{conjunction}}\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00277\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structconjunction}{conjunction<P>}}\ :\ P\ \{\};}
\DoxyCodeLine{00278\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P1,\ \textcolor{keyword}{typename}...\ Pn>}
\DoxyCodeLine{00279\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structconjunction}{conjunction}}<P1,\ Pn...>}
\DoxyCodeLine{00280\ \ \ \ \ :\ conditional\_t<bool(P1::value),\ conjunction<Pn...>,\ P1>\ \{\};}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ abort\_fuzzing\_if(\textcolor{keywordtype}{bool}\ condition)\ \{}
\DoxyCodeLine{00285\ \ \ ignore\_unused(condition);}
\DoxyCodeLine{00286\ \textcolor{preprocessor}{\#ifdef\ FMT\_FUZZ}}
\DoxyCodeLine{00287\ \ \ \textcolor{keywordflow}{if}\ (condition)\ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}fuzzing\ limit\ reached"{}});}
\DoxyCodeLine{00288\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00289\ \}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ CharT,\ CharT...\ C>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdetail_1_1string__literal}{string\_literal}}\ \{}
\DoxyCodeLine{00292\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ CharT\ \mbox{\hyperlink{classdetail_1_1value}{value}}[\textcolor{keyword}{sizeof}...(C)]\ =\ \{C...\};}
\DoxyCodeLine{00293\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{operator}\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<CharT>}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classdetail_1_1value}{value}},\ \textcolor{keyword}{sizeof}...(C)\};}
\DoxyCodeLine{00295\ \ \ \}}
\DoxyCodeLine{00296\ \};}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\#if\ FMT\_CPLUSPLUS\ <\ 201703L}}
\DoxyCodeLine{00299\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ CharT,\ CharT...\ C>}
\DoxyCodeLine{00300\ \textcolor{keyword}{constexpr}\ CharT\ \mbox{\hyperlink{structdetail_1_1string__literal}{string\_literal}}<CharT,\ C...>::value[\textcolor{keyword}{sizeof}...(C)];}
\DoxyCodeLine{00301\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Streambuf>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetail_1_1formatbuf}{formatbuf}}\ :\ \textcolor{keyword}{public}\ Streambuf\ \{}
\DoxyCodeLine{00304\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00305\ \ \ \textcolor{keyword}{using\ }char\_type\ =\ \textcolor{keyword}{typename}\ Streambuf::char\_type;}
\DoxyCodeLine{00306\ \ \ \textcolor{keyword}{using\ }streamsize\ =\ \textcolor{keyword}{decltype}(std::declval<Streambuf>().sputn(\textcolor{keyword}{nullptr},\ 0));}
\DoxyCodeLine{00307\ \ \ \textcolor{keyword}{using\ }int\_type\ =\ \textcolor{keyword}{typename}\ Streambuf::int\_type;}
\DoxyCodeLine{00308\ \ \ \textcolor{keyword}{using\ }traits\_type\ =\ \textcolor{keyword}{typename}\ Streambuf::traits\_type;}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \mbox{\hyperlink{classdetail_1_1buffer}{buffer<char\_type>}}\&\ buffer\_;}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00313\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdetail_1_1formatbuf}{formatbuf}}(\mbox{\hyperlink{classdetail_1_1buffer}{buffer<char\_type>}}\&\ buf)\ :\ buffer\_(buf)\ \{\}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00316\ \ \ \textcolor{comment}{//\ The\ put\ area\ is\ always\ empty.\ This\ makes\ the\ implementation\ simpler\ and\ has}}
\DoxyCodeLine{00317\ \ \ \textcolor{comment}{//\ the\ advantage\ that\ the\ streambuf\ and\ the\ buffer\ are\ always\ in\ sync\ and}}
\DoxyCodeLine{00318\ \ \ \textcolor{comment}{//\ sputc\ never\ writes\ into\ uninitialized\ memory.\ A\ disadvantage\ is\ that\ each}}
\DoxyCodeLine{00319\ \ \ \textcolor{comment}{//\ call\ to\ sputc\ always\ results\ in\ a\ (virtual)\ call\ to\ overflow.\ There\ is\ no}}
\DoxyCodeLine{00320\ \ \ \textcolor{comment}{//\ disadvantage\ here\ for\ sputn\ since\ this\ always\ results\ in\ a\ call\ to\ xsputn.}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \textcolor{keyword}{auto}\ overflow(int\_type\ ch)\ -\/>\ int\_type\ \textcolor{keyword}{override}\ \{}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{if}\ (!traits\_type::eq\_int\_type(ch,\ traits\_type::eof()))}
\DoxyCodeLine{00324\ \ \ \ \ \ \ buffer\_.push\_back(\textcolor{keyword}{static\_cast<}char\_type\textcolor{keyword}{>}(ch));}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordflow}{return}\ ch;}
\DoxyCodeLine{00326\ \ \ \}}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \textcolor{keyword}{auto}\ xsputn(\textcolor{keyword}{const}\ char\_type*\ s,\ streamsize\ count)\ -\/>\ streamsize\ \textcolor{keyword}{override}\ \{}
\DoxyCodeLine{00329\ \ \ \ \ buffer\_.\mbox{\hyperlink{classdetail_1_1buffer_a28f51acf32e61f37558f6c7b8d200c05}{append}}(s,\ s\ +\ count);}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{00331\ \ \ \}}
\DoxyCodeLine{00332\ \};}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \textcolor{comment}{//\ Implementation\ of\ std::bit\_cast\ for\ pre-\/C++20.}}
\DoxyCodeLine{00335\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ To,\ \textcolor{keyword}{typename}\ From,\ FMT\_ENABLE\_IF(sizeof(To)\ ==\ sizeof(From))>}
\DoxyCodeLine{00336\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ bit\_cast(\textcolor{keyword}{const}\ From\&\ from)\ -\/>\ To\ \{}
\DoxyCodeLine{00337\ \textcolor{preprocessor}{\#ifdef\ \_\_cpp\_lib\_bit\_cast}}
\DoxyCodeLine{00338\ \ \ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())\ \textcolor{keywordflow}{return}\ std::bit\_cast<To>(from);}
\DoxyCodeLine{00339\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00340\ \ \ \textcolor{keyword}{auto}\ to\ =\ To();}
\DoxyCodeLine{00341\ \ \ \textcolor{comment}{//\ The\ cast\ suppresses\ a\ bogus\ -\/Wclass-\/memaccess\ on\ GCC.}}
\DoxyCodeLine{00342\ \ \ std::memcpy(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&to),\ \&from,\ \textcolor{keyword}{sizeof}(to));}
\DoxyCodeLine{00343\ \ \ \textcolor{keywordflow}{return}\ to;}
\DoxyCodeLine{00344\ \}}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ is\_big\_endian()\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00347\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{00348\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00349\ \textcolor{preprocessor}{\#elif\ defined(\_\_BIG\_ENDIAN\_\_)}}
\DoxyCodeLine{00350\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\#elif\ defined(\_\_BYTE\_ORDER\_\_)\ \&\&\ defined(\_\_ORDER\_BIG\_ENDIAN\_\_)}}
\DoxyCodeLine{00352\ \ \ \textcolor{keywordflow}{return}\ \_\_BYTE\_ORDER\_\_\ ==\ \_\_ORDER\_BIG\_ENDIAN\_\_;}
\DoxyCodeLine{00353\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00354\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{classbytes}{bytes}}\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{structdata}{data}}[\textcolor{keyword}{sizeof}(int)];}
\DoxyCodeLine{00356\ \ \ \};}
\DoxyCodeLine{00357\ \ \ \textcolor{keywordflow}{return}\ bit\_cast<bytes>(1).data[0]\ ==\ 0;}
\DoxyCodeLine{00358\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00359\ \}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00362\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00363\ \ \ uint64\_t\ lo\_,\ hi\_;}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \textcolor{keyword}{friend}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ umul128(uint64\_t\ x,\ uint64\_t\ y)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00368\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}(uint64\_t\ hi,\ uint64\_t\ lo)\ :\ lo\_(lo),\ hi\_(hi)\ \{\}}
\DoxyCodeLine{00369\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}(uint64\_t\ \mbox{\hyperlink{classdetail_1_1value}{value}}\ =\ 0)\ :\ lo\_(\mbox{\hyperlink{classdetail_1_1value}{value}}),\ hi\_(0)\ \{\}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \textcolor{keyword}{constexpr}\ uint64\_t\ high()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{return}\ hi\_;\ \}}
\DoxyCodeLine{00372\ \ \ \textcolor{keyword}{constexpr}\ uint64\_t\ low()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{return}\ lo\_;\ \}}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(std::is\_\textcolor{keywordtype}{int}egral<T>::value)>}
\DoxyCodeLine{00375\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{explicit}\ \textcolor{keyword}{operator}\ T()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(lo\_);}
\DoxyCodeLine{00377\ \ \ \}}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator==(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ rhs)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keywordflow}{return}\ lhs.hi\_\ ==\ rhs.hi\_\ \&\&\ lhs.lo\_\ ==\ rhs.lo\_;}
\DoxyCodeLine{00382\ \ \ \}}
\DoxyCodeLine{00383\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator!=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ rhs)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{keywordflow}{return}\ !(lhs\ ==\ rhs);}
\DoxyCodeLine{00386\ \ \ \}}
\DoxyCodeLine{00387\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator>(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ rhs)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{keywordflow}{return}\ lhs.hi\_\ !=\ rhs.hi\_\ ?\ lhs.hi\_\ >\ rhs.hi\_\ :\ lhs.lo\_\ >\ rhs.lo\_;}
\DoxyCodeLine{00390\ \ \ \}}
\DoxyCodeLine{00391\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator|(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ rhs)}
\DoxyCodeLine{00393\ \ \ \ \ \ \ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{keywordflow}{return}\ \{lhs.hi\_\ |\ rhs.hi\_,\ lhs.lo\_\ |\ rhs.lo\_\};}
\DoxyCodeLine{00395\ \ \ \}}
\DoxyCodeLine{00396\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator\&(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ rhs)}
\DoxyCodeLine{00398\ \ \ \ \ \ \ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00399\ \ \ \ \ \textcolor{keywordflow}{return}\ \{lhs.hi\_\ \&\ rhs.hi\_,\ lhs.lo\_\ \&\ rhs.lo\_\};}
\DoxyCodeLine{00400\ \ \ \}}
\DoxyCodeLine{00401\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator\string~(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ n)}
\DoxyCodeLine{00402\ \ \ \ \ \ \ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\string~n.hi\_,\ \string~n.lo\_\};}
\DoxyCodeLine{00404\ \ \ \}}
\DoxyCodeLine{00405\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{auto}\ operator+(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ rhs)\ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keyword}{auto}\ result\ =\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}(lhs);}
\DoxyCodeLine{00408\ \ \ \ \ result\ +=\ rhs;}
\DoxyCodeLine{00409\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00410\ \ \ \}}
\DoxyCodeLine{00411\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{auto}\ operator*(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,\ uint32\_t\ rhs)}
\DoxyCodeLine{00412\ \ \ \ \ \ \ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00413\ \ \ \ \ FMT\_ASSERT(lhs.hi\_\ ==\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00414\ \ \ \ \ uint64\_t\ hi\ =\ (lhs.lo\_\ >>\ 32)\ *\ rhs;}
\DoxyCodeLine{00415\ \ \ \ \ uint64\_t\ lo\ =\ (lhs.lo\_\ \&\ \string~uint32\_t())\ *\ rhs;}
\DoxyCodeLine{00416\ \ \ \ \ uint64\_t\ new\_lo\ =\ (hi\ <<\ 32)\ +\ lo;}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordflow}{return}\ \{(hi\ >>\ 32)\ +\ (new\_lo\ <\ lo\ ?\ 1\ :\ 0),\ new\_lo\};}
\DoxyCodeLine{00418\ \ \ \}}
\DoxyCodeLine{00419\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{auto}\ operator-\/(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ lhs,\ uint64\_t\ rhs)}
\DoxyCodeLine{00420\ \ \ \ \ \ \ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordflow}{return}\ \{lhs.hi\_\ -\/\ (lhs.lo\_\ <\ rhs\ ?\ 1\ :\ 0),\ lhs.lo\_\ -\/\ rhs\};}
\DoxyCodeLine{00422\ \ \ \}}
\DoxyCodeLine{00423\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator>>(\textcolor{keywordtype}{int}\ shift)\ \textcolor{keyword}{const}\ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 64)\ \textcolor{keywordflow}{return}\ \{0,\ hi\_\};}
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ >\ 64)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}(0,\ hi\_)\ >>\ (shift\ -\/\ 64);}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordflow}{return}\ \{hi\_\ >>\ shift,\ (hi\_\ <<\ (64\ -\/\ shift))\ |\ (lo\_\ >>\ shift)\};}
\DoxyCodeLine{00427\ \ \ \}}
\DoxyCodeLine{00428\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator<<(\textcolor{keywordtype}{int}\ shift)\ \textcolor{keyword}{const}\ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ \{}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 64)\ \textcolor{keywordflow}{return}\ \{lo\_,\ 0\};}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ >\ 64)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}(lo\_,\ 0)\ <<\ (shift\ -\/\ 64);}
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{keywordflow}{return}\ \{hi\_\ <<\ shift\ |\ (lo\_\ >>\ (64\ -\/\ shift)),\ (lo\_\ <<\ shift)\};}
\DoxyCodeLine{00432\ \ \ \}}
\DoxyCodeLine{00433\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator>>=(\textcolor{keywordtype}{int}\ shift)\ -\/>\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this}\ =\ *\textcolor{keyword}{this}\ >>\ shift;}
\DoxyCodeLine{00435\ \ \ \}}
\DoxyCodeLine{00436\ \ \ FMT\_CONSTEXPR\ \textcolor{keywordtype}{void}\ operator+=(\mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ n)\ \{}
\DoxyCodeLine{00437\ \ \ \ \ uint64\_t\ new\_lo\ =\ lo\_\ +\ n.lo\_;}
\DoxyCodeLine{00438\ \ \ \ \ uint64\_t\ new\_hi\ =\ hi\_\ +\ n.hi\_\ +\ (new\_lo\ <\ lo\_\ ?\ 1\ :\ 0);}
\DoxyCodeLine{00439\ \ \ \ \ FMT\_ASSERT(new\_hi\ >=\ hi\_,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00440\ \ \ \ \ lo\_\ =\ new\_lo;}
\DoxyCodeLine{00441\ \ \ \ \ hi\_\ =\ new\_hi;}
\DoxyCodeLine{00442\ \ \ \}}
\DoxyCodeLine{00443\ \ \ FMT\_CONSTEXPR\ \textcolor{keywordtype}{void}\ operator\&=(\mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\ n)\ \{}
\DoxyCodeLine{00444\ \ \ \ \ lo\_\ \&=\ n.lo\_;}
\DoxyCodeLine{00445\ \ \ \ \ hi\_\ \&=\ n.hi\_;}
\DoxyCodeLine{00446\ \ \ \}}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00448\ \ \ FMT\_CONSTEXPR20\ \mbox{\hyperlink{classdetail_1_1uint128__fallback}{uint128\_fallback}}\&\ operator+=(uint64\_t\ n)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \ \ lo\_\ +=\ n;}
\DoxyCodeLine{00451\ \ \ \ \ \ \ hi\_\ +=\ (lo\_\ <\ n\ ?\ 1\ :\ 0);}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00453\ \ \ \ \ \}}
\DoxyCodeLine{00454\ \textcolor{preprocessor}{\#if\ FMT\_HAS\_BUILTIN(\_\_builtin\_addcll)\ \&\&\ !defined(\_\_ibmxl\_\_)}}
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ carry;}
\DoxyCodeLine{00456\ \ \ \ \ lo\_\ =\ \_\_builtin\_addcll(lo\_,\ n,\ 0,\ \&carry);}
\DoxyCodeLine{00457\ \ \ \ \ hi\_\ +=\ carry;}
\DoxyCodeLine{00458\ \textcolor{preprocessor}{\#elif\ FMT\_HAS\_BUILTIN(\_\_builtin\_ia32\_addcarryx\_u64)\ \&\&\ !defined(\_\_ibmxl\_\_)}}
\DoxyCodeLine{00459\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ result;}
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{keyword}{auto}\ carry\ =\ \_\_builtin\_ia32\_addcarryx\_u64(0,\ lo\_,\ n,\ \&result);}
\DoxyCodeLine{00461\ \ \ \ \ lo\_\ =\ result;}
\DoxyCodeLine{00462\ \ \ \ \ hi\_\ +=\ carry;}
\DoxyCodeLine{00463\ \textcolor{preprocessor}{\#elif\ defined(\_MSC\_VER)\ \&\&\ defined(\_M\_X64)}}
\DoxyCodeLine{00464\ \ \ \ \ \textcolor{keyword}{auto}\ carry\ =\ \_addcarry\_u64(0,\ lo\_,\ n,\ \&lo\_);}
\DoxyCodeLine{00465\ \ \ \ \ \_addcarry\_u64(carry,\ hi\_,\ 0,\ \&hi\_);}
\DoxyCodeLine{00466\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00467\ \ \ \ \ lo\_\ +=\ n;}
\DoxyCodeLine{00468\ \ \ \ \ hi\_\ +=\ (lo\_\ <\ n\ ?\ 1\ :\ 0);}
\DoxyCodeLine{00469\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00471\ \ \ \}}
\DoxyCodeLine{00472\ \};}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \textcolor{keyword}{using\ }uint128\_t\ =\ conditional\_t<FMT\_USE\_INT128,\ uint128\_opt,\ uint128\_fallback>;}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \textcolor{preprocessor}{\#ifdef\ UINTPTR\_MAX}}
\DoxyCodeLine{00477\ \textcolor{keyword}{using\ }uintptr\_t\ =\ ::uintptr\_t;}
\DoxyCodeLine{00478\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00479\ \textcolor{keyword}{using\ }uintptr\_t\ =\ uint128\_t;}
\DoxyCodeLine{00480\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \textcolor{comment}{//\ Returns\ the\ largest\ possible\ value\ for\ type\ T.\ Same\ as}}
\DoxyCodeLine{00483\ \textcolor{comment}{//\ std::numeric\_limits<T>::max()\ but\ shorter\ and\ not\ affected\ by\ the\ max\ macro.}}
\DoxyCodeLine{00484\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ max\_value()\ -\/>\ T\ \{}
\DoxyCodeLine{00485\ \ \ \textcolor{keywordflow}{return}\ (std::numeric\_limits<T>::max)();}
\DoxyCodeLine{00486\ \}}
\DoxyCodeLine{00487\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ num\_bits()\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00488\ \ \ \textcolor{keywordflow}{return}\ std::numeric\_limits<T>::digits;}
\DoxyCodeLine{00489\ \}}
\DoxyCodeLine{00490\ \textcolor{comment}{//\ std::numeric\_limits<T>::digits\ may\ return\ 0\ for\ 128-\/bit\ ints.}}
\DoxyCodeLine{00491\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ num\_bits<int128\_opt>()\ -\/>\ \textcolor{keywordtype}{int}\ \{\ \textcolor{keywordflow}{return}\ 128;\ \}}
\DoxyCodeLine{00492\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ num\_bits<uint128\_t>()\ -\/>\ \textcolor{keywordtype}{int}\ \{\ \textcolor{keywordflow}{return}\ 128;\ \}}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \textcolor{comment}{//\ A\ heterogeneous\ bit\_cast\ used\ for\ converting\ 96-\/bit\ long\ double\ to\ uint128\_t}}
\DoxyCodeLine{00495\ \textcolor{comment}{//\ and\ 128-\/bit\ pointers\ to\ uint128\_fallback.}}
\DoxyCodeLine{00496\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ To,\ \textcolor{keyword}{typename}\ From,\ FMT\_ENABLE\_IF(sizeof(To)\ >\ \textcolor{keyword}{sizeof}(From))>}
\DoxyCodeLine{00497\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ bit\_cast(\textcolor{keyword}{const}\ From\&\ from)\ -\/>\ To\ \{}
\DoxyCodeLine{00498\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ size\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\textcolor{keyword}{sizeof}(From)\ /\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{00499\ \ \ \textcolor{keyword}{struct\ }data\_t\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ value[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(size)];}
\DoxyCodeLine{00501\ \ \ \}\ \mbox{\hyperlink{structdata}{data}}\ =\ bit\_cast<data\_t>(from);}
\DoxyCodeLine{00502\ \ \ \textcolor{keyword}{auto}\ result\ =\ To();}
\DoxyCodeLine{00503\ \ \ \textcolor{keywordflow}{if}\ (const\_check(is\_big\_endian()))\ \{}
\DoxyCodeLine{00504\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ size;\ ++i)}
\DoxyCodeLine{00505\ \ \ \ \ \ \ result\ =\ (result\ <<\ num\_bits<unsigned>())\ |\ \mbox{\hyperlink{structdata}{data}}.value[i];}
\DoxyCodeLine{00506\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00507\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ size\ -\/\ 1;\ i\ >=\ 0;\ -\/-\/i)}
\DoxyCodeLine{00508\ \ \ \ \ \ \ result\ =\ (result\ <<\ num\_bits<unsigned>())\ |\ \mbox{\hyperlink{structdata}{data}}.value[i];}
\DoxyCodeLine{00509\ \ \ \}}
\DoxyCodeLine{00510\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00511\ \}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ UInt>}
\DoxyCodeLine{00514\ FMT\_CONSTEXPR20\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ countl\_zero\_fallback(UInt\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00515\ \ \ \textcolor{keywordtype}{int}\ lz\ =\ 0;}
\DoxyCodeLine{00516\ \ \ \textcolor{keyword}{constexpr}\ UInt\ msb\_mask\ =\ \textcolor{keyword}{static\_cast<}UInt\textcolor{keyword}{>}(1)\ <<\ (num\_bits<UInt>()\ -\/\ 1);}
\DoxyCodeLine{00517\ \ \ \textcolor{keywordflow}{for}\ (;\ (n\ \&\ msb\_mask)\ ==\ 0;\ n\ <<=\ 1)\ lz++;}
\DoxyCodeLine{00518\ \ \ \textcolor{keywordflow}{return}\ lz;}
\DoxyCodeLine{00519\ \}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ FMT\_CONSTEXPR20\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ countl\_zero(uint32\_t\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00522\ \textcolor{preprocessor}{\#ifdef\ FMT\_BUILTIN\_CLZ}}
\DoxyCodeLine{00523\ \ \ \textcolor{keywordflow}{if}\ (!is\_constant\_evaluated())\ \textcolor{keywordflow}{return}\ FMT\_BUILTIN\_CLZ(n);}
\DoxyCodeLine{00524\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00525\ \ \ \textcolor{keywordflow}{return}\ countl\_zero\_fallback(n);}
\DoxyCodeLine{00526\ \}}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ FMT\_CONSTEXPR20\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ countl\_zero(uint64\_t\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{00529\ \textcolor{preprocessor}{\#ifdef\ FMT\_BUILTIN\_CLZLL}}
\DoxyCodeLine{00530\ \ \ \textcolor{keywordflow}{if}\ (!is\_constant\_evaluated())\ \textcolor{keywordflow}{return}\ FMT\_BUILTIN\_CLZLL(n);}
\DoxyCodeLine{00531\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00532\ \ \ \textcolor{keywordflow}{return}\ countl\_zero\_fallback(n);}
\DoxyCodeLine{00533\ \}}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ FMT\_INLINE\ \textcolor{keywordtype}{void}\ assume(\textcolor{keywordtype}{bool}\ condition)\ \{}
\DoxyCodeLine{00536\ \ \ (void)condition;}
\DoxyCodeLine{00537\ \textcolor{preprocessor}{\#if\ FMT\_HAS\_BUILTIN(\_\_builtin\_assume)\ \&\&\ !FMT\_ICC\_VERSION}}
\DoxyCodeLine{00538\ \ \ \_\_builtin\_assume(condition);}
\DoxyCodeLine{00539\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00540\ \}}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \textcolor{comment}{//\ An\ approximation\ of\ iterator\_t\ for\ pre-\/C++20\ systems.}}
\DoxyCodeLine{00543\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00544\ \textcolor{keyword}{using\ }iterator\_t\ =\ \textcolor{keyword}{decltype}(std::begin(std::declval<T\&>()));}
\DoxyCodeLine{00545\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{using\ }sentinel\_t\ =\ \textcolor{keyword}{decltype}(std::end(std::declval<T\&>()));}
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00547\ \textcolor{comment}{//\ A\ workaround\ for\ std::string\ not\ having\ mutable\ data()\ until\ C++17.}}
\DoxyCodeLine{00548\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{00549\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ get\_data(std::basic\_string<Char>\&\ s)\ -\/>\ Char*\ \{}
\DoxyCodeLine{00550\ \ \ \textcolor{keywordflow}{return}\ \&s[0];}
\DoxyCodeLine{00551\ \}}
\DoxyCodeLine{00552\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Container>}
\DoxyCodeLine{00553\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ get\_data(Container\&\ c)\ -\/>\ \textcolor{keyword}{typename}\ Container::value\_type*\ \{}
\DoxyCodeLine{00554\ \ \ \textcolor{keywordflow}{return}\ c.data();}
\DoxyCodeLine{00555\ \}}
\DoxyCodeLine{00556\ }
\DoxyCodeLine{00557\ \textcolor{preprocessor}{\#if\ defined(\_SECURE\_SCL)\ \&\&\ \_SECURE\_SCL}}
\DoxyCodeLine{00558\ \textcolor{comment}{//\ Make\ a\ checked\ iterator\ to\ avoid\ MSVC\ warnings.}}
\DoxyCodeLine{00559\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{using\ }checked\_ptr\ =\ stdext::checked\_array\_iterator<T*>;}
\DoxyCodeLine{00560\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00561\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ make\_checked(T*\ p,\ \textcolor{keywordtype}{size\_t}\ size)\ -\/>\ checked\_ptr<T>\ \{}
\DoxyCodeLine{00562\ \ \ \textcolor{keywordflow}{return}\ \{p,\ size\};}
\DoxyCodeLine{00563\ \}}
\DoxyCodeLine{00564\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00565\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{using\ }checked\_ptr\ =\ T*;}
\DoxyCodeLine{00566\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ make\_checked(T*\ p,\ \textcolor{keywordtype}{size\_t})\ -\/>\ T*\ \{}
\DoxyCodeLine{00567\ \ \ \textcolor{keywordflow}{return}\ p;}
\DoxyCodeLine{00568\ \}}
\DoxyCodeLine{00569\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \textcolor{comment}{//\ Attempts\ to\ reserve\ space\ for\ n\ extra\ characters\ in\ the\ output\ range.}}
\DoxyCodeLine{00572\ \textcolor{comment}{//\ Returns\ a\ pointer\ to\ the\ reserved\ range\ or\ a\ reference\ to\ it.}}
\DoxyCodeLine{00573\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Container,\ FMT\_ENABLE\_IF(is\_contiguous<Container>::value)>}
\DoxyCodeLine{00574\ \textcolor{preprocessor}{\#if\ FMT\_CLANG\_VERSION\ >=\ 307\ \&\&\ !FMT\_ICC\_VERSION}}
\DoxyCodeLine{00575\ \_\_attribute\_\_((no\_sanitize(\textcolor{stringliteral}{"{}undefined"{}})))}
\DoxyCodeLine{00576\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00577\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}}
\DoxyCodeLine{00578\ reserve(std::back\_insert\_iterator<Container>\ it,\ \textcolor{keywordtype}{size\_t}\ n)}
\DoxyCodeLine{00579\ \ \ \ \ -\/>\ checked\_ptr<typename\ Container::value\_type>\ \{}
\DoxyCodeLine{00580\ \ \ Container\&\ c\ =\ get\_container(it);}
\DoxyCodeLine{00581\ \ \ \textcolor{keywordtype}{size\_t}\ size\ =\ c.size();}
\DoxyCodeLine{00582\ \ \ c.resize(size\ +\ n);}
\DoxyCodeLine{00583\ \ \ \textcolor{keywordflow}{return}\ make\_checked(get\_data(c)\ +\ size,\ n);}
\DoxyCodeLine{00584\ \}}
\DoxyCodeLine{00585\ }
\DoxyCodeLine{00586\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00587\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ reserve(buffer\_appender<T>\ it,\ \textcolor{keywordtype}{size\_t}\ n)\ -\/>\ buffer\_appender<T>\ \{}
\DoxyCodeLine{00588\ \ \ buffer<T>\&\ buf\ =\ get\_container(it);}
\DoxyCodeLine{00589\ \ \ buf.try\_reserve(buf.size()\ +\ n);}
\DoxyCodeLine{00590\ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00591\ \}}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator>}
\DoxyCodeLine{00594\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ reserve(Iterator\&\ it,\ \textcolor{keywordtype}{size\_t})\ -\/>\ Iterator\&\ \{}
\DoxyCodeLine{00595\ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00596\ \}}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{00599\ \textcolor{keyword}{using\ }reserve\_iterator\ =}
\DoxyCodeLine{00600\ \ \ \ \ remove\_reference\_t<decltype(reserve(std::declval<OutputIt\&>(),\ 0))>;}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{00603\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ to\_pointer(OutputIt,\ \textcolor{keywordtype}{size\_t})\ -\/>\ T*\ \{}
\DoxyCodeLine{00604\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00605\ \}}
\DoxyCodeLine{00606\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{auto}\ to\_pointer(buffer\_appender<T>\ it,\ \textcolor{keywordtype}{size\_t}\ n)\ -\/>\ T*\ \{}
\DoxyCodeLine{00607\ \ \ buffer<T>\&\ buf\ =\ get\_container(it);}
\DoxyCodeLine{00608\ \ \ \textcolor{keyword}{auto}\ size\ =\ buf.size();}
\DoxyCodeLine{00609\ \ \ \textcolor{keywordflow}{if}\ (buf.capacity()\ <\ size\ +\ n)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00610\ \ \ buf.try\_resize(size\ +\ n);}
\DoxyCodeLine{00611\ \ \ \textcolor{keywordflow}{return}\ buf.data()\ +\ size;}
\DoxyCodeLine{00612\ \}}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Container,\ FMT\_ENABLE\_IF(is\_contiguous<Container>::value)>}
\DoxyCodeLine{00615\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ base\_iterator(std::back\_insert\_iterator<Container>\&\ it,}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ checked\_ptr<typename\ Container::value\_type>)}
\DoxyCodeLine{00617\ \ \ \ \ -\/>\ std::back\_insert\_iterator<Container>\ \{}
\DoxyCodeLine{00618\ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00619\ \}}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator>}
\DoxyCodeLine{00622\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ base\_iterator(Iterator,\ Iterator\ it)\ -\/>\ Iterator\ \{}
\DoxyCodeLine{00623\ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00624\ \}}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \textcolor{comment}{//\ <algorithm>\ is\ spectacularly\ slow\ to\ compile\ in\ C++20\ so\ use\ a\ simple\ fill\_n}}
\DoxyCodeLine{00627\ \textcolor{comment}{//\ instead\ (\#1998).}}
\DoxyCodeLine{00628\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Size,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00629\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ fill\_n(OutputIt\ out,\ Size\ count,\ \textcolor{keyword}{const}\ T\&\ value)}
\DoxyCodeLine{00630\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{00631\ \ \ \textcolor{keywordflow}{for}\ (Size\ i\ =\ 0;\ i\ <\ count;\ ++i)\ *out++\ =\ value;}
\DoxyCodeLine{00632\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00633\ \}}
\DoxyCodeLine{00634\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Size>}
\DoxyCodeLine{00635\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ fill\_n(T*\ out,\ Size\ count,\ \textcolor{keywordtype}{char}\ value)\ -\/>\ T*\ \{}
\DoxyCodeLine{00636\ \ \ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())\ \{}
\DoxyCodeLine{00637\ \ \ \ \ \textcolor{keywordflow}{return}\ fill\_n<T*,\ Size,\ T>(out,\ count,\ value);}
\DoxyCodeLine{00638\ \ \ \}}
\DoxyCodeLine{00639\ \ \ std::memset(out,\ value,\ to\_unsigned(count));}
\DoxyCodeLine{00640\ \ \ \textcolor{keywordflow}{return}\ out\ +\ count;}
\DoxyCodeLine{00641\ \}}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \textcolor{preprocessor}{\#ifdef\ \_\_cpp\_char8\_t}}
\DoxyCodeLine{00644\ \textcolor{keyword}{using\ }char8\_type\ =\ char8\_t;}
\DoxyCodeLine{00645\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00646\ \textcolor{keyword}{enum}\ char8\_type\ :\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \{\};}
\DoxyCodeLine{00647\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutChar,\ \textcolor{keyword}{typename}\ InputIt,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{00650\ FMT\_CONSTEXPR\ FMT\_NOINLINE\ \textcolor{keyword}{auto}\ copy\_str\_noinline(InputIt\ begin,\ InputIt\ end,}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OutputIt\ out)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{00652\ \ \ \textcolor{keywordflow}{return}\ copy\_str<OutChar>(begin,\ end,\ out);}
\DoxyCodeLine{00653\ \}}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \textcolor{comment}{//\ A\ public\ domain\ branchless\ UTF-\/8\ decoder\ by\ Christopher\ Wellons:}}
\DoxyCodeLine{00656\ \textcolor{comment}{//\ https://github.com/skeeto/branchless-\/utf8}}
\DoxyCodeLine{00657\ \textcolor{comment}{/*\ Decode\ the\ next\ character,\ c,\ from\ s,\ reporting\ errors\ in\ e.}}
\DoxyCodeLine{00658\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00659\ \textcolor{comment}{\ *\ Since\ this\ is\ a\ branchless\ decoder,\ four\ bytes\ will\ be\ read\ from\ the}}
\DoxyCodeLine{00660\ \textcolor{comment}{\ *\ buffer\ regardless\ of\ the\ actual\ length\ of\ the\ next\ character.\ This}}
\DoxyCodeLine{00661\ \textcolor{comment}{\ *\ means\ the\ buffer\ \_must\_\ have\ at\ least\ three\ bytes\ of\ zero\ padding}}
\DoxyCodeLine{00662\ \textcolor{comment}{\ *\ following\ the\ end\ of\ the\ data\ stream.}}
\DoxyCodeLine{00663\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00664\ \textcolor{comment}{\ *\ Errors\ are\ reported\ in\ e,\ which\ will\ be\ non-\/zero\ if\ the\ parsed}}
\DoxyCodeLine{00665\ \textcolor{comment}{\ *\ character\ was\ somehow\ invalid:\ invalid\ byte\ sequence,\ non-\/canonical}}
\DoxyCodeLine{00666\ \textcolor{comment}{\ *\ encoding,\ or\ a\ surrogate\ half.}}
\DoxyCodeLine{00667\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00668\ \textcolor{comment}{\ *\ The\ function\ returns\ a\ pointer\ to\ the\ next\ character.\ When\ an\ error}}
\DoxyCodeLine{00669\ \textcolor{comment}{\ *\ occurs,\ this\ pointer\ will\ be\ a\ guess\ that\ depends\ on\ the\ particular}}
\DoxyCodeLine{00670\ \textcolor{comment}{\ *\ error,\ but\ it\ will\ always\ advance\ at\ least\ one\ byte.}}
\DoxyCodeLine{00671\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00672\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ utf8\_decode(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ uint32\_t*\ c,\ \textcolor{keywordtype}{int}*\ e)}
\DoxyCodeLine{00673\ \ \ \ \ -\/>\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \{}
\DoxyCodeLine{00674\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ masks[]\ =\ \{0x00,\ 0x7f,\ 0x1f,\ 0x0f,\ 0x07\};}
\DoxyCodeLine{00675\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ uint32\_t\ mins[]\ =\ \{4194304,\ 0,\ 128,\ 2048,\ 65536\};}
\DoxyCodeLine{00676\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shiftc[]\ =\ \{0,\ 18,\ 12,\ 6,\ 0\};}
\DoxyCodeLine{00677\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shifte[]\ =\ \{0,\ 6,\ 4,\ 2,\ 0\};}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ \textcolor{keywordtype}{int}\ len\ =\ \textcolor{stringliteral}{"{}\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)1\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)0\(\backslash\)2\(\backslash\)2\(\backslash\)2\(\backslash\)2\(\backslash\)3\(\backslash\)3\(\backslash\)4"{}}}
\DoxyCodeLine{00680\ \ \ \ \ \ \ [\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(*s)\ >>\ 3];}
\DoxyCodeLine{00681\ \ \ \textcolor{comment}{//\ Compute\ the\ pointer\ to\ the\ next\ character\ early\ so\ that\ the\ next}}
\DoxyCodeLine{00682\ \ \ \textcolor{comment}{//\ iteration\ can\ start\ working\ on\ the\ next\ character.\ Neither\ Clang}}
\DoxyCodeLine{00683\ \ \ \textcolor{comment}{//\ nor\ GCC\ figure\ out\ this\ reordering\ on\ their\ own.}}
\DoxyCodeLine{00684\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ next\ =\ s\ +\ len\ +\ !len;}
\DoxyCodeLine{00685\ }
\DoxyCodeLine{00686\ \ \ \textcolor{keyword}{using\ }uchar\ =\ \textcolor{keywordtype}{unsigned}\ char;}
\DoxyCodeLine{00687\ }
\DoxyCodeLine{00688\ \ \ \textcolor{comment}{//\ Assume\ a\ four-\/byte\ character\ and\ load\ four\ bytes.\ Unused\ bits\ are}}
\DoxyCodeLine{00689\ \ \ \textcolor{comment}{//\ shifted\ out.}}
\DoxyCodeLine{00690\ \ \ *c\ =\ uint32\_t(uchar(s[0])\ \&\ masks[len])\ <<\ 18;}
\DoxyCodeLine{00691\ \ \ *c\ |=\ uint32\_t(uchar(s[1])\ \&\ 0x3f)\ <<\ 12;}
\DoxyCodeLine{00692\ \ \ *c\ |=\ uint32\_t(uchar(s[2])\ \&\ 0x3f)\ <<\ 6;}
\DoxyCodeLine{00693\ \ \ *c\ |=\ uint32\_t(uchar(s[3])\ \&\ 0x3f)\ <<\ 0;}
\DoxyCodeLine{00694\ \ \ *c\ >>=\ shiftc[len];}
\DoxyCodeLine{00695\ }
\DoxyCodeLine{00696\ \ \ \textcolor{comment}{//\ Accumulate\ the\ various\ error\ conditions.}}
\DoxyCodeLine{00697\ \ \ *e\ =\ (*c\ <\ mins[len])\ <<\ 6;\ \ \ \ \ \ \ \textcolor{comment}{//\ non-\/canonical\ encoding}}
\DoxyCodeLine{00698\ \ \ *e\ |=\ ((*c\ >>\ 11)\ ==\ 0x1b)\ <<\ 7;\ \ \textcolor{comment}{//\ surrogate\ half?}}
\DoxyCodeLine{00699\ \ \ *e\ |=\ (*c\ >\ 0x10FFFF)\ <<\ 8;\ \ \ \ \ \ \ \textcolor{comment}{//\ out\ of\ range?}}
\DoxyCodeLine{00700\ \ \ *e\ |=\ (uchar(s[1])\ \&\ 0xc0)\ >>\ 2;}
\DoxyCodeLine{00701\ \ \ *e\ |=\ (uchar(s[2])\ \&\ 0xc0)\ >>\ 4;}
\DoxyCodeLine{00702\ \ \ *e\ |=\ uchar(s[3])\ >>\ 6;}
\DoxyCodeLine{00703\ \ \ *e\ \string^=\ 0x2a;\ \ \textcolor{comment}{//\ top\ two\ bits\ of\ each\ tail\ byte\ correct?}}
\DoxyCodeLine{00704\ \ \ *e\ >>=\ shifte[len];}
\DoxyCodeLine{00705\ }
\DoxyCodeLine{00706\ \ \ \textcolor{keywordflow}{return}\ next;}
\DoxyCodeLine{00707\ \}}
\DoxyCodeLine{00708\ }
\DoxyCodeLine{00709\ \textcolor{keyword}{constexpr}\ FMT\_INLINE\_VARIABLE\ uint32\_t\ invalid\_code\_point\ =\ \string~uint32\_t();}
\DoxyCodeLine{00710\ }
\DoxyCodeLine{00711\ \textcolor{comment}{//\ Invokes\ f(cp,\ sv)\ for\ every\ code\ point\ cp\ in\ s\ with\ sv\ being\ the\ string\ view}}
\DoxyCodeLine{00712\ \textcolor{comment}{//\ corresponding\ to\ the\ code\ point.\ cp\ is\ invalid\_code\_point\ on\ error.}}
\DoxyCodeLine{00713\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00714\ FMT\_CONSTEXPR\ \textcolor{keywordtype}{void}\ for\_each\_codepoint(\mbox{\hyperlink{classbasic__string__view}{string\_view}}\ s,\ F\ f)\ \{}
\DoxyCodeLine{00715\ \ \ \textcolor{keyword}{auto}\ decode\ =\ [f](\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ buf\_ptr,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ ptr)\ \{}
\DoxyCodeLine{00716\ \ \ \ \ \textcolor{keyword}{auto}\ cp\ =\ uint32\_t();}
\DoxyCodeLine{00717\ \ \ \ \ \textcolor{keyword}{auto}\ error\ =\ 0;}
\DoxyCodeLine{00718\ \ \ \ \ \textcolor{keyword}{auto}\ end\ =\ utf8\_decode(buf\_ptr,\ \&cp,\ \&error);}
\DoxyCodeLine{00719\ \ \ \ \ \textcolor{keywordtype}{bool}\ result\ =\ f(error\ ?\ invalid\_code\_point\ :\ cp,}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__string__view}{string\_view}}(ptr,\ error\ ?\ 1\ :\ to\_unsigned(end\ -\/\ buf\_ptr)));}
\DoxyCodeLine{00721\ \ \ \ \ \textcolor{keywordflow}{return}\ result\ ?\ (error\ ?\ buf\_ptr\ +\ 1\ :\ end)\ :\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00722\ \ \ \};}
\DoxyCodeLine{00723\ \ \ \textcolor{keyword}{auto}\ p\ =\ s.data();}
\DoxyCodeLine{00724\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ block\_size\ =\ 4;\ \ \textcolor{comment}{//\ utf8\_decode\ always\ reads\ blocks\ of\ 4\ chars.}}
\DoxyCodeLine{00725\ \ \ \textcolor{keywordflow}{if}\ (s.size()\ >=\ block\_size)\ \{}
\DoxyCodeLine{00726\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ end\ =\ p\ +\ s.size()\ -\/\ block\_size\ +\ 1;\ p\ <\ end;)\ \{}
\DoxyCodeLine{00727\ \ \ \ \ \ \ p\ =\ decode(p,\ p);}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!p)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00729\ \ \ \ \ \}}
\DoxyCodeLine{00730\ \ \ \}}
\DoxyCodeLine{00731\ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ num\_chars\_left\ =\ s.data()\ +\ s.size()\ -\/\ p)\ \{}
\DoxyCodeLine{00732\ \ \ \ \ \textcolor{keywordtype}{char}\ buf[2\ *\ block\_size\ -\/\ 1]\ =\ \{\};}
\DoxyCodeLine{00733\ \ \ \ \ copy\_str<char>(p,\ p\ +\ num\_chars\_left,\ buf);}
\DoxyCodeLine{00734\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ buf\_ptr\ =\ buf;}
\DoxyCodeLine{00735\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\ =\ decode(buf\_ptr,\ p);}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!end)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00738\ \ \ \ \ \ \ p\ +=\ end\ -\/\ buf\_ptr;}
\DoxyCodeLine{00739\ \ \ \ \ \ \ buf\_ptr\ =\ end;}
\DoxyCodeLine{00740\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (buf\_ptr\ -\/\ buf\ <\ num\_chars\_left);}
\DoxyCodeLine{00741\ \ \ \}}
\DoxyCodeLine{00742\ \}}
\DoxyCodeLine{00743\ }
\DoxyCodeLine{00744\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{00745\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ compute\_width(\mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ s)\ -\/>\ \textcolor{keywordtype}{size\_t}\ \{}
\DoxyCodeLine{00746\ \ \ \textcolor{keywordflow}{return}\ s.size();}
\DoxyCodeLine{00747\ \}}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ \textcolor{comment}{//\ Computes\ approximate\ display\ width\ of\ a\ UTF-\/8\ string.}}
\DoxyCodeLine{00750\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ compute\_width(\mbox{\hyperlink{classbasic__string__view}{string\_view}}\ s)\ \{}
\DoxyCodeLine{00751\ \ \ \textcolor{keywordtype}{size\_t}\ num\_code\_points\ =\ 0;}
\DoxyCodeLine{00752\ \ \ \textcolor{comment}{//\ It\ is\ not\ a\ lambda\ for\ compatibility\ with\ C++14.}}
\DoxyCodeLine{00753\ \ \ \textcolor{keyword}{struct\ }count\_code\_points\ \{}
\DoxyCodeLine{00754\ \ \ \ \ \textcolor{keywordtype}{size\_t}*\ count;}
\DoxyCodeLine{00755\ \ \ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator()(uint32\_t\ cp,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}})\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00756\ \ \ \ \ \ \ *count\ +=\ detail::to\_unsigned(}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ 1\ +}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0x1100\ \&\&}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ (cp\ <=\ 0x115f\ ||\ \ \textcolor{comment}{//\ Hangul\ Jamo\ init.\ consonants}}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ cp\ ==\ 0x2329\ ||\ \ \textcolor{comment}{//\ LEFT-\/POINTING\ ANGLE\ BRACKET}}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ cp\ ==\ 0x232a\ ||\ \ \textcolor{comment}{//\ RIGHT-\/POINTING\ ANGLE\ BRACKET}}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ CJK\ ...\ Yi\ except\ IDEOGRAPHIC\ HALF\ FILL\ SPACE:}}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0x2e80\ \&\&\ cp\ <=\ 0xa4cf\ \&\&\ cp\ !=\ 0x303f)\ ||}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0xac00\ \&\&\ cp\ <=\ 0xd7a3)\ ||\ \ \ \ \textcolor{comment}{//\ Hangul\ Syllables}}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0xf900\ \&\&\ cp\ <=\ 0xfaff)\ ||\ \ \ \ \textcolor{comment}{//\ CJK\ Compatibility\ Ideographs}}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0xfe10\ \&\&\ cp\ <=\ 0xfe19)\ ||\ \ \ \ \textcolor{comment}{//\ Vertical\ Forms}}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0xfe30\ \&\&\ cp\ <=\ 0xfe6f)\ ||\ \ \ \ \textcolor{comment}{//\ CJK\ Compatibility\ Forms}}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0xff00\ \&\&\ cp\ <=\ 0xff60)\ ||\ \ \ \ \textcolor{comment}{//\ Fullwidth\ Forms}}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0xffe0\ \&\&\ cp\ <=\ 0xffe6)\ ||\ \ \ \ \textcolor{comment}{//\ Fullwidth\ Forms}}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0x20000\ \&\&\ cp\ <=\ 0x2fffd)\ ||\ \ \textcolor{comment}{//\ CJK}}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0x30000\ \&\&\ cp\ <=\ 0x3fffd)\ ||}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Miscellaneous\ Symbols\ and\ Pictographs\ +\ Emoticons:}}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0x1f300\ \&\&\ cp\ <=\ 0x1f64f)\ ||}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Supplemental\ Symbols\ and\ Pictographs:}}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ (cp\ >=\ 0x1f900\ \&\&\ cp\ <=\ 0x1f9ff))));}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00777\ \ \ \ \ \}}
\DoxyCodeLine{00778\ \ \ \};}
\DoxyCodeLine{00779\ \ \ \textcolor{comment}{//\ We\ could\ avoid\ branches\ by\ using\ utf8\_decode\ directly.}}
\DoxyCodeLine{00780\ \ \ for\_each\_codepoint(s,\ count\_code\_points\{\&num\_code\_points\});}
\DoxyCodeLine{00781\ \ \ \textcolor{keywordflow}{return}\ num\_code\_points;}
\DoxyCodeLine{00782\ \}}
\DoxyCodeLine{00783\ }
\DoxyCodeLine{00784\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ compute\_width(\mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<char8\_type>}}\ s)\ -\/>\ \textcolor{keywordtype}{size\_t}\ \{}
\DoxyCodeLine{00785\ \ \ \textcolor{keywordflow}{return}\ compute\_width(}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__string__view}{string\_view}}(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(s.data()),\ s.size()));}
\DoxyCodeLine{00787\ \}}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{00790\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ code\_point\_index(\mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ s,\ \textcolor{keywordtype}{size\_t}\ n)\ -\/>\ \textcolor{keywordtype}{size\_t}\ \{}
\DoxyCodeLine{00791\ \ \ \textcolor{keywordtype}{size\_t}\ size\ =\ s.size();}
\DoxyCodeLine{00792\ \ \ \textcolor{keywordflow}{return}\ n\ <\ size\ ?\ n\ :\ size;}
\DoxyCodeLine{00793\ \}}
\DoxyCodeLine{00794\ }
\DoxyCodeLine{00795\ \textcolor{comment}{//\ Calculates\ the\ index\ of\ the\ nth\ code\ point\ in\ a\ UTF-\/8\ string.}}
\DoxyCodeLine{00796\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ code\_point\_index(\mbox{\hyperlink{classbasic__string__view}{string\_view}}\ s,\ \textcolor{keywordtype}{size\_t}\ n)\ -\/>\ \textcolor{keywordtype}{size\_t}\ \{}
\DoxyCodeLine{00797\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdata}{data}}\ =\ s.data();}
\DoxyCodeLine{00798\ \ \ \textcolor{keywordtype}{size\_t}\ num\_code\_points\ =\ 0;}
\DoxyCodeLine{00799\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0,\ size\ =\ s.size();\ i\ !=\ size;\ ++i)\ \{}
\DoxyCodeLine{00800\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{structdata}{data}}[i]\ \&\ 0xc0)\ !=\ 0x80\ \&\&\ ++num\_code\_points\ >\ n)\ \textcolor{keywordflow}{return}\ i;}
\DoxyCodeLine{00801\ \ \ \}}
\DoxyCodeLine{00802\ \ \ \textcolor{keywordflow}{return}\ s.size();}
\DoxyCodeLine{00803\ \}}
\DoxyCodeLine{00804\ }
\DoxyCodeLine{00805\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ code\_point\_index(\mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<char8\_type>}}\ s,\ \textcolor{keywordtype}{size\_t}\ n)}
\DoxyCodeLine{00806\ \ \ \ \ -\/>\ \textcolor{keywordtype}{size\_t}\ \{}
\DoxyCodeLine{00807\ \ \ \textcolor{keywordflow}{return}\ code\_point\_index(}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__string__view}{string\_view}}(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(s.data()),\ s.size()),\ n);}
\DoxyCodeLine{00809\ \}}
\DoxyCodeLine{00810\ }
\DoxyCodeLine{00811\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdetail_1_1is__integral}{is\_integral}}\ :\ std::is\_integral<T>\ \{\};}
\DoxyCodeLine{00812\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdetail_1_1is__integral}{is\_integral}}<int128\_opt>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00813\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdetail_1_1is__integral}{is\_integral}}<uint128\_t>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00814\ }
\DoxyCodeLine{00815\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00816\ \textcolor{keyword}{using\ }is\_signed\ =}
\DoxyCodeLine{00817\ \ \ \ \ std::integral\_constant<bool,\ std::numeric\_limits<T>::is\_signed\ ||}
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_same<T,\ int128\_opt>::value>;}
\DoxyCodeLine{00819\ }
\DoxyCodeLine{00820\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00821\ \textcolor{keyword}{using\ }is\_integer\ =}
\DoxyCodeLine{00822\ \ \ \ \ bool\_constant<is\_integral<T>::value\ \&\&\ !std::is\_same<T,\ bool>::value\ \&\&}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_same<T,\ char>::value\ \&\&}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_same<T,\ wchar\_t>::value>;}
\DoxyCodeLine{00825\ }
\DoxyCodeLine{00826\ \textcolor{preprocessor}{\#ifndef\ FMT\_USE\_FLOAT}}
\DoxyCodeLine{00827\ \textcolor{preprocessor}{\#\ \ define\ FMT\_USE\_FLOAT\ 1}}
\DoxyCodeLine{00828\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00829\ \textcolor{preprocessor}{\#ifndef\ FMT\_USE\_DOUBLE}}
\DoxyCodeLine{00830\ \textcolor{preprocessor}{\#\ \ define\ FMT\_USE\_DOUBLE\ 1}}
\DoxyCodeLine{00831\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00832\ \textcolor{preprocessor}{\#ifndef\ FMT\_USE\_LONG\_DOUBLE}}
\DoxyCodeLine{00833\ \textcolor{preprocessor}{\#\ \ define\ FMT\_USE\_LONG\_DOUBLE\ 1}}
\DoxyCodeLine{00834\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00835\ }
\DoxyCodeLine{00836\ \textcolor{preprocessor}{\#ifndef\ FMT\_USE\_FLOAT128}}
\DoxyCodeLine{00837\ \textcolor{preprocessor}{\#\ \ ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{00838\ \textcolor{comment}{//\ Clang\ emulates\ GCC,\ so\ it\ has\ to\ appear\ early.}}
\DoxyCodeLine{00839\ \textcolor{preprocessor}{\#\ \ \ \ if\ FMT\_HAS\_INCLUDE(<quadmath.h>)}}
\DoxyCodeLine{00840\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ FMT\_USE\_FLOAT128\ 1}}
\DoxyCodeLine{00841\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00842\ \textcolor{preprocessor}{\#\ \ elif\ defined(\_\_GNUC\_\_)}}
\DoxyCodeLine{00843\ \textcolor{comment}{//\ GNU\ C++:}}
\DoxyCodeLine{00844\ \textcolor{preprocessor}{\#\ \ \ \ if\ defined(\_GLIBCXX\_USE\_FLOAT128)\ \&\&\ !defined(\_\_STRICT\_ANSI\_\_)}}
\DoxyCodeLine{00845\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ FMT\_USE\_FLOAT128\ 1}}
\DoxyCodeLine{00846\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00847\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00848\ \textcolor{preprocessor}{\#\ \ ifndef\ FMT\_USE\_FLOAT128}}
\DoxyCodeLine{00849\ \textcolor{preprocessor}{\#\ \ \ \ define\ FMT\_USE\_FLOAT128\ 0}}
\DoxyCodeLine{00850\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00851\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00852\ }
\DoxyCodeLine{00853\ \textcolor{preprocessor}{\#if\ FMT\_USE\_FLOAT128}}
\DoxyCodeLine{00854\ \textcolor{keyword}{using\ }float128\ =\ \_\_float128;}
\DoxyCodeLine{00855\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00856\ \textcolor{keyword}{using\ }float128\ =\ void;}
\DoxyCodeLine{00857\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00858\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{using\ }is\_float128\ =\ std::is\_same<T,\ float128>;}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00861\ \textcolor{keyword}{using\ }is\_floating\_point\ =}
\DoxyCodeLine{00862\ \ \ \ \ bool\_constant<std::is\_floating\_point<T>::value\ ||\ is\_float128<T>::value>;}
\DoxyCodeLine{00863\ }
\DoxyCodeLine{00864\ template\ <typename\ T,\ bool\ =\ std::is\_floating\_point<T>::value>}
\DoxyCodeLine{00865\ \textcolor{keyword}{struct\ }is\_fast\_float\ :\ bool\_constant<std::numeric\_limits<T>::is\_iec559\ \&\&}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sizeof(T)\ <=\ sizeof(double)>\ \{\};}
\DoxyCodeLine{00867\ template\ <typename\ T>\ struct\ is\_fast\_float<T,\ false>\ :\ std::false\_type\ \{\};}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ template\ <typename\ T>}
\DoxyCodeLine{00870\ using\ is\_double\_double\ =\ bool\_constant<std::numeric\_limits<T>::digits\ ==\ 106>;}
\DoxyCodeLine{00871\ }
\DoxyCodeLine{00872\ \#ifndef\ FMT\_USE\_FULL\_CACHE\_DRAGONBOX}
\DoxyCodeLine{00873\ \#\ \ define\ FMT\_USE\_FULL\_CACHE\_DRAGONBOX\ 0}
\DoxyCodeLine{00874\ \#endif}
\DoxyCodeLine{00875\ }
\DoxyCodeLine{00876\ template\ <typename\ T>}
\DoxyCodeLine{00877\ template\ <typename\ U>}
\DoxyCodeLine{00878\ void\ buffer<T>::append(const\ U*\ begin,\ const\ U*\ end)\ \{}
\DoxyCodeLine{00879\ \ \ while\ (begin\ !=\ end)\ \{}
\DoxyCodeLine{00880\ \ \ \ \ auto\ count\ =\ to\_unsigned(end\ -\/\ begin);}
\DoxyCodeLine{00881\ \ \ \ \ try\_reserve(size\_\ +\ count);}
\DoxyCodeLine{00882\ \ \ \ \ auto\ free\_cap\ =\ capacity\_\ -\/\ size\_;}
\DoxyCodeLine{00883\ \ \ \ \ if\ (free\_cap\ <\ count)\ count\ =\ free\_cap;}
\DoxyCodeLine{00884\ \ \ \ \ std::uninitialized\_copy\_n(begin,\ count,\ make\_checked(ptr\_\ +\ size\_,\ count));}
\DoxyCodeLine{00885\ \ \ \ \ size\_\ +=\ count;}
\DoxyCodeLine{00886\ \ \ \ \ begin\ +=\ count;}
\DoxyCodeLine{00887\ \ \ \}}
\DoxyCodeLine{00888\ \}}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ template\ <typename\ T,\ typename\ Enable\ =\ void>}
\DoxyCodeLine{00891\ struct\ is\_locale\ :\ std::false\_type\ \{\};}
\DoxyCodeLine{00892\ template\ <typename\ T>}
\DoxyCodeLine{00893\ struct\ is\_locale<T,\ void\_t<decltype(T::classic())>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{00894\ \}\ \ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00895\ }
\DoxyCodeLine{00896\ FMT\_BEGIN\_EXPORT}
\DoxyCodeLine{00897\ }
\DoxyCodeLine{00898\ \textcolor{comment}{//\ The\ number\ of\ characters\ to\ store\ in\ the\ basic\_memory\_buffer\ object\ itself}}
\DoxyCodeLine{00899\ \textcolor{comment}{//\ to\ avoid\ dynamic\ memory\ allocation.}}
\DoxyCodeLine{00900\ enum\ \{\ inline\_buffer\_size\ =\ 500\ \};}
\DoxyCodeLine{00901\ }
\DoxyCodeLine{00923\ template\ <typename\ T,\ size\_t\ SIZE\ =\ inline\_buffer\_size,}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \ \ typename\ Allocator\ =\ std::allocator<T>>}
\DoxyCodeLine{00925\ class\ basic\_memory\_buffer\ final\ :\ public\ detail::buffer<T>\ \{}
\DoxyCodeLine{00926\ \ private:}
\DoxyCodeLine{00927\ \ \ T\ store\_[SIZE];}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \ \ \textcolor{comment}{//\ Don't\ inherit\ from\ Allocator\ avoid\ generating\ type\_info\ for\ it.}}
\DoxyCodeLine{00930\ \ \ Allocator\ alloc\_;}
\DoxyCodeLine{00931\ }
\DoxyCodeLine{00932\ \ \ \textcolor{comment}{//\ Deallocate\ memory\ allocated\ by\ the\ buffer.}}
\DoxyCodeLine{00933\ \ \ FMT\_CONSTEXPR20\ void\ deallocate()\ \{}
\DoxyCodeLine{00934\ \ \ \ \ T*\ data\ =\ this-\/>data();}
\DoxyCodeLine{00935\ \ \ \ \ if\ (data\ !=\ store\_)\ alloc\_.deallocate(data,\ this-\/>capacity());}
\DoxyCodeLine{00936\ \ \ \}}
\DoxyCodeLine{00937\ }
\DoxyCodeLine{00938\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00939\ \ \ FMT\_CONSTEXPR20\ void\ grow(size\_t\ size)\ override\ \{}
\DoxyCodeLine{00940\ \ \ \ \ detail::abort\_fuzzing\_if(size\ >\ 5000);}
\DoxyCodeLine{00941\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ max\_size\ =\ std::allocator\_traits<Allocator>::max\_size(alloc\_);}
\DoxyCodeLine{00942\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ old\_capacity\ =\ this-\/>capacity();}
\DoxyCodeLine{00943\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ new\_capacity\ =\ old\_capacity\ +\ old\_capacity\ /\ 2;}
\DoxyCodeLine{00944\ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ >\ new\_capacity)}
\DoxyCodeLine{00945\ \ \ \ \ \ \ new\_capacity\ =\ size;}
\DoxyCodeLine{00946\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (new\_capacity\ >\ max\_size)}
\DoxyCodeLine{00947\ \ \ \ \ \ \ new\_capacity\ =\ size\ >\ max\_size\ ?\ size\ :\ max\_size;}
\DoxyCodeLine{00948\ \ \ \ \ T*\ old\_data\ =\ this-\/>data();}
\DoxyCodeLine{00949\ \ \ \ \ T*\ new\_data\ =}
\DoxyCodeLine{00950\ \ \ \ \ \ \ \ \ std::allocator\_traits<Allocator>::allocate(alloc\_,\ new\_capacity);}
\DoxyCodeLine{00951\ \ \ \ \ \textcolor{comment}{//\ The\ following\ code\ doesn't\ throw,\ so\ the\ raw\ pointer\ above\ doesn't\ leak.}}
\DoxyCodeLine{00952\ \ \ \ \ std::uninitialized\_copy(old\_data,\ old\_data\ +\ this-\/>size(),}
\DoxyCodeLine{00953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detail::make\_checked(new\_data,\ new\_capacity));}
\DoxyCodeLine{00954\ \ \ \ \ this-\/>set(new\_data,\ new\_capacity);}
\DoxyCodeLine{00955\ \ \ \ \ \textcolor{comment}{//\ deallocate\ must\ not\ throw\ according\ to\ the\ standard,\ but\ even\ if\ it\ does,}}
\DoxyCodeLine{00956\ \ \ \ \ \textcolor{comment}{//\ the\ buffer\ already\ uses\ the\ new\ storage\ and\ will\ deallocate\ it\ in}}
\DoxyCodeLine{00957\ \ \ \ \ \textcolor{comment}{//\ destructor.}}
\DoxyCodeLine{00958\ \ \ \ \ \textcolor{keywordflow}{if}\ (old\_data\ !=\ store\_)\ alloc\_.deallocate(old\_data,\ old\_capacity);}
\DoxyCodeLine{00959\ \ \ \}}
\DoxyCodeLine{00960\ }
\DoxyCodeLine{00961\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00962\ \ \ \textcolor{keyword}{using\ }value\_type\ =\ T;}
\DoxyCodeLine{00963\ \ \ \textcolor{keyword}{using\ }const\_reference\ =\ \textcolor{keyword}{const}\ T\&;}
\DoxyCodeLine{00964\ }
\DoxyCodeLine{00965\ \ \ FMT\_CONSTEXPR20\ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer}}(}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \textcolor{keyword}{const}\ Allocator\&\ alloc\ =\ Allocator())}
\DoxyCodeLine{00967\ \ \ \ \ \ \ :\ alloc\_(alloc)\ \{}
\DoxyCodeLine{00968\ \ \ \ \ this-\/>set(store\_,\ SIZE);}
\DoxyCodeLine{00969\ \ \ \ \ \textcolor{keywordflow}{if}\ (detail::is\_constant\_evaluated())\ detail::fill\_n(store\_,\ SIZE,\ T());}
\DoxyCodeLine{00970\ \ \ \}}
\DoxyCodeLine{00971\ \ \ FMT\_CONSTEXPR20\ \mbox{\hyperlink{classbasic__memory__buffer}{\string~basic\_memory\_buffer}}()\ \{\ deallocate();\ \}}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00974\ \ \ \textcolor{comment}{//\ Move\ data\ from\ other\ to\ this\ buffer.}}
\DoxyCodeLine{00975\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ move(\mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer}}\&\ other)\ \{}
\DoxyCodeLine{00976\ \ \ \ \ alloc\_\ =\ std::move(other.alloc\_);}
\DoxyCodeLine{00977\ \ \ \ \ T*\ \mbox{\hyperlink{structdata}{data}}\ =\ other.\mbox{\hyperlink{classdetail_1_1buffer_aeb33e0a2d2be2bbca9e0236c148089c8}{data}}();}
\DoxyCodeLine{00978\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ size\ =\ other.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}(),\ capacity\ =\ other.\mbox{\hyperlink{classdetail_1_1buffer_ac7ff14268d6b32d3d878291445ff4dd3}{capacity}}();}
\DoxyCodeLine{00979\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structdata}{data}}\ ==\ other.store\_)\ \{}
\DoxyCodeLine{00980\ \ \ \ \ \ \ this-\/>set(store\_,\ capacity);}
\DoxyCodeLine{00981\ \ \ \ \ \ \ detail::copy\_str<T>(other.store\_,\ other.store\_\ +\ size,}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detail::make\_checked(store\_,\ capacity));}
\DoxyCodeLine{00983\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00984\ \ \ \ \ \ \ this-\/>set(\mbox{\hyperlink{structdata}{data}},\ capacity);}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ pointer\ to\ the\ inline\ array\ so\ that\ delete\ is\ not\ called}}
\DoxyCodeLine{00986\ \ \ \ \ \ \ \textcolor{comment}{//\ when\ deallocating.}}
\DoxyCodeLine{00987\ \ \ \ \ \ \ other.\mbox{\hyperlink{classdetail_1_1buffer_a5c82aec716b07079ac88194eb9aa7feb}{set}}(other.store\_,\ 0);}
\DoxyCodeLine{00988\ \ \ \ \ \ \ other.\mbox{\hyperlink{classdetail_1_1buffer_a8174757a0d86698229670044730dc59b}{clear}}();}
\DoxyCodeLine{00989\ \ \ \ \ \}}
\DoxyCodeLine{00990\ \ \ \ \ this-\/>resize(size);}
\DoxyCodeLine{00991\ \ \ \}}
\DoxyCodeLine{00992\ }
\DoxyCodeLine{00993\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01000\ \ \ FMT\_CONSTEXPR20\ \mbox{\hyperlink{classbasic__memory__buffer_ade18cff12fc914085665a07af2e8fb7b}{basic\_memory\_buffer}}(\mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer}}\&\&\ other)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01001\ \ \ \ \ move(other);}
\DoxyCodeLine{01002\ \ \ \}}
\DoxyCodeLine{01003\ }
\DoxyCodeLine{01009\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classbasic__memory__buffer_a20c8cea076154a579ab0a04afb6c1f84}{operator=}}(\mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer}}\&\&\ other)\ \textcolor{keyword}{noexcept}\ -\/>\ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer}}\&\ \{}
\DoxyCodeLine{01010\ \ \ \ \ FMT\_ASSERT(\textcolor{keyword}{this}\ !=\ \&other,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01011\ \ \ \ \ deallocate();}
\DoxyCodeLine{01012\ \ \ \ \ move(other);}
\DoxyCodeLine{01013\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{01014\ \ \ \}}
\DoxyCodeLine{01015\ }
\DoxyCodeLine{01016\ \ \ \textcolor{comment}{//\ Returns\ a\ copy\ of\ the\ allocator\ associated\ with\ this\ buffer.}}
\DoxyCodeLine{01017\ \ \ \textcolor{keyword}{auto}\ get\_allocator()\ const\ -\/>\ Allocator\ \{\ \textcolor{keywordflow}{return}\ alloc\_;\ \}}
\DoxyCodeLine{01018\ }
\DoxyCodeLine{01023\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classbasic__memory__buffer_a153c47788d6d1a76ec97780748755ea1}{resize}}(\textcolor{keywordtype}{size\_t}\ count)\ \{\ this-\/>try\_resize(count);\ \}}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01026\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classbasic__memory__buffer_a27f096451ed4e6738d3a33161fda3e90}{reserve}}(\textcolor{keywordtype}{size\_t}\ new\_capacity)\ \{\ this-\/>try\_reserve(new\_capacity);\ \}}
\DoxyCodeLine{01027\ }
\DoxyCodeLine{01028\ \ \ \textcolor{comment}{//\ Directly\ append\ data\ into\ the\ buffer}}
\DoxyCodeLine{01029\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classdetail_1_1buffer}{detail::buffer}}<T>::append;}
\DoxyCodeLine{01030\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ContiguousRange>}
\DoxyCodeLine{01031\ \ \ \textcolor{keywordtype}{void}\ append(\textcolor{keyword}{const}\ ContiguousRange\&\ range)\ \{}
\DoxyCodeLine{01032\ \ \ \ \ append(range.data(),\ range.data()\ +\ range.size());}
\DoxyCodeLine{01033\ \ \ \}}
\DoxyCodeLine{01034\ \};}
\DoxyCodeLine{01035\ }
\DoxyCodeLine{01036\ \textcolor{keyword}{using\ }\mbox{\hyperlink{classbasic__memory__buffer}{memory\_buffer}}\ =\ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<char>}};}
\DoxyCodeLine{01037\ }
\DoxyCodeLine{01038\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{size\_t}\ SIZE,\ \textcolor{keyword}{typename}\ Allocator>}
\DoxyCodeLine{01039\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structis__contiguous}{is\_contiguous}}<\mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer}}<T,\ SIZE,\ Allocator>>\ :\ std::true\_type\ \{}
\DoxyCodeLine{01040\ \};}
\DoxyCodeLine{01041\ }
\DoxyCodeLine{01042\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{01043\ FMT\_API\ \textcolor{keywordtype}{bool}\ write\_console(std::FILE*\ f,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ text);}
\DoxyCodeLine{01044\ FMT\_API\ \textcolor{keywordtype}{void}\ print(std::FILE*,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}});}
\DoxyCodeLine{01045\ \}\ \ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{01046\ }
\DoxyCodeLine{01047\ \textcolor{comment}{//\ Suppress\ a\ misleading\ warning\ in\ older\ versions\ of\ clang.}}
\DoxyCodeLine{01048\ \textcolor{preprocessor}{\#if\ FMT\_CLANG\_VERSION}}
\DoxyCodeLine{01049\ \textcolor{preprocessor}{\#\ \ pragma\ clang\ diagnostic\ ignored\ "{}-\/Wweak-\/vtables"{}}}
\DoxyCodeLine{01050\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01051\ }
\DoxyCodeLine{01053\ \textcolor{keyword}{class\ }FMT\_API\ \mbox{\hyperlink{classformat__error}{format\_error}}\ :\ \textcolor{keyword}{public}\ std::runtime\_error\ \{}
\DoxyCodeLine{01054\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01055\ \ \ \textcolor{keyword}{using\ }std::runtime\_error::runtime\_error;}
\DoxyCodeLine{01056\ \};}
\DoxyCodeLine{01057\ }
\DoxyCodeLine{01058\ \textcolor{keyword}{namespace\ }detail\_exported\ \{}
\DoxyCodeLine{01059\ \textcolor{preprocessor}{\#if\ FMT\_USE\_NONTYPE\_TEMPLATE\_ARGS}}
\DoxyCodeLine{01060\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ N>\ \textcolor{keyword}{struct\ }fixed\_string\ \{}
\DoxyCodeLine{01061\ \ \ \textcolor{keyword}{constexpr}\ fixed\_string(\textcolor{keyword}{const}\ Char\ (\&str)[N])\ \{}
\DoxyCodeLine{01062\ \ \ \ \ detail::copy\_str<Char,\ const\ Char*,\ Char*>(\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Char*\textcolor{keyword}{>}(str),}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ str\ +\ N,\ \mbox{\hyperlink{structdata}{data}});}
\DoxyCodeLine{01064\ \ \ \}}
\DoxyCodeLine{01065\ \ \ Char\ \mbox{\hyperlink{structdata}{data}}[N]\ =\ \{\};}
\DoxyCodeLine{01066\ \};}
\DoxyCodeLine{01067\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01068\ }
\DoxyCodeLine{01069\ \textcolor{comment}{//\ Converts\ a\ compile-\/time\ string\ to\ basic\_string\_view.}}
\DoxyCodeLine{01070\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{01071\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ compile\_string\_to\_view(\textcolor{keyword}{const}\ Char\ (\&s)[N])}
\DoxyCodeLine{01072\ \ \ \ \ -\/>\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ \{}
\DoxyCodeLine{01073\ \ \ \textcolor{comment}{//\ Remove\ trailing\ NUL\ character\ if\ needed.\ Won't\ be\ present\ if\ this\ is\ used}}
\DoxyCodeLine{01074\ \ \ \textcolor{comment}{//\ with\ a\ raw\ character\ array\ (i.e.\ not\ defined\ as\ a\ string).}}
\DoxyCodeLine{01075\ \ \ \textcolor{keywordflow}{return}\ \{s,\ N\ -\/\ (std::char\_traits<Char>::to\_int\_type(s[N\ -\/\ 1])\ ==\ 0\ ?\ 1\ :\ 0)\};}
\DoxyCodeLine{01076\ \}}
\DoxyCodeLine{01077\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01078\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ compile\_string\_to\_view(\mbox{\hyperlink{structdetail_1_1std__string__view}{detail::std\_string\_view<Char>}}\ s)}
\DoxyCodeLine{01079\ \ \ \ \ -\/>\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ \{}
\DoxyCodeLine{01080\ \ \ \textcolor{keywordflow}{return}\ \{s.data(),\ s.size()\};}
\DoxyCodeLine{01081\ \}}
\DoxyCodeLine{01082\ \}\ \ \textcolor{comment}{//\ namespace\ detail\_exported}}
\DoxyCodeLine{01083\ }
\DoxyCodeLine{01084\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classloc__value}{loc\_value}}\ \{}
\DoxyCodeLine{01085\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01086\ \ \ \mbox{\hyperlink{classbasic__format__arg}{basic\_format\_arg<format\_context>}}\ value\_;}
\DoxyCodeLine{01087\ }
\DoxyCodeLine{01088\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01089\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(!detail::is\_\textcolor{keywordtype}{float}128<T>::value)>}
\DoxyCodeLine{01090\ \ \ \mbox{\hyperlink{classloc__value}{loc\_value}}(T\ value)\ :\ value\_(detail::make\_arg<format\_context>(value))\ \{\}}
\DoxyCodeLine{01091\ }
\DoxyCodeLine{01092\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(detail::is\_\textcolor{keywordtype}{float}128<T>::value)>}
\DoxyCodeLine{01093\ \ \ \mbox{\hyperlink{classloc__value}{loc\_value}}(T)\ \{\}}
\DoxyCodeLine{01094\ }
\DoxyCodeLine{01095\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor>\ \textcolor{keyword}{auto}\ visit(Visitor\&\&\ vis)\ -\/>\ \textcolor{keyword}{decltype}(vis(0))\ \{}
\DoxyCodeLine{01096\ \ \ \ \ \textcolor{keywordflow}{return}\ visit\_format\_arg(vis,\ value\_);}
\DoxyCodeLine{01097\ \ \ \}}
\DoxyCodeLine{01098\ \};}
\DoxyCodeLine{01099\ }
\DoxyCodeLine{01100\ \textcolor{comment}{//\ A\ locale\ facet\ that\ formats\ values\ in\ UTF-\/8.}}
\DoxyCodeLine{01101\ \textcolor{comment}{//\ It\ is\ parameterized\ on\ the\ locale\ to\ avoid\ the\ heavy\ <locale>\ include.}}
\DoxyCodeLine{01102\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Locale>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classformat__facet}{format\_facet}}\ :\ \textcolor{keyword}{public}\ Locale::facet\ \{}
\DoxyCodeLine{01103\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01104\ \ \ std::string\ separator\_;}
\DoxyCodeLine{01105\ \ \ std::string\ grouping\_;}
\DoxyCodeLine{01106\ \ \ std::string\ decimal\_point\_;}
\DoxyCodeLine{01107\ }
\DoxyCodeLine{01108\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01109\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{auto}\ do\_put(\mbox{\hyperlink{classappender}{appender}}\ out,\ \mbox{\hyperlink{classloc__value}{loc\_value}}\ val,}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<>}}\&\ specs)\ \textcolor{keyword}{const}\ -\/>\ bool;}
\DoxyCodeLine{01111\ }
\DoxyCodeLine{01112\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01113\ \ \ \textcolor{keyword}{static}\ FMT\_API\ \textcolor{keyword}{typename}\ Locale::id\ id;}
\DoxyCodeLine{01114\ }
\DoxyCodeLine{01115\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__facet}{format\_facet}}(Locale\&\ loc);}
\DoxyCodeLine{01116\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__facet}{format\_facet}}(\mbox{\hyperlink{classbasic__string__view}{string\_view}}\ sep\ =\ \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::initializer\_list<unsigned\ char>\ g\ =\ \{3\},}
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ decimal\_point\ =\ \textcolor{stringliteral}{"{}."{}})}
\DoxyCodeLine{01119\ \ \ \ \ \ \ :\ separator\_(sep.data(),\ sep.size()),}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ grouping\_(g.begin(),\ g.end()),}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ decimal\_point\_(decimal\_point)\ \{\}}
\DoxyCodeLine{01122\ }
\DoxyCodeLine{01123\ \ \ \textcolor{keyword}{auto}\ put(\mbox{\hyperlink{classappender}{appender}}\ out,\ \mbox{\hyperlink{classloc__value}{loc\_value}}\ val,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<>}}\&\ specs)\ \textcolor{keyword}{const}}
\DoxyCodeLine{01124\ \ \ \ \ \ \ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01125\ \ \ \ \ \textcolor{keywordflow}{return}\ do\_put(out,\ val,\ specs);}
\DoxyCodeLine{01126\ \ \ \}}
\DoxyCodeLine{01127\ \};}
\DoxyCodeLine{01128\ }
\DoxyCodeLine{01129\ FMT\_BEGIN\_DETAIL\_NAMESPACE}
\DoxyCodeLine{01130\ }
\DoxyCodeLine{01131\ \textcolor{comment}{//\ Returns\ true\ if\ value\ is\ negative,\ false\ otherwise.}}
\DoxyCodeLine{01132\ \textcolor{comment}{//\ Same\ as\ `value\ <\ 0`\ but\ doesn't\ produce\ warnings\ if\ T\ is\ an\ unsigned\ type.}}
\DoxyCodeLine{01133\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(is\_\textcolor{keywordtype}{signed}<T>::value)>}
\DoxyCodeLine{01134\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ is\_negative(T\ value)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01135\ \ \ \textcolor{keywordflow}{return}\ value\ <\ 0;}
\DoxyCodeLine{01136\ \}}
\DoxyCodeLine{01137\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(!is\_\textcolor{keywordtype}{signed}<T>::value)>}
\DoxyCodeLine{01138\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ is\_negative(T)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01139\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01140\ \}}
\DoxyCodeLine{01141\ }
\DoxyCodeLine{01142\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01143\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ is\_supported\_floating\_point(T)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01144\ \ \ \textcolor{keywordflow}{if}\ (std::is\_same<T,\ float>())\ \textcolor{keywordflow}{return}\ FMT\_USE\_FLOAT;}
\DoxyCodeLine{01145\ \ \ \textcolor{keywordflow}{if}\ (std::is\_same<T,\ double>())\ \textcolor{keywordflow}{return}\ FMT\_USE\_DOUBLE;}
\DoxyCodeLine{01146\ \ \ \textcolor{keywordflow}{if}\ (std::is\_same<T,\ long\ double>())\ \textcolor{keywordflow}{return}\ FMT\_USE\_LONG\_DOUBLE;}
\DoxyCodeLine{01147\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01148\ \}}
\DoxyCodeLine{01149\ }
\DoxyCodeLine{01150\ \textcolor{comment}{//\ Smallest\ of\ uint32\_t,\ uint64\_t,\ uint128\_t\ that\ is\ large\ enough\ to}}
\DoxyCodeLine{01151\ \textcolor{comment}{//\ represent\ all\ values\ of\ an\ integral\ type\ T.}}
\DoxyCodeLine{01152\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01153\ \textcolor{keyword}{using\ }uint32\_or\_64\_or\_128\_t\ =}
\DoxyCodeLine{01154\ \ \ \ \ conditional\_t<num\_bits<T>()\ <=\ 32\ \&\&\ !FMT\_REDUCE\_INT\_INSTANTIATIONS,}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t,}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conditional\_t<num\_bits<T>()\ <=\ 64,\ uint64\_t,\ uint128\_t>>;}
\DoxyCodeLine{01157\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01158\ \textcolor{keyword}{using\ }uint64\_or\_128\_t\ =\ conditional\_t<num\_bits<T>()\ <=\ 64,\ uint64\_t,\ uint128\_t>;}
\DoxyCodeLine{01159\ }
\DoxyCodeLine{01160\ \textcolor{preprocessor}{\#define\ FMT\_POWERS\_OF\_10(factor)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01161\ \textcolor{preprocessor}{\ \ factor\ *\ 10,\ (factor)*100,\ (factor)*1000,\ (factor)*10000,\ (factor)*100000,\ \(\backslash\)}}
\DoxyCodeLine{01162\ \textcolor{preprocessor}{\ \ \ \ \ \ (factor)*1000000,\ (factor)*10000000,\ (factor)*100000000,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01163\ \textcolor{preprocessor}{\ \ \ \ \ \ (factor)*1000000000}}
\DoxyCodeLine{01164\ }
\DoxyCodeLine{01165\ \textcolor{comment}{//\ Converts\ value\ in\ the\ range\ [0,\ 100)\ to\ a\ string.}}
\DoxyCodeLine{01166\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ digits2(\textcolor{keywordtype}{size\_t}\ value)\ \{}
\DoxyCodeLine{01167\ \ \ \textcolor{comment}{//\ GCC\ generates\ slightly\ better\ code\ when\ value\ is\ pointer-\/size.}}
\DoxyCodeLine{01168\ \ \ \textcolor{keywordflow}{return}\ \&\textcolor{stringliteral}{"{}0001020304050607080910111213141516171819"{}}}
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}2021222324252627282930313233343536373839"{}}}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}4041424344454647484950515253545556575859"{}}}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}6061626364656667686970717273747576777879"{}}}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}8081828384858687888990919293949596979899"{}}[value\ *\ 2];}
\DoxyCodeLine{01173\ \}}
\DoxyCodeLine{01174\ }
\DoxyCodeLine{01175\ \textcolor{comment}{//\ Sign\ is\ a\ template\ parameter\ to\ workaround\ a\ bug\ in\ gcc\ 4.8.}}
\DoxyCodeLine{01176\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ Sign>\ \textcolor{keyword}{constexpr}\ Char\ sign(Sign\ s)\ \{}
\DoxyCodeLine{01177\ \textcolor{preprocessor}{\#if\ !FMT\_GCC\_VERSION\ ||\ FMT\_GCC\_VERSION\ >=\ 604}}
\DoxyCodeLine{01178\ \ \ \textcolor{keyword}{static\_assert}(std::is\_same<Sign,\ sign\_t>::value,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01179\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01180\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{stringliteral}{"{}\(\backslash\)0-\/+\ "{}}[s]);}
\DoxyCodeLine{01181\ \}}
\DoxyCodeLine{01182\ }
\DoxyCodeLine{01183\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ count\_digits\_fallback(T\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01184\ \ \ \textcolor{keywordtype}{int}\ count\ =\ 1;}
\DoxyCodeLine{01185\ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{01186\ \ \ \ \ \textcolor{comment}{//\ Integer\ division\ is\ slow\ so\ do\ it\ for\ a\ group\ of\ four\ digits\ instead}}
\DoxyCodeLine{01187\ \ \ \ \ \textcolor{comment}{//\ of\ for\ every\ digit.\ The\ idea\ comes\ from\ the\ talk\ by\ Alexandrescu}}
\DoxyCodeLine{01188\ \ \ \ \ \textcolor{comment}{//\ "{}Three\ Optimization\ Tips\ for\ C++"{}.\ See\ speed-\/test\ for\ a\ comparison.}}
\DoxyCodeLine{01189\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 10)\ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{01190\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 100)\ \textcolor{keywordflow}{return}\ count\ +\ 1;}
\DoxyCodeLine{01191\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 1000)\ \textcolor{keywordflow}{return}\ count\ +\ 2;}
\DoxyCodeLine{01192\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 10000)\ \textcolor{keywordflow}{return}\ count\ +\ 3;}
\DoxyCodeLine{01193\ \ \ \ \ n\ /=\ 10000u;}
\DoxyCodeLine{01194\ \ \ \ \ count\ +=\ 4;}
\DoxyCodeLine{01195\ \ \ \}}
\DoxyCodeLine{01196\ \}}
\DoxyCodeLine{01197\ \textcolor{preprocessor}{\#if\ FMT\_USE\_INT128}}
\DoxyCodeLine{01198\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ count\_digits(uint128\_opt\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01199\ \ \ \textcolor{keywordflow}{return}\ count\_digits\_fallback(n);}
\DoxyCodeLine{01200\ \}}
\DoxyCodeLine{01201\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01202\ }
\DoxyCodeLine{01203\ \textcolor{preprocessor}{\#ifdef\ FMT\_BUILTIN\_CLZLL}}
\DoxyCodeLine{01204\ \textcolor{comment}{//\ It\ is\ a\ separate\ function\ rather\ than\ a\ part\ of\ count\_digits\ to\ workaround}}
\DoxyCodeLine{01205\ \textcolor{comment}{//\ the\ lack\ of\ static\ constexpr\ in\ constexpr\ functions.}}
\DoxyCodeLine{01206\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ do\_count\_digits(uint64\_t\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01207\ \ \ \textcolor{comment}{//\ This\ has\ comparable\ performance\ to\ the\ version\ by\ Kendall\ Willets}}
\DoxyCodeLine{01208\ \ \ \textcolor{comment}{//\ (https://github.com/fmtlib/format-\/benchmark/blob/master/digits10)}}
\DoxyCodeLine{01209\ \ \ \textcolor{comment}{//\ but\ uses\ smaller\ tables.}}
\DoxyCodeLine{01210\ \ \ \textcolor{comment}{//\ Maps\ bsr(n)\ to\ ceil(log10(pow(2,\ bsr(n)\ +\ 1)\ -\/\ 1)).}}
\DoxyCodeLine{01211\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint8\_t\ bsr2log10[]\ =\ \{}
\DoxyCodeLine{01212\ \ \ \ \ \ \ 1,\ \ 1,\ \ 1,\ \ 2,\ \ 2,\ \ 2,\ \ 3,\ \ 3,\ \ 3,\ \ 4,\ \ 4,\ \ 4,\ \ 4,\ \ 5,\ \ 5,\ \ 5,}
\DoxyCodeLine{01213\ \ \ \ \ \ \ 6,\ \ 6,\ \ 6,\ \ 7,\ \ 7,\ \ 7,\ \ 7,\ \ 8,\ \ 8,\ \ 8,\ \ 9,\ \ 9,\ \ 9,\ \ 10,\ 10,\ 10,}
\DoxyCodeLine{01214\ \ \ \ \ \ \ 10,\ 11,\ 11,\ 11,\ 12,\ 12,\ 12,\ 13,\ 13,\ 13,\ 13,\ 14,\ 14,\ 14,\ 15,\ 15,}
\DoxyCodeLine{01215\ \ \ \ \ \ \ 15,\ 16,\ 16,\ 16,\ 16,\ 17,\ 17,\ 17,\ 18,\ 18,\ 18,\ 19,\ 19,\ 19,\ 19,\ 20\};}
\DoxyCodeLine{01216\ \ \ \textcolor{keyword}{auto}\ t\ =\ bsr2log10[FMT\_BUILTIN\_CLZLL(n\ |\ 1)\ \string^\ 63];}
\DoxyCodeLine{01217\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ uint64\_t\ zero\_or\_powers\_of\_10[]\ =\ \{}
\DoxyCodeLine{01218\ \ \ \ \ \ \ 0,\ 0,\ FMT\_POWERS\_OF\_10(1U),\ FMT\_POWERS\_OF\_10(1000000000ULL),}
\DoxyCodeLine{01219\ \ \ \ \ \ \ 10000000000000000000ULL\};}
\DoxyCodeLine{01220\ \ \ \textcolor{keywordflow}{return}\ t\ -\/\ (n\ <\ zero\_or\_powers\_of\_10[t]);}
\DoxyCodeLine{01221\ \}}
\DoxyCodeLine{01222\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01223\ }
\DoxyCodeLine{01224\ \textcolor{comment}{//\ Returns\ the\ number\ of\ decimal\ digits\ in\ n.\ Leading\ zeros\ are\ not\ counted}}
\DoxyCodeLine{01225\ \textcolor{comment}{//\ except\ for\ n\ ==\ 0\ in\ which\ case\ count\_digits\ returns\ 1.}}
\DoxyCodeLine{01226\ FMT\_CONSTEXPR20\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ count\_digits(uint64\_t\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01227\ \textcolor{preprocessor}{\#ifdef\ FMT\_BUILTIN\_CLZLL}}
\DoxyCodeLine{01228\ \ \ \textcolor{keywordflow}{if}\ (!is\_constant\_evaluated())\ \{}
\DoxyCodeLine{01229\ \ \ \ \ \textcolor{keywordflow}{return}\ do\_count\_digits(n);}
\DoxyCodeLine{01230\ \ \ \}}
\DoxyCodeLine{01231\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01232\ \ \ \textcolor{keywordflow}{return}\ count\_digits\_fallback(n);}
\DoxyCodeLine{01233\ \}}
\DoxyCodeLine{01234\ }
\DoxyCodeLine{01235\ \textcolor{comment}{//\ Counts\ the\ number\ of\ digits\ in\ n.\ BITS\ =\ log2(radix).}}
\DoxyCodeLine{01236\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ BITS,\ \textcolor{keyword}{typename}\ UInt>}
\DoxyCodeLine{01237\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ count\_digits(UInt\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01238\ \textcolor{preprocessor}{\#ifdef\ FMT\_BUILTIN\_CLZ}}
\DoxyCodeLine{01239\ \ \ \textcolor{keywordflow}{if}\ (!is\_constant\_evaluated()\ \&\&\ num\_bits<UInt>()\ ==\ 32)}
\DoxyCodeLine{01240\ \ \ \ \ \textcolor{keywordflow}{return}\ (FMT\_BUILTIN\_CLZ(\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(n)\ |\ 1)\ \string^\ 31)\ /\ BITS\ +\ 1;}
\DoxyCodeLine{01241\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01242\ \ \ \textcolor{comment}{//\ Lambda\ avoids\ unreachable\ code\ warnings\ from\ NVHPC.}}
\DoxyCodeLine{01243\ \ \ \textcolor{keywordflow}{return}\ [](UInt\ m)\ \{}
\DoxyCodeLine{01244\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_digits\ =\ 0;}
\DoxyCodeLine{01245\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{01246\ \ \ \ \ \ \ ++num\_digits;}
\DoxyCodeLine{01247\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ ((m\ >>=\ BITS)\ !=\ 0);}
\DoxyCodeLine{01248\ \ \ \ \ \textcolor{keywordflow}{return}\ num\_digits;}
\DoxyCodeLine{01249\ \ \ \}(n);}
\DoxyCodeLine{01250\ \}}
\DoxyCodeLine{01251\ }
\DoxyCodeLine{01252\ \textcolor{preprocessor}{\#ifdef\ FMT\_BUILTIN\_CLZ}}
\DoxyCodeLine{01253\ \textcolor{comment}{//\ It\ is\ a\ separate\ function\ rather\ than\ a\ part\ of\ count\_digits\ to\ workaround}}
\DoxyCodeLine{01254\ \textcolor{comment}{//\ the\ lack\ of\ static\ constexpr\ in\ constexpr\ functions.}}
\DoxyCodeLine{01255\ FMT\_INLINE\ \textcolor{keyword}{auto}\ do\_count\_digits(uint32\_t\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01256\ \textcolor{comment}{//\ An\ optimization\ by\ Kendall\ Willets\ from\ https://bit.ly/3uOIQrB.}}
\DoxyCodeLine{01257\ \textcolor{comment}{//\ This\ increments\ the\ upper\ 32\ bits\ (log10(T)\ -\/\ 1)\ when\ >=\ T\ is\ added.}}
\DoxyCodeLine{01258\ \textcolor{preprocessor}{\#\ \ define\ FMT\_INC(T)\ (((sizeof(\#\ \ T)\ -\/\ 1ull)\ <<\ 32)\ -\/\ T)}}
\DoxyCodeLine{01259\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ table[]\ =\ \{}
\DoxyCodeLine{01260\ \ \ \ \ \ \ FMT\_INC(0),\ \ \ \ \ \ \ \ \ \ FMT\_INC(0),\ \ \ \ \ \ \ \ \ \ FMT\_INC(0),\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 8}}
\DoxyCodeLine{01261\ \ \ \ \ \ \ FMT\_INC(10),\ \ \ \ \ \ \ \ \ FMT\_INC(10),\ \ \ \ \ \ \ \ \ FMT\_INC(10),\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 64}}
\DoxyCodeLine{01262\ \ \ \ \ \ \ FMT\_INC(100),\ \ \ \ \ \ \ \ FMT\_INC(100),\ \ \ \ \ \ \ \ FMT\_INC(100),\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 512}}
\DoxyCodeLine{01263\ \ \ \ \ \ \ FMT\_INC(1000),\ \ \ \ \ \ \ FMT\_INC(1000),\ \ \ \ \ \ \ FMT\_INC(1000),\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 4096}}
\DoxyCodeLine{01264\ \ \ \ \ \ \ FMT\_INC(10000),\ \ \ \ \ \ FMT\_INC(10000),\ \ \ \ \ \ FMT\_INC(10000),\ \ \ \ \ \ \ \textcolor{comment}{//\ 32k}}
\DoxyCodeLine{01265\ \ \ \ \ \ \ FMT\_INC(100000),\ \ \ \ \ FMT\_INC(100000),\ \ \ \ \ FMT\_INC(100000),\ \ \ \ \ \ \textcolor{comment}{//\ 256k}}
\DoxyCodeLine{01266\ \ \ \ \ \ \ FMT\_INC(1000000),\ \ \ \ FMT\_INC(1000000),\ \ \ \ FMT\_INC(1000000),\ \ \ \ \ \textcolor{comment}{//\ 2048k}}
\DoxyCodeLine{01267\ \ \ \ \ \ \ FMT\_INC(10000000),\ \ \ FMT\_INC(10000000),\ \ \ FMT\_INC(10000000),\ \ \ \ \textcolor{comment}{//\ 16M}}
\DoxyCodeLine{01268\ \ \ \ \ \ \ FMT\_INC(100000000),\ \ FMT\_INC(100000000),\ \ FMT\_INC(100000000),\ \ \ \textcolor{comment}{//\ 128M}}
\DoxyCodeLine{01269\ \ \ \ \ \ \ FMT\_INC(1000000000),\ FMT\_INC(1000000000),\ FMT\_INC(1000000000),\ \ \textcolor{comment}{//\ 1024M}}
\DoxyCodeLine{01270\ \ \ \ \ \ \ FMT\_INC(1000000000),\ FMT\_INC(1000000000)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 4B}}
\DoxyCodeLine{01271\ \ \ \};}
\DoxyCodeLine{01272\ \ \ \textcolor{keyword}{auto}\ inc\ =\ table[FMT\_BUILTIN\_CLZ(n\ |\ 1)\ \string^\ 31];}
\DoxyCodeLine{01273\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}((n\ +\ inc)\ >>\ 32);}
\DoxyCodeLine{01274\ \}}
\DoxyCodeLine{01275\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01276\ }
\DoxyCodeLine{01277\ \textcolor{comment}{//\ Optional\ version\ of\ count\_digits\ for\ better\ performance\ on\ 32-\/bit\ platforms.}}
\DoxyCodeLine{01278\ FMT\_CONSTEXPR20\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ count\_digits(uint32\_t\ n)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01279\ \textcolor{preprocessor}{\#ifdef\ FMT\_BUILTIN\_CLZ}}
\DoxyCodeLine{01280\ \ \ \textcolor{keywordflow}{if}\ (!is\_constant\_evaluated())\ \{}
\DoxyCodeLine{01281\ \ \ \ \ \textcolor{keywordflow}{return}\ do\_count\_digits(n);}
\DoxyCodeLine{01282\ \ \ \}}
\DoxyCodeLine{01283\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01284\ \ \ \textcolor{keywordflow}{return}\ count\_digits\_fallback(n);}
\DoxyCodeLine{01285\ \}}
\DoxyCodeLine{01286\ }
\DoxyCodeLine{01287\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Int>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ digits10()\ noexcept\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01288\ \ \ \textcolor{keywordflow}{return}\ std::numeric\_limits<Int>::digits10;}
\DoxyCodeLine{01289\ \}}
\DoxyCodeLine{01290\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ digits10<int128\_opt>()\ noexcept\ -\/>\ \textcolor{keywordtype}{int}\ \{\ \textcolor{keywordflow}{return}\ 38;\ \}}
\DoxyCodeLine{01291\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ digits10<uint128\_t>()\ noexcept\ -\/>\ \textcolor{keywordtype}{int}\ \{\ \textcolor{keywordflow}{return}\ 38;\ \}}
\DoxyCodeLine{01292\ }
\DoxyCodeLine{01293\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structthousands__sep__result}{thousands\_sep\_result}}\ \{}
\DoxyCodeLine{01294\ \ \ std::string\ grouping;}
\DoxyCodeLine{01295\ \ \ Char\ thousands\_sep;}
\DoxyCodeLine{01296\ \};}
\DoxyCodeLine{01297\ }
\DoxyCodeLine{01298\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01299\ FMT\_API\ \textcolor{keyword}{auto}\ thousands\_sep\_impl(locale\_ref\ loc)\ -\/>\ \mbox{\hyperlink{structthousands__sep__result}{thousands\_sep\_result<Char>}};}
\DoxyCodeLine{01300\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01301\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ thousands\_sep(locale\_ref\ loc)\ -\/>\ \mbox{\hyperlink{structthousands__sep__result}{thousands\_sep\_result<Char>}}\ \{}
\DoxyCodeLine{01302\ \ \ \textcolor{keyword}{auto}\ result\ =\ thousands\_sep\_impl<char>(loc);}
\DoxyCodeLine{01303\ \ \ \textcolor{keywordflow}{return}\ \{result.grouping,\ Char(result.thousands\_sep)\};}
\DoxyCodeLine{01304\ \}}
\DoxyCodeLine{01305\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{01306\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ thousands\_sep(locale\_ref\ loc)\ -\/>\ \mbox{\hyperlink{structthousands__sep__result}{thousands\_sep\_result<wchar\_t>}}\ \{}
\DoxyCodeLine{01307\ \ \ \textcolor{keywordflow}{return}\ thousands\_sep\_impl<wchar\_t>(loc);}
\DoxyCodeLine{01308\ \}}
\DoxyCodeLine{01309\ }
\DoxyCodeLine{01310\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01311\ FMT\_API\ \textcolor{keyword}{auto}\ decimal\_point\_impl(locale\_ref\ loc)\ -\/>\ Char;}
\DoxyCodeLine{01312\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ decimal\_point(locale\_ref\ loc)\ -\/>\ Char\ \{}
\DoxyCodeLine{01313\ \ \ \textcolor{keywordflow}{return}\ Char(decimal\_point\_impl<char>(loc));}
\DoxyCodeLine{01314\ \}}
\DoxyCodeLine{01315\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ decimal\_point(locale\_ref\ loc)\ -\/>\ \textcolor{keywordtype}{wchar\_t}\ \{}
\DoxyCodeLine{01316\ \ \ \textcolor{keywordflow}{return}\ decimal\_point\_impl<wchar\_t>(loc);}
\DoxyCodeLine{01317\ \}}
\DoxyCodeLine{01318\ }
\DoxyCodeLine{01319\ \textcolor{comment}{//\ Compares\ two\ characters\ for\ equality.}}
\DoxyCodeLine{01320\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{auto}\ equal2(\textcolor{keyword}{const}\ Char*\ lhs,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ rhs)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01321\ \ \ \textcolor{keywordflow}{return}\ lhs[0]\ ==\ Char(rhs[0])\ \&\&\ lhs[1]\ ==\ Char(rhs[1]);}
\DoxyCodeLine{01322\ \}}
\DoxyCodeLine{01323\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ equal2(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ lhs,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ rhs)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01324\ \ \ \textcolor{keywordflow}{return}\ memcmp(lhs,\ rhs,\ 2)\ ==\ 0;}
\DoxyCodeLine{01325\ \}}
\DoxyCodeLine{01326\ }
\DoxyCodeLine{01327\ \textcolor{comment}{//\ Copies\ two\ characters\ from\ src\ to\ dst.}}
\DoxyCodeLine{01328\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01329\ FMT\_CONSTEXPR20\ FMT\_INLINE\ \textcolor{keywordtype}{void}\ copy2(Char*\ dst,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ src)\ \{}
\DoxyCodeLine{01330\ \ \ \textcolor{keywordflow}{if}\ (!is\_constant\_evaluated()\ \&\&\ \textcolor{keyword}{sizeof}(Char)\ ==\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}))\ \{}
\DoxyCodeLine{01331\ \ \ \ \ memcpy(dst,\ src,\ 2);}
\DoxyCodeLine{01332\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01333\ \ \ \}}
\DoxyCodeLine{01334\ \ \ *dst++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(*src++);}
\DoxyCodeLine{01335\ \ \ *dst\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(*src);}
\DoxyCodeLine{01336\ \}}
\DoxyCodeLine{01337\ }
\DoxyCodeLine{01338\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformat__decimal__result}{format\_decimal\_result}}\ \{}
\DoxyCodeLine{01339\ \ \ Iterator\ begin;}
\DoxyCodeLine{01340\ \ \ Iterator\ end;}
\DoxyCodeLine{01341\ \};}
\DoxyCodeLine{01342\ }
\DoxyCodeLine{01343\ \textcolor{comment}{//\ Formats\ a\ decimal\ unsigned\ integer\ value\ writing\ into\ out\ pointing\ to\ a}}
\DoxyCodeLine{01344\ \textcolor{comment}{//\ buffer\ of\ specified\ size.\ The\ caller\ must\ ensure\ that\ the\ buffer\ is\ large}}
\DoxyCodeLine{01345\ \textcolor{comment}{//\ enough.}}
\DoxyCodeLine{01346\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ UInt>}
\DoxyCodeLine{01347\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ format\_decimal(Char*\ out,\ UInt\ value,\ \textcolor{keywordtype}{int}\ size)}
\DoxyCodeLine{01348\ \ \ \ \ -\/>\ \mbox{\hyperlink{structformat__decimal__result}{format\_decimal\_result<Char*>}}\ \{}
\DoxyCodeLine{01349\ \ \ FMT\_ASSERT(size\ >=\ count\_digits(value),\ \textcolor{stringliteral}{"{}invalid\ digit\ count"{}});}
\DoxyCodeLine{01350\ \ \ out\ +=\ size;}
\DoxyCodeLine{01351\ \ \ Char*\ end\ =\ out;}
\DoxyCodeLine{01352\ \ \ \textcolor{keywordflow}{while}\ (value\ >=\ 100)\ \{}
\DoxyCodeLine{01353\ \ \ \ \ \textcolor{comment}{//\ Integer\ division\ is\ slow\ so\ do\ it\ for\ a\ group\ of\ two\ digits\ instead}}
\DoxyCodeLine{01354\ \ \ \ \ \textcolor{comment}{//\ of\ for\ every\ digit.\ The\ idea\ comes\ from\ the\ talk\ by\ Alexandrescu}}
\DoxyCodeLine{01355\ \ \ \ \ \textcolor{comment}{//\ "{}Three\ Optimization\ Tips\ for\ C++"{}.\ See\ speed-\/test\ for\ a\ comparison.}}
\DoxyCodeLine{01356\ \ \ \ \ out\ -\/=\ 2;}
\DoxyCodeLine{01357\ \ \ \ \ copy2(out,\ digits2(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(value\ \%\ 100)));}
\DoxyCodeLine{01358\ \ \ \ \ value\ /=\ 100;}
\DoxyCodeLine{01359\ \ \ \}}
\DoxyCodeLine{01360\ \ \ \textcolor{keywordflow}{if}\ (value\ <\ 10)\ \{}
\DoxyCodeLine{01361\ \ \ \ \ *-\/-\/out\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ value);}
\DoxyCodeLine{01362\ \ \ \ \ \textcolor{keywordflow}{return}\ \{out,\ end\};}
\DoxyCodeLine{01363\ \ \ \}}
\DoxyCodeLine{01364\ \ \ out\ -\/=\ 2;}
\DoxyCodeLine{01365\ \ \ copy2(out,\ digits2(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(value)));}
\DoxyCodeLine{01366\ \ \ \textcolor{keywordflow}{return}\ \{out,\ end\};}
\DoxyCodeLine{01367\ \}}
\DoxyCodeLine{01368\ }
\DoxyCodeLine{01369\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ UInt,\ \textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(!std::is\_pointer<remove\_cvref\_t<Iterator>>::value)>}
\DoxyCodeLine{01371\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ format\_decimal(Iterator\ out,\ UInt\ value,\ \textcolor{keywordtype}{int}\ size)}
\DoxyCodeLine{01372\ \ \ \ \ -\/>\ \mbox{\hyperlink{structformat__decimal__result}{format\_decimal\_result<Iterator>}}\ \{}
\DoxyCodeLine{01373\ \ \ \textcolor{comment}{//\ Buffer\ is\ large\ enough\ to\ hold\ all\ digits\ (digits10\ +\ 1).}}
\DoxyCodeLine{01374\ \ \ Char\ buffer[digits10<UInt>()\ +\ 1]\ =\ \{\};}
\DoxyCodeLine{01375\ \ \ \textcolor{keyword}{auto}\ end\ =\ format\_decimal(buffer,\ value,\ size).end;}
\DoxyCodeLine{01376\ \ \ \textcolor{keywordflow}{return}\ \{out,\ detail::copy\_str\_noinline<Char>(buffer,\ end,\ out)\};}
\DoxyCodeLine{01377\ \}}
\DoxyCodeLine{01378\ }
\DoxyCodeLine{01379\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{unsigned}\ BASE\_BITS,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ UInt>}
\DoxyCodeLine{01380\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ format\_uint(Char*\ buffer,\ UInt\ value,\ \textcolor{keywordtype}{int}\ num\_digits,}
\DoxyCodeLine{01381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ upper\ =\ \textcolor{keyword}{false})\ -\/>\ Char*\ \{}
\DoxyCodeLine{01382\ \ \ buffer\ +=\ num\_digits;}
\DoxyCodeLine{01383\ \ \ Char*\ end\ =\ buffer;}
\DoxyCodeLine{01384\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{01385\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ digits\ =\ upper\ ?\ \textcolor{stringliteral}{"{}0123456789ABCDEF"{}}\ :\ \textcolor{stringliteral}{"{}0123456789abcdef"{}};}
\DoxyCodeLine{01386\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ digit\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(value\ \&\ ((1\ <<\ BASE\_BITS)\ -\/\ 1));}
\DoxyCodeLine{01387\ \ \ \ \ *-\/-\/buffer\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(BASE\_BITS\ <\ 4\ ?\ static\_cast<char>(\textcolor{charliteral}{'0'}\ +\ digit)}
\DoxyCodeLine{01388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ digits[digit]);}
\DoxyCodeLine{01389\ \ \ \}\ \textcolor{keywordflow}{while}\ ((value\ >>=\ BASE\_BITS)\ !=\ 0);}
\DoxyCodeLine{01390\ \ \ \textcolor{keywordflow}{return}\ end;}
\DoxyCodeLine{01391\ \}}
\DoxyCodeLine{01392\ }
\DoxyCodeLine{01393\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{unsigned}\ BASE\_BITS,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ It,\ \textcolor{keyword}{typename}\ UInt>}
\DoxyCodeLine{01394\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ format\_uint(It\ out,\ UInt\ value,\ \textcolor{keywordtype}{int}\ num\_digits,\ \textcolor{keywordtype}{bool}\ upper\ =\ \textcolor{keyword}{false})}
\DoxyCodeLine{01395\ \ \ \ \ -\/>\ It\ \{}
\DoxyCodeLine{01396\ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ ptr\ =\ to\_pointer<Char>(out,\ to\_unsigned(num\_digits)))\ \{}
\DoxyCodeLine{01397\ \ \ \ \ format\_uint<BASE\_BITS>(ptr,\ value,\ num\_digits,\ upper);}
\DoxyCodeLine{01398\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{01399\ \ \ \}}
\DoxyCodeLine{01400\ \ \ \textcolor{comment}{//\ Buffer\ should\ be\ large\ enough\ to\ hold\ all\ digits\ (digits\ /\ BASE\_BITS\ +\ 1).}}
\DoxyCodeLine{01401\ \ \ \textcolor{keywordtype}{char}\ buffer[num\_bits<UInt>()\ /\ BASE\_BITS\ +\ 1];}
\DoxyCodeLine{01402\ \ \ format\_uint<BASE\_BITS>(buffer,\ value,\ num\_digits,\ upper);}
\DoxyCodeLine{01403\ \ \ \textcolor{keywordflow}{return}\ detail::copy\_str\_noinline<Char>(buffer,\ buffer\ +\ num\_digits,\ out);}
\DoxyCodeLine{01404\ \}}
\DoxyCodeLine{01405\ }
\DoxyCodeLine{01406\ \textcolor{comment}{//\ A\ converter\ from\ UTF-\/8\ to\ UTF-\/16.}}
\DoxyCodeLine{01407\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classutf8__to__utf16}{utf8\_to\_utf16}}\ \{}
\DoxyCodeLine{01408\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01409\ \ \ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<wchar\_t>}}\ buffer\_;}
\DoxyCodeLine{01410\ }
\DoxyCodeLine{01411\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01412\ \ \ FMT\_API\ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classutf8__to__utf16}{utf8\_to\_utf16}}(\mbox{\hyperlink{classbasic__string__view}{string\_view}}\ s);}
\DoxyCodeLine{01413\ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<wchar\_t>}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \{\&buffer\_[0],\ size()\};\ \}}
\DoxyCodeLine{01414\ \ \ \textcolor{keyword}{auto}\ size()\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keywordtype}{size\_t}\ \{\ \textcolor{keywordflow}{return}\ buffer\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}()\ -\/\ 1;\ \}}
\DoxyCodeLine{01415\ \ \ \textcolor{keyword}{auto}\ c\_str()\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ \{\ \textcolor{keywordflow}{return}\ \&buffer\_[0];\ \}}
\DoxyCodeLine{01416\ \ \ \textcolor{keyword}{auto}\ str()\ \textcolor{keyword}{const}\ -\/>\ std::wstring\ \{\ \textcolor{keywordflow}{return}\ \{\&buffer\_[0],\ size()\};\ \}}
\DoxyCodeLine{01417\ \};}
\DoxyCodeLine{01418\ }
\DoxyCodeLine{01419\ \textcolor{comment}{//\ Computes\ 128-\/bit\ result\ of\ multiplication\ of\ two\ 64-\/bit\ unsigned\ integers.}}
\DoxyCodeLine{01420\ \textcolor{keyword}{inline}\ uint128\_fallback\ umul128(uint64\_t\ x,\ uint64\_t\ y)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01421\ \textcolor{preprocessor}{\#if\ FMT\_USE\_INT128}}
\DoxyCodeLine{01422\ \ \ \textcolor{keyword}{auto}\ p\ =\ \textcolor{keyword}{static\_cast<}uint128\_opt\textcolor{keyword}{>}(x)\ *\ \textcolor{keyword}{static\_cast<}uint128\_opt\textcolor{keyword}{>}(y);}
\DoxyCodeLine{01423\ \ \ \textcolor{keywordflow}{return}\ \{\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(p\ >>\ 64),\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(p)\};}
\DoxyCodeLine{01424\ \textcolor{preprocessor}{\#elif\ defined(\_MSC\_VER)\ \&\&\ defined(\_M\_X64)}}
\DoxyCodeLine{01425\ \ \ \textcolor{keyword}{auto}\ result\ =\ uint128\_fallback();}
\DoxyCodeLine{01426\ \ \ result.lo\_\ =\ \_umul128(x,\ y,\ \&result.hi\_);}
\DoxyCodeLine{01427\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{01428\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01429\ \ \ \textcolor{keyword}{const}\ uint64\_t\ mask\ =\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(max\_value<uint32\_t>());}
\DoxyCodeLine{01430\ }
\DoxyCodeLine{01431\ \ \ uint64\_t\ a\ =\ x\ >>\ 32;}
\DoxyCodeLine{01432\ \ \ uint64\_t\ b\ =\ x\ \&\ mask;}
\DoxyCodeLine{01433\ \ \ uint64\_t\ c\ =\ y\ >>\ 32;}
\DoxyCodeLine{01434\ \ \ uint64\_t\ d\ =\ y\ \&\ mask;}
\DoxyCodeLine{01435\ }
\DoxyCodeLine{01436\ \ \ uint64\_t\ ac\ =\ a\ *\ c;}
\DoxyCodeLine{01437\ \ \ uint64\_t\ bc\ =\ b\ *\ c;}
\DoxyCodeLine{01438\ \ \ uint64\_t\ ad\ =\ a\ *\ d;}
\DoxyCodeLine{01439\ \ \ uint64\_t\ bd\ =\ b\ *\ d;}
\DoxyCodeLine{01440\ }
\DoxyCodeLine{01441\ \ \ uint64\_t\ intermediate\ =\ (bd\ >>\ 32)\ +\ (ad\ \&\ mask)\ +\ (bc\ \&\ mask);}
\DoxyCodeLine{01442\ }
\DoxyCodeLine{01443\ \ \ \textcolor{keywordflow}{return}\ \{ac\ +\ (intermediate\ >>\ 32)\ +\ (ad\ >>\ 32)\ +\ (bc\ >>\ 32),}
\DoxyCodeLine{01444\ \ \ \ \ \ \ \ \ \ \ (intermediate\ <<\ 32)\ +\ (bd\ \&\ mask)\};}
\DoxyCodeLine{01445\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01446\ \}}
\DoxyCodeLine{01447\ }
\DoxyCodeLine{01448\ \textcolor{keyword}{namespace\ }dragonbox\ \{}
\DoxyCodeLine{01449\ \textcolor{comment}{//\ Computes\ floor(log10(pow(2,\ e)))\ for\ e\ in\ [-\/2620,\ 2620]\ using\ the\ method\ from}}
\DoxyCodeLine{01450\ \textcolor{comment}{//\ https://fmt.dev/papers/Dragonbox.pdf\#page=28,\ section\ 6.1.}}
\DoxyCodeLine{01451\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ floor\_log10\_pow2(\textcolor{keywordtype}{int}\ e)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01452\ \ \ FMT\_ASSERT(e\ <=\ 2620\ \&\&\ e\ >=\ -\/2620,\ \textcolor{stringliteral}{"{}too\ large\ exponent"{}});}
\DoxyCodeLine{01453\ \ \ \textcolor{keyword}{static\_assert}((-\/1\ >>\ 1)\ ==\ -\/1,\ \textcolor{stringliteral}{"{}right\ shift\ is\ not\ arithmetic"{}});}
\DoxyCodeLine{01454\ \ \ \textcolor{keywordflow}{return}\ (e\ *\ 315653)\ >>\ 20;}
\DoxyCodeLine{01455\ \}}
\DoxyCodeLine{01456\ }
\DoxyCodeLine{01457\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ floor\_log2\_pow10(\textcolor{keywordtype}{int}\ e)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01458\ \ \ FMT\_ASSERT(e\ <=\ 1233\ \&\&\ e\ >=\ -\/1233,\ \textcolor{stringliteral}{"{}too\ large\ exponent"{}});}
\DoxyCodeLine{01459\ \ \ \textcolor{keywordflow}{return}\ (e\ *\ 1741647)\ >>\ 19;}
\DoxyCodeLine{01460\ \}}
\DoxyCodeLine{01461\ }
\DoxyCodeLine{01462\ \textcolor{comment}{//\ Computes\ upper\ 64\ bits\ of\ multiplication\ of\ two\ 64-\/bit\ unsigned\ integers.}}
\DoxyCodeLine{01463\ \textcolor{keyword}{inline}\ uint64\_t\ umul128\_upper64(uint64\_t\ x,\ uint64\_t\ y)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01464\ \textcolor{preprocessor}{\#if\ FMT\_USE\_INT128}}
\DoxyCodeLine{01465\ \ \ \textcolor{keyword}{auto}\ p\ =\ \textcolor{keyword}{static\_cast<}uint128\_opt\textcolor{keyword}{>}(x)\ *\ \textcolor{keyword}{static\_cast<}uint128\_opt\textcolor{keyword}{>}(y);}
\DoxyCodeLine{01466\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(p\ >>\ 64);}
\DoxyCodeLine{01467\ \textcolor{preprocessor}{\#elif\ defined(\_MSC\_VER)\ \&\&\ defined(\_M\_X64)}}
\DoxyCodeLine{01468\ \ \ \textcolor{keywordflow}{return}\ \_\_umulh(x,\ y);}
\DoxyCodeLine{01469\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01470\ \ \ \textcolor{keywordflow}{return}\ umul128(x,\ y).high();}
\DoxyCodeLine{01471\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01472\ \}}
\DoxyCodeLine{01473\ }
\DoxyCodeLine{01474\ \textcolor{comment}{//\ Computes\ upper\ 128\ bits\ of\ multiplication\ of\ a\ 64-\/bit\ unsigned\ integer\ and\ a}}
\DoxyCodeLine{01475\ \textcolor{comment}{//\ 128-\/bit\ unsigned\ integer.}}
\DoxyCodeLine{01476\ \textcolor{keyword}{inline}\ uint128\_fallback\ umul192\_upper128(uint64\_t\ x,}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint128\_fallback\ y)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01478\ \ \ uint128\_fallback\ r\ =\ umul128(x,\ y.high());}
\DoxyCodeLine{01479\ \ \ r\ +=\ umul128\_upper64(x,\ y.low());}
\DoxyCodeLine{01480\ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{01481\ \}}
\DoxyCodeLine{01482\ }
\DoxyCodeLine{01483\ FMT\_API\ uint128\_fallback\ get\_cached\_power(\textcolor{keywordtype}{int}\ k)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{01484\ }
\DoxyCodeLine{01485\ \textcolor{comment}{//\ Type-\/specific\ information\ that\ Dragonbox\ uses.}}
\DoxyCodeLine{01486\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Enable\ =\ \textcolor{keywordtype}{void}>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdragonbox_1_1float__info}{float\_info}};}
\DoxyCodeLine{01487\ }
\DoxyCodeLine{01488\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdragonbox_1_1float__info}{float\_info}}<float>\ \{}
\DoxyCodeLine{01489\ \ \ \textcolor{keyword}{using\ }carrier\_uint\ =\ uint32\_t;}
\DoxyCodeLine{01490\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ exponent\_bits\ =\ 8;}
\DoxyCodeLine{01491\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ kappa\ =\ 1;}
\DoxyCodeLine{01492\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ big\_divisor\ =\ 100;}
\DoxyCodeLine{01493\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ small\_divisor\ =\ 10;}
\DoxyCodeLine{01494\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ min\_k\ =\ -\/31;}
\DoxyCodeLine{01495\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_k\ =\ 46;}
\DoxyCodeLine{01496\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shorter\_interval\_tie\_lower\_threshold\ =\ -\/35;}
\DoxyCodeLine{01497\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shorter\_interval\_tie\_upper\_threshold\ =\ -\/35;}
\DoxyCodeLine{01498\ \};}
\DoxyCodeLine{01499\ }
\DoxyCodeLine{01500\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdragonbox_1_1float__info}{float\_info}}<double>\ \{}
\DoxyCodeLine{01501\ \ \ \textcolor{keyword}{using\ }carrier\_uint\ =\ uint64\_t;}
\DoxyCodeLine{01502\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ exponent\_bits\ =\ 11;}
\DoxyCodeLine{01503\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ kappa\ =\ 2;}
\DoxyCodeLine{01504\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ big\_divisor\ =\ 1000;}
\DoxyCodeLine{01505\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ small\_divisor\ =\ 100;}
\DoxyCodeLine{01506\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ min\_k\ =\ -\/292;}
\DoxyCodeLine{01507\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_k\ =\ 341;}
\DoxyCodeLine{01508\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shorter\_interval\_tie\_lower\_threshold\ =\ -\/77;}
\DoxyCodeLine{01509\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shorter\_interval\_tie\_upper\_threshold\ =\ -\/77;}
\DoxyCodeLine{01510\ \};}
\DoxyCodeLine{01511\ }
\DoxyCodeLine{01512\ \textcolor{comment}{//\ An\ 80-\/\ or\ 128-\/bit\ floating\ point\ number.}}
\DoxyCodeLine{01513\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01514\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdragonbox_1_1float__info}{float\_info}}<T,\ enable\_if\_t<std::numeric\_limits<T>::digits\ ==\ 64\ ||}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::digits\ ==\ 113\ ||}
\DoxyCodeLine{01516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ is\_float128<T>::value>>\ \{}
\DoxyCodeLine{01517\ \ \ \textcolor{keyword}{using\ }carrier\_uint\ =\ detail::uint128\_t;}
\DoxyCodeLine{01518\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ exponent\_bits\ =\ 15;}
\DoxyCodeLine{01519\ \};}
\DoxyCodeLine{01520\ }
\DoxyCodeLine{01521\ \textcolor{comment}{//\ A\ double-\/double\ floating\ point\ number.}}
\DoxyCodeLine{01522\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01523\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdragonbox_1_1float__info}{float\_info}}<T,\ enable\_if\_t<is\_double\_double<T>::value>>\ \{}
\DoxyCodeLine{01524\ \ \ \textcolor{keyword}{using\ }carrier\_uint\ =\ detail::uint128\_t;}
\DoxyCodeLine{01525\ \};}
\DoxyCodeLine{01526\ }
\DoxyCodeLine{01527\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdragonbox_1_1decimal__fp}{decimal\_fp}}\ \{}
\DoxyCodeLine{01528\ \ \ \textcolor{keyword}{using\ }significand\_type\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structdragonbox_1_1float__info}{float\_info<T>::carrier\_uint}};}
\DoxyCodeLine{01529\ \ \ significand\_type\ significand;}
\DoxyCodeLine{01530\ \ \ \textcolor{keywordtype}{int}\ exponent;}
\DoxyCodeLine{01531\ \};}
\DoxyCodeLine{01532\ }
\DoxyCodeLine{01533\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ FMT\_API\ \textcolor{keyword}{auto}\ to\_decimal(T\ x)\ \textcolor{keyword}{noexcept}\ -\/>\ \mbox{\hyperlink{structdragonbox_1_1decimal__fp}{decimal\_fp<T>}};}
\DoxyCodeLine{01534\ \}\ \ \textcolor{comment}{//\ namespace\ dragonbox}}
\DoxyCodeLine{01535\ }
\DoxyCodeLine{01536\ \textcolor{comment}{//\ Returns\ true\ iff\ Float\ has\ the\ implicit\ bit\ which\ is\ not\ stored.}}
\DoxyCodeLine{01537\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float>\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ has\_implicit\_bit()\ \{}
\DoxyCodeLine{01538\ \ \ \textcolor{comment}{//\ An\ 80-\/bit\ FP\ number\ has\ a\ 64-\/bit\ significand\ an\ no\ implicit\ bit.}}
\DoxyCodeLine{01539\ \ \ \textcolor{keywordflow}{return}\ std::numeric\_limits<Float>::digits\ !=\ 64;}
\DoxyCodeLine{01540\ \}}
\DoxyCodeLine{01541\ }
\DoxyCodeLine{01542\ \textcolor{comment}{//\ Returns\ the\ number\ of\ significand\ bits\ stored\ in\ Float.\ The\ implicit\ bit\ is}}
\DoxyCodeLine{01543\ \textcolor{comment}{//\ not\ counted\ since\ it\ is\ not\ stored.}}
\DoxyCodeLine{01544\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float>\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ num\_significand\_bits()\ \{}
\DoxyCodeLine{01545\ \ \ \textcolor{comment}{//\ std::numeric\_limits\ may\ not\ support\ \_\_float128.}}
\DoxyCodeLine{01546\ \ \ \textcolor{keywordflow}{return}\ is\_float128<Float>()\ ?\ 112}
\DoxyCodeLine{01547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ (std::numeric\_limits<Float>::digits\ -\/}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (has\_implicit\_bit<Float>()\ ?\ 1\ :\ 0));}
\DoxyCodeLine{01549\ \}}
\DoxyCodeLine{01550\ }
\DoxyCodeLine{01551\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float>}
\DoxyCodeLine{01552\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ exponent\_mask()\ -\/>}
\DoxyCodeLine{01553\ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info<Float>::carrier\_uint}}\ \{}
\DoxyCodeLine{01554\ \ \ \textcolor{keyword}{using\ }float\_uint\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info<Float>::carrier\_uint}};}
\DoxyCodeLine{01555\ \ \ \textcolor{keywordflow}{return}\ ((float\_uint(1)\ <<\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info<Float>::exponent\_bits}})\ -\/\ 1)}
\DoxyCodeLine{01556\ \ \ \ \ \ \ \ \ \ <<\ num\_significand\_bits<Float>();}
\DoxyCodeLine{01557\ \}}
\DoxyCodeLine{01558\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ exponent\_bias()\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{01559\ \ \ \textcolor{comment}{//\ std::numeric\_limits\ may\ not\ support\ \_\_float128.}}
\DoxyCodeLine{01560\ \ \ \textcolor{keywordflow}{return}\ is\_float128<Float>()\ ?\ 16383}
\DoxyCodeLine{01561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ std::numeric\_limits<Float>::max\_exponent\ -\/\ 1;}
\DoxyCodeLine{01562\ \}}
\DoxyCodeLine{01563\ }
\DoxyCodeLine{01564\ \textcolor{comment}{//\ Writes\ the\ exponent\ exp\ in\ the\ form\ "{}[+-\/]d\{2,3\}"{}\ to\ buffer.}}
\DoxyCodeLine{01565\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ It>}
\DoxyCodeLine{01566\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write\_exponent(\textcolor{keywordtype}{int}\ exp,\ It\ it)\ -\/>\ It\ \{}
\DoxyCodeLine{01567\ \ \ FMT\_ASSERT(-\/10000\ <\ exp\ \&\&\ exp\ <\ 10000,\ \textcolor{stringliteral}{"{}exponent\ out\ of\ range"{}});}
\DoxyCodeLine{01568\ \ \ \textcolor{keywordflow}{if}\ (exp\ <\ 0)\ \{}
\DoxyCodeLine{01569\ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'-\/'});}
\DoxyCodeLine{01570\ \ \ \ \ exp\ =\ -\/exp;}
\DoxyCodeLine{01571\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01572\ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'+'});}
\DoxyCodeLine{01573\ \ \ \}}
\DoxyCodeLine{01574\ \ \ \textcolor{keywordflow}{if}\ (exp\ >=\ 100)\ \{}
\DoxyCodeLine{01575\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ top\ =\ digits2(to\_unsigned(exp\ /\ 100));}
\DoxyCodeLine{01576\ \ \ \ \ \textcolor{keywordflow}{if}\ (exp\ >=\ 1000)\ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(top[0]);}
\DoxyCodeLine{01577\ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(top[1]);}
\DoxyCodeLine{01578\ \ \ \ \ exp\ \%=\ 100;}
\DoxyCodeLine{01579\ \ \ \}}
\DoxyCodeLine{01580\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ d\ =\ digits2(to\_unsigned(exp));}
\DoxyCodeLine{01581\ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(d[0]);}
\DoxyCodeLine{01582\ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(d[1]);}
\DoxyCodeLine{01583\ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{01584\ \}}
\DoxyCodeLine{01585\ }
\DoxyCodeLine{01586\ \textcolor{comment}{//\ A\ floating-\/point\ number\ f\ *\ pow(2,\ e)\ where\ F\ is\ an\ unsigned\ type.}}
\DoxyCodeLine{01587\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structbasic__fp}{basic\_fp}}\ \{}
\DoxyCodeLine{01588\ \ \ F\ f;}
\DoxyCodeLine{01589\ \ \ \textcolor{keywordtype}{int}\ e;}
\DoxyCodeLine{01590\ }
\DoxyCodeLine{01591\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ num\_significand\_bits\ =}
\DoxyCodeLine{01592\ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\textcolor{keyword}{sizeof}(F)\ *\ num\_bits<unsigned\ char>());}
\DoxyCodeLine{01593\ }
\DoxyCodeLine{01594\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structbasic__fp}{basic\_fp}}()\ :\ f(0),\ e(0)\ \{\}}
\DoxyCodeLine{01595\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structbasic__fp}{basic\_fp}}(uint64\_t\ f\_val,\ \textcolor{keywordtype}{int}\ e\_val)\ :\ f(f\_val),\ e(e\_val)\ \{\}}
\DoxyCodeLine{01596\ }
\DoxyCodeLine{01597\ \ \ \textcolor{comment}{//\ Constructs\ fp\ from\ an\ IEEE754\ floating-\/point\ number.}}
\DoxyCodeLine{01598\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float>\ FMT\_CONSTEXPR\ \mbox{\hyperlink{structbasic__fp}{basic\_fp}}(Float\ n)\ \{\ assign(n);\ \}}
\DoxyCodeLine{01599\ }
\DoxyCodeLine{01600\ \ \ \textcolor{comment}{//\ Assigns\ n\ to\ this\ and\ return\ true\ iff\ predecessor\ is\ closer\ than\ successor.}}
\DoxyCodeLine{01601\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float,\ FMT\_ENABLE\_IF(!is\_\textcolor{keywordtype}{double}\_\textcolor{keywordtype}{double}<Float>::value)>}
\DoxyCodeLine{01602\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ assign(Float\ n)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01603\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::numeric\_limits<Float>::digits\ <=\ 113,\ \textcolor{stringliteral}{"{}unsupported\ FP"{}});}
\DoxyCodeLine{01604\ \ \ \ \ \textcolor{comment}{//\ Assume\ Float\ is\ in\ the\ format\ [sign][exponent][significand].}}
\DoxyCodeLine{01605\ \ \ \ \ \textcolor{keyword}{using\ }carrier\_uint\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info<Float>::carrier\_uint}};}
\DoxyCodeLine{01606\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ num\_float\_significand\_bits\ =}
\DoxyCodeLine{01607\ \ \ \ \ \ \ \ \ detail::num\_significand\_bits<Float>();}
\DoxyCodeLine{01608\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ implicit\_bit\ =\ carrier\_uint(1)\ <<\ num\_float\_significand\_bits;}
\DoxyCodeLine{01609\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ significand\_mask\ =\ implicit\_bit\ -\/\ 1;}
\DoxyCodeLine{01610\ \ \ \ \ \textcolor{keyword}{auto}\ u\ =\ bit\_cast<carrier\_uint>(n);}
\DoxyCodeLine{01611\ \ \ \ \ f\ =\ \textcolor{keyword}{static\_cast<}F\textcolor{keyword}{>}(u\ \&\ significand\_mask);}
\DoxyCodeLine{01612\ \ \ \ \ \textcolor{keyword}{auto}\ biased\_e\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}((u\ \&\ exponent\_mask<Float>())\ >>}
\DoxyCodeLine{01613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_float\_significand\_bits);}
\DoxyCodeLine{01614\ \ \ \ \ \textcolor{comment}{//\ The\ predecessor\ is\ closer\ if\ n\ is\ a\ normalized\ power\ of\ 2\ (f\ ==\ 0)}}
\DoxyCodeLine{01615\ \ \ \ \ \textcolor{comment}{//\ other\ than\ the\ smallest\ normalized\ number\ (biased\_e\ >\ 1).}}
\DoxyCodeLine{01616\ \ \ \ \ \textcolor{keyword}{auto}\ is\_predecessor\_closer\ =\ f\ ==\ 0\ \&\&\ biased\_e\ >\ 1;}
\DoxyCodeLine{01617\ \ \ \ \ \textcolor{keywordflow}{if}\ (biased\_e\ ==\ 0)}
\DoxyCodeLine{01618\ \ \ \ \ \ \ biased\_e\ =\ 1;\ \ \textcolor{comment}{//\ Subnormals\ use\ biased\ exponent\ 1\ (min\ exponent).}}
\DoxyCodeLine{01619\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (has\_implicit\_bit<Float>())}
\DoxyCodeLine{01620\ \ \ \ \ \ \ f\ +=\ \textcolor{keyword}{static\_cast<}F\textcolor{keyword}{>}(implicit\_bit);}
\DoxyCodeLine{01621\ \ \ \ \ e\ =\ biased\_e\ -\/\ exponent\_bias<Float>()\ -\/\ num\_float\_significand\_bits;}
\DoxyCodeLine{01622\ \ \ \ \ \textcolor{keywordflow}{if}\ (!has\_implicit\_bit<Float>())\ ++e;}
\DoxyCodeLine{01623\ \ \ \ \ \textcolor{keywordflow}{return}\ is\_predecessor\_closer;}
\DoxyCodeLine{01624\ \ \ \}}
\DoxyCodeLine{01625\ }
\DoxyCodeLine{01626\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float,\ FMT\_ENABLE\_IF(is\_\textcolor{keywordtype}{double}\_\textcolor{keywordtype}{double}<Float>::value)>}
\DoxyCodeLine{01627\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ assign(Float\ n)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01628\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::numeric\_limits<double>::is\_iec559,\ \textcolor{stringliteral}{"{}unsupported\ FP"{}});}
\DoxyCodeLine{01629\ \ \ \ \ \textcolor{keywordflow}{return}\ assign(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(n));}
\DoxyCodeLine{01630\ \ \ \}}
\DoxyCodeLine{01631\ \};}
\DoxyCodeLine{01632\ }
\DoxyCodeLine{01633\ \textcolor{keyword}{using\ }\mbox{\hyperlink{structbasic__fp}{fp}}\ =\ \mbox{\hyperlink{structbasic__fp}{basic\_fp<unsigned\ long\ long>}};}
\DoxyCodeLine{01634\ }
\DoxyCodeLine{01635\ \textcolor{comment}{//\ Normalizes\ the\ value\ converted\ from\ double\ and\ multiplied\ by\ (1\ <<\ SHIFT).}}
\DoxyCodeLine{01636\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ SHIFT\ =\ 0,\ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{01637\ FMT\_CONSTEXPR\ \mbox{\hyperlink{structbasic__fp}{basic\_fp<F>}}\ normalize(\mbox{\hyperlink{structbasic__fp}{basic\_fp<F>}}\ value)\ \{}
\DoxyCodeLine{01638\ \ \ \textcolor{comment}{//\ Handle\ subnormals.}}
\DoxyCodeLine{01639\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ implicit\_bit\ =\ F(1)\ <<\ num\_significand\_bits<double>();}
\DoxyCodeLine{01640\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ shifted\_implicit\_bit\ =\ implicit\_bit\ <<\ SHIFT;}
\DoxyCodeLine{01641\ \ \ \textcolor{keywordflow}{while}\ ((value.f\ \&\ shifted\_implicit\_bit)\ ==\ 0)\ \{}
\DoxyCodeLine{01642\ \ \ \ \ value.f\ <<=\ 1;}
\DoxyCodeLine{01643\ \ \ \ \ -\/-\/value.e;}
\DoxyCodeLine{01644\ \ \ \}}
\DoxyCodeLine{01645\ \ \ \textcolor{comment}{//\ Subtract\ 1\ to\ account\ for\ hidden\ bit.}}
\DoxyCodeLine{01646\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ offset\ =\ \mbox{\hyperlink{structbasic__fp}{basic\_fp<F>::num\_significand\_bits}}\ -\/}
\DoxyCodeLine{01647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_significand\_bits<double>()\ -\/\ SHIFT\ -\/\ 1;}
\DoxyCodeLine{01648\ \ \ value.f\ <<=\ offset;}
\DoxyCodeLine{01649\ \ \ value.e\ -\/=\ offset;}
\DoxyCodeLine{01650\ \ \ \textcolor{keywordflow}{return}\ value;}
\DoxyCodeLine{01651\ \}}
\DoxyCodeLine{01652\ }
\DoxyCodeLine{01653\ \textcolor{comment}{//\ Computes\ lhs\ *\ rhs\ /\ pow(2,\ 64)\ rounded\ to\ nearest\ with\ half-\/up\ tie\ breaking.}}
\DoxyCodeLine{01654\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ uint64\_t\ multiply(uint64\_t\ lhs,\ uint64\_t\ rhs)\ \{}
\DoxyCodeLine{01655\ \textcolor{preprocessor}{\#if\ FMT\_USE\_INT128}}
\DoxyCodeLine{01656\ \ \ \textcolor{keyword}{auto}\ product\ =\ \textcolor{keyword}{static\_cast<}\_\_uint128\_t\textcolor{keyword}{>}(lhs)\ *\ rhs;}
\DoxyCodeLine{01657\ \ \ \textcolor{keyword}{auto}\ f\ =\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(product\ >>\ 64);}
\DoxyCodeLine{01658\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(product)\ \&\ (1ULL\ <<\ 63))\ !=\ 0\ ?\ f\ +\ 1\ :\ f;}
\DoxyCodeLine{01659\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01660\ \ \ \textcolor{comment}{//\ Multiply\ 32-\/bit\ parts\ of\ significands.}}
\DoxyCodeLine{01661\ \ \ uint64\_t\ mask\ =\ (1ULL\ <<\ 32)\ -\/\ 1;}
\DoxyCodeLine{01662\ \ \ uint64\_t\ a\ =\ lhs\ >>\ 32,\ b\ =\ lhs\ \&\ mask;}
\DoxyCodeLine{01663\ \ \ uint64\_t\ c\ =\ rhs\ >>\ 32,\ d\ =\ rhs\ \&\ mask;}
\DoxyCodeLine{01664\ \ \ uint64\_t\ ac\ =\ a\ *\ c,\ bc\ =\ b\ *\ c,\ ad\ =\ a\ *\ d,\ bd\ =\ b\ *\ d;}
\DoxyCodeLine{01665\ \ \ \textcolor{comment}{//\ Compute\ mid\ 64-\/bit\ of\ result\ and\ round.}}
\DoxyCodeLine{01666\ \ \ uint64\_t\ mid\ =\ (bd\ >>\ 32)\ +\ (ad\ \&\ mask)\ +\ (bc\ \&\ mask)\ +\ (1U\ <<\ 31);}
\DoxyCodeLine{01667\ \ \ \textcolor{keywordflow}{return}\ ac\ +\ (ad\ >>\ 32)\ +\ (bc\ >>\ 32)\ +\ (mid\ >>\ 32);}
\DoxyCodeLine{01668\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01669\ \}}
\DoxyCodeLine{01670\ }
\DoxyCodeLine{01671\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structbasic__fp}{fp}}\ operator*(\mbox{\hyperlink{structbasic__fp}{fp}}\ x,\ \mbox{\hyperlink{structbasic__fp}{fp}}\ y)\ \{}
\DoxyCodeLine{01672\ \ \ \textcolor{keywordflow}{return}\ \{multiply(x.f,\ y.f),\ x.e\ +\ y.e\ +\ 64\};}
\DoxyCodeLine{01673\ \}}
\DoxyCodeLine{01674\ }
\DoxyCodeLine{01675\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T\ =\ \textcolor{keywordtype}{void}>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structbasic__data}{basic\_data}}\ \{}
\DoxyCodeLine{01676\ \ \ \textcolor{comment}{//\ Normalized\ 64-\/bit\ significands\ of\ pow(10,\ k),\ for\ k\ =\ -\/348,\ -\/340,\ ...,\ 340.}}
\DoxyCodeLine{01677\ \ \ \textcolor{comment}{//\ These\ are\ generated\ by\ support/compute-\/powers.py.}}
\DoxyCodeLine{01678\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ pow10\_significands[87]\ =\ \{}
\DoxyCodeLine{01679\ \ \ \ \ \ \ 0xfa8fd5a0081c0288,\ 0xbaaee17fa23ebf76,\ 0x8b16fb203055ac76,}
\DoxyCodeLine{01680\ \ \ \ \ \ \ 0xcf42894a5dce35ea,\ 0x9a6bb0aa55653b2d,\ 0xe61acf033d1a45df,}
\DoxyCodeLine{01681\ \ \ \ \ \ \ 0xab70fe17c79ac6ca,\ 0xff77b1fcbebcdc4f,\ 0xbe5691ef416bd60c,}
\DoxyCodeLine{01682\ \ \ \ \ \ \ 0x8dd01fad907ffc3c,\ 0xd3515c2831559a83,\ 0x9d71ac8fada6c9b5,}
\DoxyCodeLine{01683\ \ \ \ \ \ \ 0xea9c227723ee8bcb,\ 0xaecc49914078536d,\ 0x823c12795db6ce57,}
\DoxyCodeLine{01684\ \ \ \ \ \ \ 0xc21094364dfb5637,\ 0x9096ea6f3848984f,\ 0xd77485cb25823ac7,}
\DoxyCodeLine{01685\ \ \ \ \ \ \ 0xa086cfcd97bf97f4,\ 0xef340a98172aace5,\ 0xb23867fb2a35b28e,}
\DoxyCodeLine{01686\ \ \ \ \ \ \ 0x84c8d4dfd2c63f3b,\ 0xc5dd44271ad3cdba,\ 0x936b9fcebb25c996,}
\DoxyCodeLine{01687\ \ \ \ \ \ \ 0xdbac6c247d62a584,\ 0xa3ab66580d5fdaf6,\ 0xf3e2f893dec3f126,}
\DoxyCodeLine{01688\ \ \ \ \ \ \ 0xb5b5ada8aaff80b8,\ 0x87625f056c7c4a8b,\ 0xc9bcff6034c13053,}
\DoxyCodeLine{01689\ \ \ \ \ \ \ 0x964e858c91ba2655,\ 0xdff9772470297ebd,\ 0xa6dfbd9fb8e5b88f,}
\DoxyCodeLine{01690\ \ \ \ \ \ \ 0xf8a95fcf88747d94,\ 0xb94470938fa89bcf,\ 0x8a08f0f8bf0f156b,}
\DoxyCodeLine{01691\ \ \ \ \ \ \ 0xcdb02555653131b6,\ 0x993fe2c6d07b7fac,\ 0xe45c10c42a2b3b06,}
\DoxyCodeLine{01692\ \ \ \ \ \ \ 0xaa242499697392d3,\ 0xfd87b5f28300ca0e,\ 0xbce5086492111aeb,}
\DoxyCodeLine{01693\ \ \ \ \ \ \ 0x8cbccc096f5088cc,\ 0xd1b71758e219652c,\ 0x9c40000000000000,}
\DoxyCodeLine{01694\ \ \ \ \ \ \ 0xe8d4a51000000000,\ 0xad78ebc5ac620000,\ 0x813f3978f8940984,}
\DoxyCodeLine{01695\ \ \ \ \ \ \ 0xc097ce7bc90715b3,\ 0x8f7e32ce7bea5c70,\ 0xd5d238a4abe98068,}
\DoxyCodeLine{01696\ \ \ \ \ \ \ 0x9f4f2726179a2245,\ 0xed63a231d4c4fb27,\ 0xb0de65388cc8ada8,}
\DoxyCodeLine{01697\ \ \ \ \ \ \ 0x83c7088e1aab65db,\ 0xc45d1df942711d9a,\ 0x924d692ca61be758,}
\DoxyCodeLine{01698\ \ \ \ \ \ \ 0xda01ee641a708dea,\ 0xa26da3999aef774a,\ 0xf209787bb47d6b85,}
\DoxyCodeLine{01699\ \ \ \ \ \ \ 0xb454e4a179dd1877,\ 0x865b86925b9bc5c2,\ 0xc83553c5c8965d3d,}
\DoxyCodeLine{01700\ \ \ \ \ \ \ 0x952ab45cfa97a0b3,\ 0xde469fbd99a05fe3,\ 0xa59bc234db398c25,}
\DoxyCodeLine{01701\ \ \ \ \ \ \ 0xf6c69a72a3989f5c,\ 0xb7dcbf5354e9bece,\ 0x88fcf317f22241e2,}
\DoxyCodeLine{01702\ \ \ \ \ \ \ 0xcc20ce9bd35c78a5,\ 0x98165af37b2153df,\ 0xe2a0b5dc971f303a,}
\DoxyCodeLine{01703\ \ \ \ \ \ \ 0xa8d9d1535ce3b396,\ 0xfb9b7cd9a4a7443c,\ 0xbb764c4ca7a44410,}
\DoxyCodeLine{01704\ \ \ \ \ \ \ 0x8bab8eefb6409c1a,\ 0xd01fef10a657842c,\ 0x9b10a4e5e9913129,}
\DoxyCodeLine{01705\ \ \ \ \ \ \ 0xe7109bfba19c0c9d,\ 0xac2820d9623bf429,\ 0x80444b5e7aa7cf85,}
\DoxyCodeLine{01706\ \ \ \ \ \ \ 0xbf21e44003acdd2d,\ 0x8e679c2f5e44ff8f,\ 0xd433179d9c8cb841,}
\DoxyCodeLine{01707\ \ \ \ \ \ \ 0x9e19db92b4e31ba9,\ 0xeb96bf6ebadf77d9,\ 0xaf87023b9bf0ee6b,}
\DoxyCodeLine{01708\ \ \ \};}
\DoxyCodeLine{01709\ }
\DoxyCodeLine{01710\ \textcolor{preprocessor}{\#if\ FMT\_GCC\_VERSION\ \&\&\ FMT\_GCC\_VERSION\ <\ 409}}
\DoxyCodeLine{01711\ \textcolor{preprocessor}{\#\ \ pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{01712\ \textcolor{preprocessor}{\#\ \ pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wnarrowing"{}}}
\DoxyCodeLine{01713\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01714\ \ \ \textcolor{comment}{//\ Binary\ exponents\ of\ pow(10,\ k),\ for\ k\ =\ -\/348,\ -\/340,\ ...,\ 340,\ corresponding}}
\DoxyCodeLine{01715\ \ \ \textcolor{comment}{//\ to\ significands\ above.}}
\DoxyCodeLine{01716\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ int16\_t\ pow10\_exponents[87]\ =\ \{}
\DoxyCodeLine{01717\ \ \ \ \ \ \ -\/1220,\ -\/1193,\ -\/1166,\ -\/1140,\ -\/1113,\ -\/1087,\ -\/1060,\ -\/1034,\ -\/1007,\ -\/980,\ -\/954,}
\DoxyCodeLine{01718\ \ \ \ \ \ \ -\/927,\ \ -\/901,\ \ -\/874,\ \ -\/847,\ \ -\/821,\ \ -\/794,\ \ -\/768,\ \ -\/741,\ \ -\/715,\ \ -\/688,\ -\/661,}
\DoxyCodeLine{01719\ \ \ \ \ \ \ -\/635,\ \ -\/608,\ \ -\/582,\ \ -\/555,\ \ -\/529,\ \ -\/502,\ \ -\/475,\ \ -\/449,\ \ -\/422,\ \ -\/396,\ -\/369,}
\DoxyCodeLine{01720\ \ \ \ \ \ \ -\/343,\ \ -\/316,\ \ -\/289,\ \ -\/263,\ \ -\/236,\ \ -\/210,\ \ -\/183,\ \ -\/157,\ \ -\/130,\ \ -\/103,\ -\/77,}
\DoxyCodeLine{01721\ \ \ \ \ \ \ -\/50,\ \ \ -\/24,\ \ \ 3,\ \ \ \ \ 30,\ \ \ \ 56,\ \ \ \ 83,\ \ \ \ 109,\ \ \ 136,\ \ \ 162,\ \ \ 189,\ \ 216,}
\DoxyCodeLine{01722\ \ \ \ \ \ \ 242,\ \ \ 269,\ \ \ 295,\ \ \ 322,\ \ \ 348,\ \ \ 375,\ \ \ 402,\ \ \ 428,\ \ \ 455,\ \ \ 481,\ \ 508,}
\DoxyCodeLine{01723\ \ \ \ \ \ \ 534,\ \ \ 561,\ \ \ 588,\ \ \ 614,\ \ \ 641,\ \ \ 667,\ \ \ 694,\ \ \ 720,\ \ \ 747,\ \ \ 774,\ \ 800,}
\DoxyCodeLine{01724\ \ \ \ \ \ \ 827,\ \ \ 853,\ \ \ 880,\ \ \ 907,\ \ \ 933,\ \ \ 960,\ \ \ 986,\ \ \ 1013,\ \ 1039,\ \ 1066\};}
\DoxyCodeLine{01725\ \textcolor{preprocessor}{\#if\ FMT\_GCC\_VERSION\ \&\&\ FMT\_GCC\_VERSION\ <\ 409}}
\DoxyCodeLine{01726\ \textcolor{preprocessor}{\#\ \ pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{01727\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01728\ }
\DoxyCodeLine{01729\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ power\_of\_10\_64[20]\ =\ \{}
\DoxyCodeLine{01730\ \ \ \ \ \ \ 1,\ FMT\_POWERS\_OF\_10(1ULL),\ FMT\_POWERS\_OF\_10(1000000000ULL),}
\DoxyCodeLine{01731\ \ \ \ \ \ \ 10000000000000000000ULL\};}
\DoxyCodeLine{01732\ }
\DoxyCodeLine{01733\ \ \ \textcolor{comment}{//\ For\ checking\ rounding\ thresholds.}}
\DoxyCodeLine{01734\ \ \ \textcolor{comment}{//\ The\ kth\ entry\ is\ chosen\ to\ be\ the\ smallest\ integer\ such\ that\ the}}
\DoxyCodeLine{01735\ \ \ \textcolor{comment}{//\ upper\ 32-\/bits\ of\ 10\string^(k+1)\ times\ it\ is\ strictly\ bigger\ than\ 5\ *\ 10\string^k.}}
\DoxyCodeLine{01736\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint32\_t\ fractional\_part\_rounding\_thresholds[8]\ =\ \{}
\DoxyCodeLine{01737\ \ \ \ \ \ \ 2576980378,\ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^1)}}
\DoxyCodeLine{01738\ \ \ \ \ \ \ 2190433321,\ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^2)}}
\DoxyCodeLine{01739\ \ \ \ \ \ \ 2151778616,\ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^3)}}
\DoxyCodeLine{01740\ \ \ \ \ \ \ 2147913145,\ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^4)}}
\DoxyCodeLine{01741\ \ \ \ \ \ \ 2147526598,\ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^5)}}
\DoxyCodeLine{01742\ \ \ \ \ \ \ 2147487943,\ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^6)}}
\DoxyCodeLine{01743\ \ \ \ \ \ \ 2147484078,\ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^7)}}
\DoxyCodeLine{01744\ \ \ \ \ \ \ 2147483691\ \ \ \textcolor{comment}{//\ ceil(2\string^31\ +\ 2\string^32/10\string^8)}}
\DoxyCodeLine{01745\ \ \ \};}
\DoxyCodeLine{01746\ \};}
\DoxyCodeLine{01747\ }
\DoxyCodeLine{01748\ \textcolor{preprocessor}{\#if\ FMT\_CPLUSPLUS\ <\ 201703L}}
\DoxyCodeLine{01749\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{constexpr}\ uint64\_t\ \mbox{\hyperlink{structbasic__data}{basic\_data<T>::pow10\_significands}}[];}
\DoxyCodeLine{01750\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{constexpr}\ int16\_t\ \mbox{\hyperlink{structbasic__data}{basic\_data<T>::pow10\_exponents}}[];}
\DoxyCodeLine{01751\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{constexpr}\ uint64\_t\ \mbox{\hyperlink{structbasic__data}{basic\_data<T>::power\_of\_10\_64}}[];}
\DoxyCodeLine{01752\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01753\ \textcolor{keyword}{constexpr}\ uint32\_t\ \mbox{\hyperlink{structbasic__data}{basic\_data<T>::fractional\_part\_rounding\_thresholds}}[];}
\DoxyCodeLine{01754\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01755\ }
\DoxyCodeLine{01756\ \textcolor{comment}{//\ This\ is\ a\ struct\ rather\ than\ an\ alias\ to\ avoid\ shadowing\ warnings\ in\ gcc.}}
\DoxyCodeLine{01757\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdata}{data}}\ :\ \mbox{\hyperlink{structbasic__data}{basic\_data}}<>\ \{\};}
\DoxyCodeLine{01758\ }
\DoxyCodeLine{01759\ \textcolor{comment}{//\ Returns\ a\ cached\ power\ of\ 10\ `c\_k\ =\ c\_k.f\ *\ pow(2,\ c\_k.e)`\ such\ that\ its}}
\DoxyCodeLine{01760\ \textcolor{comment}{//\ (binary)\ exponent\ satisfies\ `min\_exponent\ <=\ c\_k.e\ <=\ min\_exponent\ +\ 28`.}}
\DoxyCodeLine{01761\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structbasic__fp}{fp}}\ get\_cached\_power(\textcolor{keywordtype}{int}\ min\_exponent,}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\&\ pow10\_exponent)\ \{}
\DoxyCodeLine{01763\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shift\ =\ 32;}
\DoxyCodeLine{01764\ \ \ \textcolor{comment}{//\ log10(2)\ =\ 0x0.4d104d427de7fbcc...}}
\DoxyCodeLine{01765\ \ \ \textcolor{keyword}{const}\ int64\_t\ significand\ =\ 0x4d104d427de7fbcc;}
\DoxyCodeLine{01766\ \ \ \textcolor{keywordtype}{int}\ index\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(}
\DoxyCodeLine{01767\ \ \ \ \ \ \ ((min\_exponent\ +\ fp::num\_significand\_bits\ -\/\ 1)\ *\ (significand\ >>\ shift)\ +}
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ ((int64\_t(1)\ <<\ shift)\ -\/\ 1))\ \ \textcolor{comment}{//\ ceil}}
\DoxyCodeLine{01769\ \ \ \ \ \ \ >>\ 32\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ arithmetic\ shift}}
\DoxyCodeLine{01770\ \ \ );}
\DoxyCodeLine{01771\ \ \ \textcolor{comment}{//\ Decimal\ exponent\ of\ the\ first\ (smallest)\ cached\ power\ of\ 10.}}
\DoxyCodeLine{01772\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ first\_dec\_exp\ =\ -\/348;}
\DoxyCodeLine{01773\ \ \ \textcolor{comment}{//\ Difference\ between\ 2\ consecutive\ decimal\ exponents\ in\ cached\ powers\ of\ 10.}}
\DoxyCodeLine{01774\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ dec\_exp\_step\ =\ 8;}
\DoxyCodeLine{01775\ \ \ index\ =\ (index\ -\/\ first\_dec\_exp\ -\/\ 1)\ /\ dec\_exp\_step\ +\ 1;}
\DoxyCodeLine{01776\ \ \ pow10\_exponent\ =\ first\_dec\_exp\ +\ index\ *\ dec\_exp\_step;}
\DoxyCodeLine{01777\ \ \ \textcolor{comment}{//\ Using\ *(x\ +\ index)\ instead\ of\ x[index]\ avoids\ an\ issue\ with\ some\ compilers}}
\DoxyCodeLine{01778\ \ \ \textcolor{comment}{//\ using\ the\ EDG\ frontend\ (e.g.\ nvhpc/22.3\ in\ C++17\ mode).}}
\DoxyCodeLine{01779\ \ \ \textcolor{keywordflow}{return}\ \{*(data::pow10\_significands\ +\ index),}
\DoxyCodeLine{01780\ \ \ \ \ \ \ \ \ \ \ *(data::pow10\_exponents\ +\ index)\};}
\DoxyCodeLine{01781\ \}}
\DoxyCodeLine{01782\ }
\DoxyCodeLine{01783\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01784\ \textcolor{keyword}{using\ }convert\_float\_result\ =}
\DoxyCodeLine{01785\ \ \ \ \ conditional\_t<std::is\_same<T,\ float>::value\ ||}
\DoxyCodeLine{01786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::digits\ ==}
\DoxyCodeLine{01787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<double>::digits,}
\DoxyCodeLine{01788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ double,\ T>;}
\DoxyCodeLine{01789\ }
\DoxyCodeLine{01790\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01791\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ convert\_float(T\ value)\ -\/>\ convert\_float\_result<T>\ \{}
\DoxyCodeLine{01792\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}convert\_float\_result<T>\textcolor{keyword}{>}(value);}
\DoxyCodeLine{01793\ \}}
\DoxyCodeLine{01794\ }
\DoxyCodeLine{01795\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01796\ FMT\_NOINLINE\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ fill(OutputIt\ it,\ \textcolor{keywordtype}{size\_t}\ n,}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ fill\_t<Char>\&\ fill)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01798\ \ \ \textcolor{keyword}{auto}\ fill\_size\ =\ fill.size();}
\DoxyCodeLine{01799\ \ \ \textcolor{keywordflow}{if}\ (fill\_size\ ==\ 1)\ \textcolor{keywordflow}{return}\ detail::fill\_n(it,\ n,\ fill[0]);}
\DoxyCodeLine{01800\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structdata}{data}}\ =\ fill.data();}
\DoxyCodeLine{01801\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ n;\ ++i)}
\DoxyCodeLine{01802\ \ \ \ \ it\ =\ copy\_str<Char>(\mbox{\hyperlink{structdata}{data}},\ \mbox{\hyperlink{structdata}{data}}\ +\ fill\_size,\ it);}
\DoxyCodeLine{01803\ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{01804\ \}}
\DoxyCodeLine{01805\ }
\DoxyCodeLine{01806\ \textcolor{comment}{//\ Writes\ the\ output\ of\ f,\ padded\ according\ to\ format\ specifications\ in\ specs.}}
\DoxyCodeLine{01807\ \textcolor{comment}{//\ size:\ output\ size\ in\ code\ units.}}
\DoxyCodeLine{01808\ \textcolor{comment}{//\ width:\ output\ display\ width\ in\ (terminal)\ column\ positions.}}
\DoxyCodeLine{01809\ \textcolor{keyword}{template}\ <align::type\ align\ =\ align::left,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char,}
\DoxyCodeLine{01810\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{01811\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write\_padded(OutputIt\ out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ size,\ \textcolor{keywordtype}{size\_t}\ width,\ F\&\&\ f)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01813\ \ \ \textcolor{keyword}{static\_assert}(align\ ==\ align::left\ ||\ align\ ==\ align::right,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{01814\ \ \ \textcolor{keywordtype}{unsigned}\ spec\_width\ =\ to\_unsigned(specs.width);}
\DoxyCodeLine{01815\ \ \ \textcolor{keywordtype}{size\_t}\ padding\ =\ spec\_width\ >\ width\ ?\ spec\_width\ -\/\ width\ :\ 0;}
\DoxyCodeLine{01816\ \ \ \textcolor{comment}{//\ Shifts\ are\ encoded\ as\ string\ literals\ because\ static\ constexpr\ is\ not}}
\DoxyCodeLine{01817\ \ \ \textcolor{comment}{//\ supported\ in\ constexpr\ functions.}}
\DoxyCodeLine{01818\ \ \ \textcolor{keyword}{auto}*\ shifts\ =\ align\ ==\ align::left\ ?\ \textcolor{stringliteral}{"{}\(\backslash\)x1f\(\backslash\)x1f\(\backslash\)x00\(\backslash\)x01"{}}\ :\ \textcolor{stringliteral}{"{}\(\backslash\)x00\(\backslash\)x1f\(\backslash\)x00\(\backslash\)x01"{}};}
\DoxyCodeLine{01819\ \ \ \textcolor{keywordtype}{size\_t}\ left\_padding\ =\ padding\ >>\ shifts[specs.align];}
\DoxyCodeLine{01820\ \ \ \textcolor{keywordtype}{size\_t}\ right\_padding\ =\ padding\ -\/\ left\_padding;}
\DoxyCodeLine{01821\ \ \ \textcolor{keyword}{auto}\ it\ =\ reserve(out,\ size\ +\ padding\ *\ specs.fill.size());}
\DoxyCodeLine{01822\ \ \ \textcolor{keywordflow}{if}\ (left\_padding\ !=\ 0)\ it\ =\ fill(it,\ left\_padding,\ specs.fill);}
\DoxyCodeLine{01823\ \ \ it\ =\ f(it);}
\DoxyCodeLine{01824\ \ \ \textcolor{keywordflow}{if}\ (right\_padding\ !=\ 0)\ it\ =\ fill(it,\ right\_padding,\ specs.fill);}
\DoxyCodeLine{01825\ \ \ \textcolor{keywordflow}{return}\ base\_iterator(out,\ it);}
\DoxyCodeLine{01826\ \}}
\DoxyCodeLine{01827\ }
\DoxyCodeLine{01828\ \textcolor{keyword}{template}\ <align::type\ align\ =\ align::left,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char,}
\DoxyCodeLine{01829\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{01830\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ write\_padded(OutputIt\ out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ size,\ F\&\&\ f)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01832\ \ \ \textcolor{keywordflow}{return}\ write\_padded<align>(out,\ specs,\ size,\ size,\ f);}
\DoxyCodeLine{01833\ \}}
\DoxyCodeLine{01834\ }
\DoxyCodeLine{01835\ \textcolor{keyword}{template}\ <align::type\ align\ =\ align::left,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{01836\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write\_bytes(OutputIt\ out,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ \mbox{\hyperlink{classbytes}{bytes}},}
\DoxyCodeLine{01837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01838\ \ \ \textcolor{keywordflow}{return}\ write\_padded<align>(}
\DoxyCodeLine{01839\ \ \ \ \ \ \ out,\ specs,\ \mbox{\hyperlink{classbytes}{bytes}}.size(),\ [\mbox{\hyperlink{classbytes}{bytes}}](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ const\ char*\ data\ =\ bytes.data();}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ return\ copy\_str<Char>(data,\ data\ +\ bytes.size(),\ it);}
\DoxyCodeLine{01842\ \ \ \ \ \ \ \});}
\DoxyCodeLine{01843\ \}}
\DoxyCodeLine{01844\ }
\DoxyCodeLine{01845\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ UIntPtr>}
\DoxyCodeLine{01846\ \textcolor{keyword}{auto}\ write\_ptr(OutputIt\ out,\ UIntPtr\ value,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}*\ specs)}
\DoxyCodeLine{01847\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01848\ \ \ \textcolor{keywordtype}{int}\ num\_digits\ =\ count\_digits<4>(value);}
\DoxyCodeLine{01849\ \ \ \textcolor{keyword}{auto}\ size\ =\ to\_unsigned(num\_digits)\ +\ size\_t(2);}
\DoxyCodeLine{01850\ \ \ \textcolor{keyword}{auto}\ write\ =\ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{01851\ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'0'});}
\DoxyCodeLine{01852\ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'x'});}
\DoxyCodeLine{01853\ \ \ \ \ \textcolor{keywordflow}{return}\ format\_uint<4,\ Char>(it,\ value,\ num\_digits);}
\DoxyCodeLine{01854\ \ \ \};}
\DoxyCodeLine{01855\ \ \ \textcolor{keywordflow}{return}\ specs\ ?\ write\_padded<align::right>(out,\ *specs,\ size,\ write)}
\DoxyCodeLine{01856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ base\_iterator(out,\ write(reserve(out,\ size)));}
\DoxyCodeLine{01857\ \}}
\DoxyCodeLine{01858\ }
\DoxyCodeLine{01859\ \textcolor{comment}{//\ Returns\ true\ iff\ the\ code\ point\ cp\ is\ printable.}}
\DoxyCodeLine{01860\ FMT\_API\ \textcolor{keyword}{auto}\ is\_printable(uint32\_t\ cp)\ -\/>\ bool;}
\DoxyCodeLine{01861\ }
\DoxyCodeLine{01862\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ needs\_escape(uint32\_t\ cp)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{01863\ \ \ \textcolor{keywordflow}{return}\ cp\ <\ 0x20\ ||\ cp\ ==\ 0x7f\ ||\ cp\ ==\ \textcolor{charliteral}{'"{}'}\ ||\ cp\ ==\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}\ ||}
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \ !is\_printable(cp);}
\DoxyCodeLine{01865\ \}}
\DoxyCodeLine{01866\ }
\DoxyCodeLine{01867\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structfind__escape__result}{find\_escape\_result}}\ \{}
\DoxyCodeLine{01868\ \ \ \textcolor{keyword}{const}\ Char*\ begin;}
\DoxyCodeLine{01869\ \ \ \textcolor{keyword}{const}\ Char*\ end;}
\DoxyCodeLine{01870\ \ \ uint32\_t\ cp;}
\DoxyCodeLine{01871\ \};}
\DoxyCodeLine{01872\ }
\DoxyCodeLine{01873\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01874\ \textcolor{keyword}{using\ }make\_unsigned\_char\ =}
\DoxyCodeLine{01875\ \ \ \ \ \textcolor{keyword}{typename}\ conditional\_t<std::is\_integral<Char>::value,}
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::make\_unsigned<Char>,}
\DoxyCodeLine{01877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structtype__identity}{type\_identity<uint32\_t>}}>::type;}
\DoxyCodeLine{01878\ }
\DoxyCodeLine{01879\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01880\ \textcolor{keyword}{auto}\ find\_escape(\textcolor{keyword}{const}\ Char*\ begin,\ \textcolor{keyword}{const}\ Char*\ end)}
\DoxyCodeLine{01881\ \ \ \ \ -\/>\ \mbox{\hyperlink{structfind__escape__result}{find\_escape\_result<Char>}}\ \{}
\DoxyCodeLine{01882\ \ \ \textcolor{keywordflow}{for}\ (;\ begin\ !=\ end;\ ++begin)\ \{}
\DoxyCodeLine{01883\ \ \ \ \ uint32\_t\ cp\ =\ \textcolor{keyword}{static\_cast<}make\_unsigned\_char<Char>\textcolor{keyword}{>}(*begin);}
\DoxyCodeLine{01884\ \ \ \ \ \textcolor{keywordflow}{if}\ (const\_check(\textcolor{keyword}{sizeof}(Char)\ ==\ 1)\ \&\&\ cp\ >=\ 0x80)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01885\ \ \ \ \ \textcolor{keywordflow}{if}\ (needs\_escape(cp))\ \textcolor{keywordflow}{return}\ \{begin,\ begin\ +\ 1,\ cp\};}
\DoxyCodeLine{01886\ \ \ \}}
\DoxyCodeLine{01887\ \ \ \textcolor{keywordflow}{return}\ \{begin,\ \textcolor{keyword}{nullptr},\ 0\};}
\DoxyCodeLine{01888\ \}}
\DoxyCodeLine{01889\ }
\DoxyCodeLine{01890\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ find\_escape(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ begin,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ end)}
\DoxyCodeLine{01891\ \ \ \ \ -\/>\ \mbox{\hyperlink{structfind__escape__result}{find\_escape\_result<char>}}\ \{}
\DoxyCodeLine{01892\ \ \ \textcolor{keywordflow}{if}\ (!is\_utf8())\ \textcolor{keywordflow}{return}\ find\_escape<char>(begin,\ end);}
\DoxyCodeLine{01893\ \ \ \textcolor{keyword}{auto}\ result\ =\ \mbox{\hyperlink{structfind__escape__result}{find\_escape\_result<char>}}\{end,\ \textcolor{keyword}{nullptr},\ 0\};}
\DoxyCodeLine{01894\ \ \ for\_each\_codepoint(\mbox{\hyperlink{classbasic__string__view}{string\_view}}(begin,\ to\_unsigned(end\ -\/\ begin)),}
\DoxyCodeLine{01895\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](uint32\_t\ cp,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ sv)\ \{}
\DoxyCodeLine{01896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (needs\_escape(cp))\ \{}
\DoxyCodeLine{01897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ \{sv.begin(),\ sv.end(),\ cp\};}
\DoxyCodeLine{01898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01899\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{01902\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{01903\ \}}
\DoxyCodeLine{01904\ }
\DoxyCodeLine{01905\ \textcolor{preprocessor}{\#define\ FMT\_STRING\_IMPL(s,\ base,\ explicit)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01906\ \textcolor{preprocessor}{\ \ []\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01907\ \textcolor{preprocessor}{\ \ \ \ }\textcolor{comment}{/*\ Use\ the\ hidden\ visibility\ as\ a\ workaround\ for\ a\ GCC\ bug\ (\#1973).\ */}\textcolor{preprocessor}{\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01908\ \textcolor{preprocessor}{\ \ \ \ }\textcolor{comment}{/*\ Use\ a\ macro-\/like\ name\ to\ avoid\ shadowing\ warnings.\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01909\ \textcolor{preprocessor}{\ \ \ \ struct\ FMT\_GCC\_VISIBILITY\_HIDDEN\ FMT\_COMPILE\_STRING\ :\ base\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01910\ \textcolor{preprocessor}{\ \ \ \ \ \ using\ char\_type\ FMT\_MAYBE\_UNUSED\ =\ fmt::remove\_cvref\_t<decltype(s[0])>;\ \(\backslash\)}}
\DoxyCodeLine{01911\ \textcolor{preprocessor}{\ \ \ \ \ \ FMT\_MAYBE\_UNUSED\ FMT\_CONSTEXPR\ explicit\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01912\ \textcolor{preprocessor}{\ \ \ \ \ \ operator\ fmt::basic\_string\_view<char\_type>()\ const\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01913\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ return\ fmt::detail\_exported::compile\_string\_to\_view<char\_type>(s);\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01914\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01915\ \textcolor{preprocessor}{\ \ \ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01916\ \textcolor{preprocessor}{\ \ \ \ return\ FMT\_COMPILE\_STRING();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01917\ \textcolor{preprocessor}{\ \ \}()}}
\DoxyCodeLine{01918\ }
\DoxyCodeLine{01929\ \textcolor{preprocessor}{\#define\ FMT\_STRING(s)\ FMT\_STRING\_IMPL(s,\ fmt::detail::compile\_string,\ )}}
\DoxyCodeLine{01930\ }
\DoxyCodeLine{01931\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{size\_t}\ w\textcolor{keywordtype}{id}th,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{01932\ \textcolor{keyword}{auto}\ write\_codepoint(OutputIt\ out,\ \textcolor{keywordtype}{char}\ prefix,\ uint32\_t\ cp)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01933\ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{01934\ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(prefix);}
\DoxyCodeLine{01935\ \ \ Char\ buf[width];}
\DoxyCodeLine{01936\ \ \ fill\_n(buf,\ width,\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{01937\ \ \ format\_uint<4>(buf,\ cp,\ width);}
\DoxyCodeLine{01938\ \ \ \textcolor{keywordflow}{return}\ copy\_str<Char>(buf,\ buf\ +\ width,\ out);}
\DoxyCodeLine{01939\ \}}
\DoxyCodeLine{01940\ }
\DoxyCodeLine{01941\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{01942\ \textcolor{keyword}{auto}\ write\_escaped\_cp(OutputIt\ out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structfind__escape__result}{find\_escape\_result<Char>}}\&\ escape)}
\DoxyCodeLine{01943\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01944\ \ \ \textcolor{keyword}{auto}\ c\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(escape.cp);}
\DoxyCodeLine{01945\ \ \ \textcolor{keywordflow}{switch}\ (escape.cp)\ \{}
\DoxyCodeLine{01946\ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)n'}:}
\DoxyCodeLine{01947\ \ \ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{01948\ \ \ \ \ c\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'n'});}
\DoxyCodeLine{01949\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01950\ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)r'}:}
\DoxyCodeLine{01951\ \ \ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{01952\ \ \ \ \ c\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'r'});}
\DoxyCodeLine{01953\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01954\ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)t'}:}
\DoxyCodeLine{01955\ \ \ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{01956\ \ \ \ \ c\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'t'});}
\DoxyCodeLine{01957\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01958\ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'"{}'}:}
\DoxyCodeLine{01959\ \ \ \ \ FMT\_FALLTHROUGH;}
\DoxyCodeLine{01960\ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)''}:}
\DoxyCodeLine{01961\ \ \ \ \ FMT\_FALLTHROUGH;}
\DoxyCodeLine{01962\ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{01963\ \ \ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{01964\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01965\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01966\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_utf8())\ \{}
\DoxyCodeLine{01967\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (escape.cp\ <\ 0x100)\ \{}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ write\_codepoint<2,\ Char>(out,\ \textcolor{charliteral}{'x'},\ escape.cp);}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01970\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (escape.cp\ <\ 0x10000)\ \{}
\DoxyCodeLine{01971\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ write\_codepoint<4,\ Char>(out,\ \textcolor{charliteral}{'u'},\ escape.cp);}
\DoxyCodeLine{01972\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01973\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (escape.cp\ <\ 0x110000)\ \{}
\DoxyCodeLine{01974\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ write\_codepoint<8,\ Char>(out,\ \textcolor{charliteral}{'U'},\ escape.cp);}
\DoxyCodeLine{01975\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01976\ \ \ \ \ \}}
\DoxyCodeLine{01977\ \ \ \ \ \textcolor{keywordflow}{for}\ (Char\ escape\_char\ :\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}(}
\DoxyCodeLine{01978\ \ \ \ \ \ \ \ \ \ \ \ \ \ escape.begin,\ to\_unsigned(escape.end\ -\/\ escape.begin)))\ \{}
\DoxyCodeLine{01979\ \ \ \ \ \ \ out\ =\ write\_codepoint<2,\ Char>(out,\ \textcolor{charliteral}{'x'},}
\DoxyCodeLine{01980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(escape\_char)\ \&\ 0xFF);}
\DoxyCodeLine{01981\ \ \ \ \ \}}
\DoxyCodeLine{01982\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{01983\ \ \ \}}
\DoxyCodeLine{01984\ \ \ *out++\ =\ c;}
\DoxyCodeLine{01985\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{01986\ \}}
\DoxyCodeLine{01987\ }
\DoxyCodeLine{01988\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{01989\ \textcolor{keyword}{auto}\ write\_escaped\_string(OutputIt\ out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ str)}
\DoxyCodeLine{01990\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{01991\ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'"{}'});}
\DoxyCodeLine{01992\ \ \ \textcolor{keyword}{auto}\ begin\ =\ str.begin(),\ end\ =\ str.end();}
\DoxyCodeLine{01993\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{01994\ \ \ \ \ \textcolor{keyword}{auto}\ escape\ =\ find\_escape(begin,\ end);}
\DoxyCodeLine{01995\ \ \ \ \ out\ =\ copy\_str<Char>(begin,\ escape.begin,\ out);}
\DoxyCodeLine{01996\ \ \ \ \ begin\ =\ escape.end;}
\DoxyCodeLine{01997\ \ \ \ \ \textcolor{keywordflow}{if}\ (!begin)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01998\ \ \ \ \ out\ =\ write\_escaped\_cp<OutputIt,\ Char>(out,\ escape);}
\DoxyCodeLine{01999\ \ \ \}\ \textcolor{keywordflow}{while}\ (begin\ !=\ end);}
\DoxyCodeLine{02000\ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'"{}'});}
\DoxyCodeLine{02001\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02002\ \}}
\DoxyCodeLine{02003\ }
\DoxyCodeLine{02004\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02005\ \textcolor{keyword}{auto}\ write\_escaped\_char(OutputIt\ out,\ Char\ v)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02006\ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)''});}
\DoxyCodeLine{02007\ \ \ \textcolor{keywordflow}{if}\ ((needs\_escape(\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(v))\ \&\&\ v\ !=\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'"{}'}))\ ||}
\DoxyCodeLine{02008\ \ \ \ \ \ \ v\ ==\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)''}))\ \{}
\DoxyCodeLine{02009\ \ \ \ \ out\ =\ write\_escaped\_cp(}
\DoxyCodeLine{02010\ \ \ \ \ \ \ \ \ out,\ \mbox{\hyperlink{structfind__escape__result}{find\_escape\_result<Char>}}\{\&v,\ \&v\ +\ 1,\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(v)\});}
\DoxyCodeLine{02011\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02012\ \ \ \ \ *out++\ =\ v;}
\DoxyCodeLine{02013\ \ \ \}}
\DoxyCodeLine{02014\ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\(\backslash\)''});}
\DoxyCodeLine{02015\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02016\ \}}
\DoxyCodeLine{02017\ }
\DoxyCodeLine{02018\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02019\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write\_char(OutputIt\ out,\ Char\ value,}
\DoxyCodeLine{02020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02021\ \ \ \textcolor{keywordtype}{bool}\ is\_debug\ =\ specs.type\ ==\ presentation\_type::debug;}
\DoxyCodeLine{02022\ \ \ \textcolor{keywordflow}{return}\ write\_padded(out,\ specs,\ 1,\ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02023\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_debug)\ \textcolor{keywordflow}{return}\ write\_escaped\_char(it,\ value);}
\DoxyCodeLine{02024\ \ \ \ \ *it++\ =\ value;}
\DoxyCodeLine{02025\ \ \ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{02026\ \ \ \});}
\DoxyCodeLine{02027\ \}}
\DoxyCodeLine{02028\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02029\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ Char\ value,}
\DoxyCodeLine{02030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,\ locale\_ref\ loc\ =\ \{\})}
\DoxyCodeLine{02031\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02032\ \ \ \textcolor{comment}{//\ char\ is\ formatted\ as\ unsigned\ char\ for\ consistency\ across\ platforms.}}
\DoxyCodeLine{02033\ \ \ \textcolor{keyword}{using\ }unsigned\_type\ =}
\DoxyCodeLine{02034\ \ \ \ \ \ \ conditional\_t<std::is\_same<Char,\ char>::value,\ \textcolor{keywordtype}{unsigned}\ char,\ \textcolor{keywordtype}{unsigned}>;}
\DoxyCodeLine{02035\ \ \ \textcolor{keywordflow}{return}\ check\_char\_specs(specs)}
\DoxyCodeLine{02036\ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ write\_char(out,\ value,\ specs)}
\DoxyCodeLine{02037\ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ write(out,\ static\_cast<unsigned\_type>(value),\ specs,\ loc);}
\DoxyCodeLine{02038\ \}}
\DoxyCodeLine{02039\ }
\DoxyCodeLine{02040\ \textcolor{comment}{//\ Data\ for\ write\_int\ that\ doesn't\ depend\ on\ output\ iterator\ type.\ It\ is\ used\ to}}
\DoxyCodeLine{02041\ \textcolor{comment}{//\ avoid\ template\ code\ bloat.}}
\DoxyCodeLine{02042\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structwrite__int__data}{write\_int\_data}}\ \{}
\DoxyCodeLine{02043\ \ \ \textcolor{keywordtype}{size\_t}\ size;}
\DoxyCodeLine{02044\ \ \ \textcolor{keywordtype}{size\_t}\ padding;}
\DoxyCodeLine{02045\ }
\DoxyCodeLine{02046\ \ \ FMT\_CONSTEXPR\ \mbox{\hyperlink{structwrite__int__data}{write\_int\_data}}(\textcolor{keywordtype}{int}\ num\_digits,\ \textcolor{keywordtype}{unsigned}\ prefix,}
\DoxyCodeLine{02047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs)}
\DoxyCodeLine{02048\ \ \ \ \ \ \ :\ size((prefix\ >>\ 24)\ +\ to\_unsigned(num\_digits)),\ padding(0)\ \{}
\DoxyCodeLine{02049\ \ \ \ \ \textcolor{keywordflow}{if}\ (specs.align\ ==\ align::numeric)\ \{}
\DoxyCodeLine{02050\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ width\ =\ to\_unsigned(specs.width);}
\DoxyCodeLine{02051\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (width\ >\ size)\ \{}
\DoxyCodeLine{02052\ \ \ \ \ \ \ \ \ padding\ =\ width\ -\/\ size;}
\DoxyCodeLine{02053\ \ \ \ \ \ \ \ \ size\ =\ width;}
\DoxyCodeLine{02054\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02055\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (specs.precision\ >\ num\_digits)\ \{}
\DoxyCodeLine{02056\ \ \ \ \ \ \ size\ =\ (prefix\ >>\ 24)\ +\ to\_unsigned(specs.precision);}
\DoxyCodeLine{02057\ \ \ \ \ \ \ padding\ =\ to\_unsigned(specs.precision\ -\/\ num\_digits);}
\DoxyCodeLine{02058\ \ \ \ \ \}}
\DoxyCodeLine{02059\ \ \ \}}
\DoxyCodeLine{02060\ \};}
\DoxyCodeLine{02061\ }
\DoxyCodeLine{02062\ \textcolor{comment}{//\ Writes\ an\ integer\ in\ the\ format}}
\DoxyCodeLine{02063\ \textcolor{comment}{//\ \ \ <left-\/padding><prefix><numeric-\/padding><digits><right-\/padding>}}
\DoxyCodeLine{02064\ \textcolor{comment}{//\ where\ <digits>\ are\ written\ by\ write\_digits(it).}}
\DoxyCodeLine{02065\ \textcolor{comment}{//\ prefix\ contains\ chars\ in\ three\ lower\ bytes\ and\ the\ size\ in\ the\ fourth\ byte.}}
\DoxyCodeLine{02066\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ W>}
\DoxyCodeLine{02067\ FMT\_CONSTEXPR\ FMT\_INLINE\ \textcolor{keyword}{auto}\ write\_int(OutputIt\ out,\ \textcolor{keywordtype}{int}\ num\_digits,}
\DoxyCodeLine{02068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ prefix,}
\DoxyCodeLine{02069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ W\ write\_digits)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02071\ \ \ \textcolor{comment}{//\ Slightly\ faster\ check\ for\ specs.width\ ==\ 0\ \&\&\ specs.precision\ ==\ -\/1.}}
\DoxyCodeLine{02072\ \ \ \textcolor{keywordflow}{if}\ ((specs.width\ |\ (specs.precision\ +\ 1))\ ==\ 0)\ \{}
\DoxyCodeLine{02073\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ reserve(out,\ to\_unsigned(num\_digits)\ +\ (prefix\ >>\ 24));}
\DoxyCodeLine{02074\ \ \ \ \ \textcolor{keywordflow}{if}\ (prefix\ !=\ 0)\ \{}
\DoxyCodeLine{02075\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ p\ =\ prefix\ \&\ 0xffffff;\ p\ !=\ 0;\ p\ >>=\ 8)}
\DoxyCodeLine{02076\ \ \ \ \ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(p\ \&\ 0xff);}
\DoxyCodeLine{02077\ \ \ \ \ \}}
\DoxyCodeLine{02078\ \ \ \ \ \textcolor{keywordflow}{return}\ base\_iterator(out,\ write\_digits(it));}
\DoxyCodeLine{02079\ \ \ \}}
\DoxyCodeLine{02080\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structdata}{data}}\ =\ \mbox{\hyperlink{structwrite__int__data}{write\_int\_data<Char>}}(num\_digits,\ prefix,\ specs);}
\DoxyCodeLine{02081\ \ \ \textcolor{keywordflow}{return}\ write\_padded<align::right>(}
\DoxyCodeLine{02082\ \ \ \ \ \ \ out,\ specs,\ \mbox{\hyperlink{structdata}{data}}.size,\ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02083\ \ \ \ \ \ \ \ \ for\ (unsigned\ p\ =\ prefix\ \&\ 0xffffff;\ p\ !=\ 0;\ p\ >>=\ 8)}
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \ \ *it++\ =\ static\_cast<Char>(p\ \&\ 0xff);}
\DoxyCodeLine{02085\ \ \ \ \ \ \ \ \ it\ =\ detail::fill\_n(it,\ data.padding,\ static\_cast<Char>(\textcolor{stringliteral}{'0'}));}
\DoxyCodeLine{02086\ \ \ \ \ \ \ \ \ return\ write\_digits(it);}
\DoxyCodeLine{02087\ \ \ \ \ \ \ \});}
\DoxyCodeLine{02088\ \}}
\DoxyCodeLine{02089\ }
\DoxyCodeLine{02090\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdigit__grouping}{digit\_grouping}}\ \{}
\DoxyCodeLine{02091\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{02092\ \ \ std::string\ grouping\_;}
\DoxyCodeLine{02093\ \ \ std::basic\_string<Char>\ thousands\_sep\_;}
\DoxyCodeLine{02094\ }
\DoxyCodeLine{02095\ \ \ \textcolor{keyword}{struct\ }next\_state\ \{}
\DoxyCodeLine{02096\ \ \ \ \ std::string::const\_iterator\ group;}
\DoxyCodeLine{02097\ \ \ \ \ \textcolor{keywordtype}{int}\ pos;}
\DoxyCodeLine{02098\ \ \ \};}
\DoxyCodeLine{02099\ \ \ next\_state\ initial\_state()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \{grouping\_.begin(),\ 0\};\ \}}
\DoxyCodeLine{02100\ }
\DoxyCodeLine{02101\ \ \ \textcolor{comment}{//\ Returns\ the\ next\ digit\ group\ separator\ position.}}
\DoxyCodeLine{02102\ \ \ \textcolor{keywordtype}{int}\ next(next\_state\&\ state)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{02103\ \ \ \ \ \textcolor{keywordflow}{if}\ (thousands\_sep\_.empty())\ \textcolor{keywordflow}{return}\ max\_value<int>();}
\DoxyCodeLine{02104\ \ \ \ \ \textcolor{keywordflow}{if}\ (state.group\ ==\ grouping\_.end())\ \textcolor{keywordflow}{return}\ state.pos\ +=\ grouping\_.back();}
\DoxyCodeLine{02105\ \ \ \ \ \textcolor{keywordflow}{if}\ (*state.group\ <=\ 0\ ||\ *state.group\ ==\ max\_value<char>())}
\DoxyCodeLine{02106\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ max\_value<int>();}
\DoxyCodeLine{02107\ \ \ \ \ state.pos\ +=\ *state.group++;}
\DoxyCodeLine{02108\ \ \ \ \ \textcolor{keywordflow}{return}\ state.pos;}
\DoxyCodeLine{02109\ \ \ \}}
\DoxyCodeLine{02110\ }
\DoxyCodeLine{02111\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02112\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdigit__grouping}{digit\_grouping}}(locale\_ref\ loc,\ \textcolor{keywordtype}{bool}\ localized\ =\ \textcolor{keyword}{true})\ \{}
\DoxyCodeLine{02113\ \ \ \ \ \textcolor{keywordflow}{if}\ (!localized)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02114\ \ \ \ \ \textcolor{keyword}{auto}\ sep\ =\ thousands\_sep<Char>(loc);}
\DoxyCodeLine{02115\ \ \ \ \ grouping\_\ =\ sep.grouping;}
\DoxyCodeLine{02116\ \ \ \ \ \textcolor{keywordflow}{if}\ (sep.thousands\_sep)\ thousands\_sep\_.assign(1,\ sep.thousands\_sep);}
\DoxyCodeLine{02117\ \ \ \}}
\DoxyCodeLine{02118\ \ \ \mbox{\hyperlink{classdigit__grouping}{digit\_grouping}}(std::string\ grouping,\ std::basic\_string<Char>\ sep)}
\DoxyCodeLine{02119\ \ \ \ \ \ \ :\ grouping\_(std::move(grouping)),\ thousands\_sep\_(std::move(sep))\ \{\}}
\DoxyCodeLine{02120\ }
\DoxyCodeLine{02121\ \ \ \textcolor{keywordtype}{bool}\ has\_separator()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ !thousands\_sep\_.empty();\ \}}
\DoxyCodeLine{02122\ }
\DoxyCodeLine{02123\ \ \ \textcolor{keywordtype}{int}\ count\_separators(\textcolor{keywordtype}{int}\ num\_digits)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{02124\ \ \ \ \ \textcolor{keywordtype}{int}\ count\ =\ 0;}
\DoxyCodeLine{02125\ \ \ \ \ \textcolor{keyword}{auto}\ state\ =\ initial\_state();}
\DoxyCodeLine{02126\ \ \ \ \ \textcolor{keywordflow}{while}\ (num\_digits\ >\ next(state))\ ++count;}
\DoxyCodeLine{02127\ \ \ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{02128\ \ \ \}}
\DoxyCodeLine{02129\ }
\DoxyCodeLine{02130\ \ \ \textcolor{comment}{//\ Applies\ grouping\ to\ digits\ and\ write\ the\ output\ to\ out.}}
\DoxyCodeLine{02131\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Out,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{02132\ \ \ Out\ apply(Out\ out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<C>}}\ digits)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{02133\ \ \ \ \ \textcolor{keyword}{auto}\ num\_digits\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(digits.\mbox{\hyperlink{classbasic__string__view_a216bbe1b012b590698d7bb4e96d1af3f}{size}}());}
\DoxyCodeLine{02134\ \ \ \ \ \textcolor{keyword}{auto}\ separators\ =\ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<int>}}();}
\DoxyCodeLine{02135\ \ \ \ \ separators.push\_back(0);}
\DoxyCodeLine{02136\ \ \ \ \ \textcolor{keyword}{auto}\ state\ =\ initial\_state();}
\DoxyCodeLine{02137\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keywordtype}{int}\ i\ =\ next(state))\ \{}
\DoxyCodeLine{02138\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ >=\ num\_digits)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02139\ \ \ \ \ \ \ separators.push\_back(i);}
\DoxyCodeLine{02140\ \ \ \ \ \}}
\DoxyCodeLine{02141\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0,\ sep\_index\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(separators.size()\ -\/\ 1);}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \ \ \ i\ <\ num\_digits;\ ++i)\ \{}
\DoxyCodeLine{02143\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_digits\ -\/\ i\ ==\ separators[sep\_index])\ \{}
\DoxyCodeLine{02144\ \ \ \ \ \ \ \ \ out\ =}
\DoxyCodeLine{02145\ \ \ \ \ \ \ \ \ \ \ \ \ copy\_str<Char>(thousands\_sep\_.data(),}
\DoxyCodeLine{02146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ thousands\_sep\_.data()\ +\ thousands\_sep\_.size(),\ out);}
\DoxyCodeLine{02147\ \ \ \ \ \ \ \ \ -\/-\/sep\_index;}
\DoxyCodeLine{02148\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02149\ \ \ \ \ \ \ *out++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(digits[to\_unsigned(i)]);}
\DoxyCodeLine{02150\ \ \ \ \ \}}
\DoxyCodeLine{02151\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02152\ \ \ \}}
\DoxyCodeLine{02153\ \};}
\DoxyCodeLine{02154\ }
\DoxyCodeLine{02155\ \textcolor{comment}{//\ Writes\ a\ decimal\ integer\ with\ digit\ grouping.}}
\DoxyCodeLine{02156\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ UInt,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{02157\ \textcolor{keyword}{auto}\ write\_int(OutputIt\ out,\ UInt\ value,\ \textcolor{keywordtype}{unsigned}\ prefix,}
\DoxyCodeLine{02158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdigit__grouping}{digit\_grouping<Char>}}\&\ grouping)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02160\ \ \ \textcolor{keyword}{static\_assert}(std::is\_same<uint64\_or\_128\_t<UInt>,\ UInt>::value,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02161\ \ \ \textcolor{keywordtype}{int}\ num\_digits\ =\ count\_digits(value);}
\DoxyCodeLine{02162\ \ \ \textcolor{keywordtype}{char}\ digits[40];}
\DoxyCodeLine{02163\ \ \ format\_decimal(digits,\ value,\ num\_digits);}
\DoxyCodeLine{02164\ \ \ \textcolor{keywordtype}{unsigned}\ size\ =\ to\_unsigned((prefix\ !=\ 0\ ?\ 1\ :\ 0)\ +\ num\_digits\ +}
\DoxyCodeLine{02165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ grouping.count\_separators(num\_digits));}
\DoxyCodeLine{02166\ \ \ \textcolor{keywordflow}{return}\ write\_padded<align::right>(}
\DoxyCodeLine{02167\ \ \ \ \ \ \ out,\ specs,\ size,\ size,\ [\&](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (prefix\ !=\ 0)\ \{}
\DoxyCodeLine{02169\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ sign\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(prefix);}
\DoxyCodeLine{02170\ \ \ \ \ \ \ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(sign);}
\DoxyCodeLine{02171\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02172\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ grouping.apply(it,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}(digits,\ to\_unsigned(num\_digits)));}
\DoxyCodeLine{02173\ \ \ \ \ \ \ \});}
\DoxyCodeLine{02174\ \}}
\DoxyCodeLine{02175\ }
\DoxyCodeLine{02176\ \textcolor{comment}{//\ Writes\ a\ localized\ value.}}
\DoxyCodeLine{02177\ FMT\_API\ \textcolor{keyword}{auto}\ write\_loc(\mbox{\hyperlink{classappender}{appender}}\ out,\ \mbox{\hyperlink{classloc__value}{loc\_value}}\ value,}
\DoxyCodeLine{02178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<>}}\&\ specs,\ locale\_ref\ loc)\ -\/>\ bool;}
\DoxyCodeLine{02179\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{02180\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ write\_loc(OutputIt,\ \mbox{\hyperlink{classloc__value}{loc\_value}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&,}
\DoxyCodeLine{02181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ locale\_ref)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{02182\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02183\ \}}
\DoxyCodeLine{02184\ }
\DoxyCodeLine{02185\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ prefix\_append(\textcolor{keywordtype}{unsigned}\&\ prefix,\ \textcolor{keywordtype}{unsigned}\ value)\ \{}
\DoxyCodeLine{02186\ \ \ prefix\ |=\ prefix\ !=\ 0\ ?\ value\ <<\ 8\ :\ value;}
\DoxyCodeLine{02187\ \ \ prefix\ +=\ (1u\ +\ (value\ >\ 0xff\ ?\ 1\ :\ 0))\ <<\ 24;}
\DoxyCodeLine{02188\ \}}
\DoxyCodeLine{02189\ }
\DoxyCodeLine{02190\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ UInt>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structwrite__int__arg}{write\_int\_arg}}\ \{}
\DoxyCodeLine{02191\ \ \ UInt\ abs\_value;}
\DoxyCodeLine{02192\ \ \ \textcolor{keywordtype}{unsigned}\ prefix;}
\DoxyCodeLine{02193\ \};}
\DoxyCodeLine{02194\ }
\DoxyCodeLine{02195\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{02196\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ make\_write\_int\_arg(T\ value,\ sign\_t\ sign)}
\DoxyCodeLine{02197\ \ \ \ \ -\/>\ \mbox{\hyperlink{structwrite__int__arg}{write\_int\_arg<uint32\_or\_64\_or\_128\_t<T>}}>\ \{}
\DoxyCodeLine{02198\ \ \ \textcolor{keyword}{auto}\ prefix\ =\ 0u;}
\DoxyCodeLine{02199\ \ \ \textcolor{keyword}{auto}\ abs\_value\ =\ \textcolor{keyword}{static\_cast<}uint32\_or\_64\_or\_128\_t<T>\textcolor{keyword}{>}(value);}
\DoxyCodeLine{02200\ \ \ \textcolor{keywordflow}{if}\ (is\_negative(value))\ \{}
\DoxyCodeLine{02201\ \ \ \ \ prefix\ =\ 0x01000000\ |\ \textcolor{charliteral}{'-\/'};}
\DoxyCodeLine{02202\ \ \ \ \ abs\_value\ =\ 0\ -\/\ abs\_value;}
\DoxyCodeLine{02203\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02204\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ prefixes[4]\ =\ \{0,\ 0,\ 0x1000000u\ |\ \textcolor{charliteral}{'+'},}
\DoxyCodeLine{02205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0x1000000u\ |\ \textcolor{charliteral}{'\ '}\};}
\DoxyCodeLine{02206\ \ \ \ \ prefix\ =\ prefixes[sign];}
\DoxyCodeLine{02207\ \ \ \}}
\DoxyCodeLine{02208\ \ \ \textcolor{keywordflow}{return}\ \{abs\_value,\ prefix\};}
\DoxyCodeLine{02209\ \}}
\DoxyCodeLine{02210\ }
\DoxyCodeLine{02211\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char\ =\ \textcolor{keywordtype}{char}>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structloc__writer}{loc\_writer}}\ \{}
\DoxyCodeLine{02212\ \ \ buffer\_appender<Char>\ out;}
\DoxyCodeLine{02213\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs;}
\DoxyCodeLine{02214\ \ \ std::basic\_string<Char>\ sep;}
\DoxyCodeLine{02215\ \ \ std::string\ grouping;}
\DoxyCodeLine{02216\ \ \ std::basic\_string<Char>\ decimal\_point;}
\DoxyCodeLine{02217\ }
\DoxyCodeLine{02218\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(is\_\textcolor{keywordtype}{int}eger<T>::value)>}
\DoxyCodeLine{02219\ \ \ \textcolor{keyword}{auto}\ operator()(T\ value)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{02220\ \ \ \ \ \textcolor{keyword}{auto}\ arg\ =\ make\_write\_int\_arg(value,\ specs.sign);}
\DoxyCodeLine{02221\ \ \ \ \ write\_int(out,\ \textcolor{keyword}{static\_cast<}uint64\_or\_128\_t<T>\textcolor{keyword}{>}(arg.abs\_value),\ arg.prefix,}
\DoxyCodeLine{02222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ specs,\ \mbox{\hyperlink{classdigit__grouping}{digit\_grouping<Char>}}(grouping,\ sep));}
\DoxyCodeLine{02223\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02224\ \ \ \}}
\DoxyCodeLine{02225\ }
\DoxyCodeLine{02226\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(!is\_\textcolor{keywordtype}{int}eger<T>::value)>}
\DoxyCodeLine{02227\ \ \ \textcolor{keyword}{auto}\ operator()(T)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{02228\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02229\ \ \ \}}
\DoxyCodeLine{02230\ \};}
\DoxyCodeLine{02231\ }
\DoxyCodeLine{02232\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{02233\ FMT\_CONSTEXPR\ FMT\_INLINE\ \textcolor{keyword}{auto}\ write\_int(OutputIt\ out,\ \mbox{\hyperlink{structwrite__int__arg}{write\_int\_arg<T>}}\ arg,}
\DoxyCodeLine{02234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ locale\_ref)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02236\ \ \ \textcolor{keyword}{static\_assert}(std::is\_same<T,\ uint32\_or\_64\_or\_128\_t<T>>::value,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02237\ \ \ \textcolor{keyword}{auto}\ abs\_value\ =\ arg.abs\_value;}
\DoxyCodeLine{02238\ \ \ \textcolor{keyword}{auto}\ prefix\ =\ arg.prefix;}
\DoxyCodeLine{02239\ \ \ \textcolor{keywordflow}{switch}\ (specs.type)\ \{}
\DoxyCodeLine{02240\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::none:}
\DoxyCodeLine{02241\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::dec:\ \{}
\DoxyCodeLine{02242\ \ \ \ \ \textcolor{keyword}{auto}\ num\_digits\ =\ count\_digits(abs\_value);}
\DoxyCodeLine{02243\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_int(}
\DoxyCodeLine{02244\ \ \ \ \ \ \ \ \ out,\ num\_digits,\ prefix,\ specs,\ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02245\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ format\_decimal<Char>(it,\ abs\_value,\ num\_digits).end;}
\DoxyCodeLine{02246\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{02247\ \ \ \}}
\DoxyCodeLine{02248\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::hex\_lower:}
\DoxyCodeLine{02249\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::hex\_upper:\ \{}
\DoxyCodeLine{02250\ \ \ \ \ \textcolor{keywordtype}{bool}\ upper\ =\ specs.type\ ==\ presentation\_type::hex\_upper;}
\DoxyCodeLine{02251\ \ \ \ \ \textcolor{keywordflow}{if}\ (specs.alt)}
\DoxyCodeLine{02252\ \ \ \ \ \ \ prefix\_append(prefix,\ \textcolor{keywordtype}{unsigned}(upper\ ?\ \textcolor{charliteral}{'X'}\ :\ \textcolor{charliteral}{'x'})\ <<\ 8\ |\ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{02253\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_digits\ =\ count\_digits<4>(abs\_value);}
\DoxyCodeLine{02254\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_int(}
\DoxyCodeLine{02255\ \ \ \ \ \ \ \ \ out,\ num\_digits,\ prefix,\ specs,\ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02256\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ format\_uint<4,\ Char>(it,\ abs\_value,\ num\_digits,\ upper);}
\DoxyCodeLine{02257\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{02258\ \ \ \}}
\DoxyCodeLine{02259\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::bin\_lower:}
\DoxyCodeLine{02260\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::bin\_upper:\ \{}
\DoxyCodeLine{02261\ \ \ \ \ \textcolor{keywordtype}{bool}\ upper\ =\ specs.type\ ==\ presentation\_type::bin\_upper;}
\DoxyCodeLine{02262\ \ \ \ \ \textcolor{keywordflow}{if}\ (specs.alt)}
\DoxyCodeLine{02263\ \ \ \ \ \ \ prefix\_append(prefix,\ \textcolor{keywordtype}{unsigned}(upper\ ?\ \textcolor{charliteral}{'B'}\ :\ \textcolor{charliteral}{'b'})\ <<\ 8\ |\ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{02264\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_digits\ =\ count\_digits<1>(abs\_value);}
\DoxyCodeLine{02265\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_int(out,\ num\_digits,\ prefix,\ specs,}
\DoxyCodeLine{02266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ format\_uint<1,\ Char>(it,\ abs\_value,\ num\_digits);}
\DoxyCodeLine{02268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{02269\ \ \ \}}
\DoxyCodeLine{02270\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::oct:\ \{}
\DoxyCodeLine{02271\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_digits\ =\ count\_digits<3>(abs\_value);}
\DoxyCodeLine{02272\ \ \ \ \ \textcolor{comment}{//\ Octal\ prefix\ '0'\ is\ counted\ as\ a\ digit,\ so\ only\ add\ it\ if\ precision}}
\DoxyCodeLine{02273\ \ \ \ \ \textcolor{comment}{//\ is\ not\ greater\ than\ the\ number\ of\ digits.}}
\DoxyCodeLine{02274\ \ \ \ \ \textcolor{keywordflow}{if}\ (specs.alt\ \&\&\ specs.precision\ <=\ num\_digits\ \&\&\ abs\_value\ !=\ 0)}
\DoxyCodeLine{02275\ \ \ \ \ \ \ prefix\_append(prefix,\ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{02276\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_int(out,\ num\_digits,\ prefix,\ specs,}
\DoxyCodeLine{02277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ format\_uint<3,\ Char>(it,\ abs\_value,\ num\_digits);}
\DoxyCodeLine{02279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{02280\ \ \ \}}
\DoxyCodeLine{02281\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::chr:}
\DoxyCodeLine{02282\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_char(out,\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(abs\_value),\ specs);}
\DoxyCodeLine{02283\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02284\ \ \ \ \ throw\_format\_error(\textcolor{stringliteral}{"{}invalid\ format\ specifier"{}});}
\DoxyCodeLine{02285\ \ \ \}}
\DoxyCodeLine{02286\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02287\ \}}
\DoxyCodeLine{02288\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{02289\ FMT\_CONSTEXPR\ FMT\_NOINLINE\ \textcolor{keyword}{auto}\ write\_int\_noinline(}
\DoxyCodeLine{02290\ \ \ \ \ OutputIt\ out,\ \mbox{\hyperlink{structwrite__int__arg}{write\_int\_arg<T>}}\ arg,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02291\ \ \ \ \ locale\_ref\ loc)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02292\ \ \ \textcolor{keywordflow}{return}\ write\_int(out,\ arg,\ specs,\ loc);}
\DoxyCodeLine{02293\ \}}
\DoxyCodeLine{02294\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{02295\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(is\_integral<T>::value\ \&\&}
\DoxyCodeLine{02296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_same<T,\ bool>::value\ \&\&}
\DoxyCodeLine{02297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_same<OutputIt,\ buffer\_appender<Char>>::value)>}
\DoxyCodeLine{02298\ FMT\_CONSTEXPR\ FMT\_INLINE\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value,}
\DoxyCodeLine{02299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ locale\_ref\ loc)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02301\ \ \ \textcolor{keywordflow}{if}\ (specs.localized\ \&\&\ write\_loc(out,\ value,\ specs,\ loc))\ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02302\ \ \ \textcolor{keywordflow}{return}\ write\_int\_noinline(out,\ make\_write\_int\_arg(value,\ specs.sign),\ specs,}
\DoxyCodeLine{02303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ loc);}
\DoxyCodeLine{02304\ \}}
\DoxyCodeLine{02305\ \textcolor{comment}{//\ An\ inlined\ version\ of\ write\ used\ in\ format\ string\ compilation.}}
\DoxyCodeLine{02306\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{02307\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(is\_integral<T>::value\ \&\&}
\DoxyCodeLine{02308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_same<T,\ bool>::value\ \&\&}
\DoxyCodeLine{02309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_same<OutputIt,\ buffer\_appender<Char>>::value)>}
\DoxyCodeLine{02310\ FMT\_CONSTEXPR\ FMT\_INLINE\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value,}
\DoxyCodeLine{02311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ locale\_ref\ loc)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02313\ \ \ \textcolor{keywordflow}{if}\ (specs.localized\ \&\&\ write\_loc(out,\ value,\ specs,\ loc))\ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02314\ \ \ \textcolor{keywordflow}{return}\ write\_int(out,\ make\_write\_int\_arg(value,\ specs.sign),\ specs,\ loc);}
\DoxyCodeLine{02315\ \}}
\DoxyCodeLine{02316\ }
\DoxyCodeLine{02317\ \textcolor{comment}{//\ An\ output\ iterator\ that\ counts\ the\ number\ of\ objects\ written\ to\ it\ and}}
\DoxyCodeLine{02318\ \textcolor{comment}{//\ discards\ them.}}
\DoxyCodeLine{02319\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcounting__iterator}{counting\_iterator}}\ \{}
\DoxyCodeLine{02320\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{02321\ \ \ \textcolor{keywordtype}{size\_t}\ count\_;}
\DoxyCodeLine{02322\ }
\DoxyCodeLine{02323\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02324\ \ \ \textcolor{keyword}{using\ }iterator\_category\ =\ std::output\_iterator\_tag;}
\DoxyCodeLine{02325\ \ \ \textcolor{keyword}{using\ }difference\_type\ =\ std::ptrdiff\_t;}
\DoxyCodeLine{02326\ \ \ \textcolor{keyword}{using\ }pointer\ =\ void;}
\DoxyCodeLine{02327\ \ \ \textcolor{keyword}{using\ }reference\ =\ void;}
\DoxyCodeLine{02328\ \ \ FMT\_UNCHECKED\_ITERATOR(\mbox{\hyperlink{classcounting__iterator}{counting\_iterator}});}
\DoxyCodeLine{02329\ }
\DoxyCodeLine{02330\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcounting__iterator_1_1value__type}{value\_type}}\ \{}
\DoxyCodeLine{02331\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ FMT\_CONSTEXPR\ \textcolor{keywordtype}{void}\ operator=(\textcolor{keyword}{const}\ T\&)\ \{\}}
\DoxyCodeLine{02332\ \ \ \};}
\DoxyCodeLine{02333\ }
\DoxyCodeLine{02334\ \ \ FMT\_CONSTEXPR\ \mbox{\hyperlink{classcounting__iterator}{counting\_iterator}}()\ :\ count\_(0)\ \{\}}
\DoxyCodeLine{02335\ }
\DoxyCodeLine{02336\ \ \ FMT\_CONSTEXPR\ \textcolor{keywordtype}{size\_t}\ count()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ count\_;\ \}}
\DoxyCodeLine{02337\ }
\DoxyCodeLine{02338\ \ \ FMT\_CONSTEXPR\ \mbox{\hyperlink{classcounting__iterator}{counting\_iterator}}\&\ operator++()\ \{}
\DoxyCodeLine{02339\ \ \ \ \ ++count\_;}
\DoxyCodeLine{02340\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{02341\ \ \ \}}
\DoxyCodeLine{02342\ \ \ FMT\_CONSTEXPR\ \mbox{\hyperlink{classcounting__iterator}{counting\_iterator}}\ operator++(\textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{02343\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ *\textcolor{keyword}{this};}
\DoxyCodeLine{02344\ \ \ \ \ ++*\textcolor{keyword}{this};}
\DoxyCodeLine{02345\ \ \ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{02346\ \ \ \}}
\DoxyCodeLine{02347\ }
\DoxyCodeLine{02348\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{friend}\ \mbox{\hyperlink{classcounting__iterator}{counting\_iterator}}\ operator+(\mbox{\hyperlink{classcounting__iterator}{counting\_iterator}}\ it,}
\DoxyCodeLine{02349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ difference\_type\ n)\ \{}
\DoxyCodeLine{02350\ \ \ \ \ it.count\_\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(n);}
\DoxyCodeLine{02351\ \ \ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{02352\ \ \ \}}
\DoxyCodeLine{02353\ }
\DoxyCodeLine{02354\ \ \ FMT\_CONSTEXPR\ value\_type\ operator*()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \{\};\ \}}
\DoxyCodeLine{02355\ \};}
\DoxyCodeLine{02356\ }
\DoxyCodeLine{02357\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02358\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ s,}
\DoxyCodeLine{02359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02360\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structdata}{data}}\ =\ s.data();}
\DoxyCodeLine{02361\ \ \ \textcolor{keyword}{auto}\ size\ =\ s.size();}
\DoxyCodeLine{02362\ \ \ \textcolor{keywordflow}{if}\ (specs.precision\ >=\ 0\ \&\&\ to\_unsigned(specs.precision)\ <\ size)}
\DoxyCodeLine{02363\ \ \ \ \ size\ =\ code\_point\_index(s,\ to\_unsigned(specs.precision));}
\DoxyCodeLine{02364\ \ \ \textcolor{keywordtype}{bool}\ is\_debug\ =\ specs.type\ ==\ presentation\_type::debug;}
\DoxyCodeLine{02365\ \ \ \textcolor{keywordtype}{size\_t}\ width\ =\ 0;}
\DoxyCodeLine{02366\ \ \ \textcolor{keywordflow}{if}\ (specs.width\ !=\ 0)\ \{}
\DoxyCodeLine{02367\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_debug)}
\DoxyCodeLine{02368\ \ \ \ \ \ \ width\ =\ write\_escaped\_string(\mbox{\hyperlink{classcounting__iterator}{counting\_iterator}}\{\},\ s).count();}
\DoxyCodeLine{02369\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02370\ \ \ \ \ \ \ width\ =\ compute\_width(\mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}(\mbox{\hyperlink{structdata}{data}},\ size));}
\DoxyCodeLine{02371\ \ \ \}}
\DoxyCodeLine{02372\ \ \ \textcolor{keywordflow}{return}\ write\_padded(out,\ specs,\ size,\ width,}
\DoxyCodeLine{02373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_debug)\ \textcolor{keywordflow}{return}\ write\_escaped\_string(it,\ s);}
\DoxyCodeLine{02375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ copy\_str<Char>(\mbox{\hyperlink{structdata}{data}},\ \mbox{\hyperlink{structdata}{data}}\ +\ size,\ it);}
\DoxyCodeLine{02376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{02377\ \}}
\DoxyCodeLine{02378\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02379\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,}
\DoxyCodeLine{02380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view}}<type\_identity\_t<Char>>\ s,}
\DoxyCodeLine{02381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,\ locale\_ref)}
\DoxyCodeLine{02382\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02383\ \ \ \textcolor{keywordflow}{return}\ write(out,\ s,\ specs);}
\DoxyCodeLine{02384\ \}}
\DoxyCodeLine{02385\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02386\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \textcolor{keyword}{const}\ Char*\ s,}
\DoxyCodeLine{02387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,\ locale\_ref)}
\DoxyCodeLine{02388\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02389\ \ \ \textcolor{keywordflow}{return}\ specs.type\ !=\ presentation\_type::pointer}
\DoxyCodeLine{02390\ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ write(out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}(s),\ specs,\ \{\})}
\DoxyCodeLine{02391\ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ write\_ptr<Char>(out,\ bit\_cast<uintptr\_t>(s),\ \&specs);}
\DoxyCodeLine{02392\ \}}
\DoxyCodeLine{02393\ }
\DoxyCodeLine{02394\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{02395\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(is\_integral<T>::value\ \&\&}
\DoxyCodeLine{02396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_same<T,\ bool>::value\ \&\&}
\DoxyCodeLine{02397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_same<T,\ Char>::value)>}
\DoxyCodeLine{02398\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02399\ \ \ \textcolor{keyword}{auto}\ abs\_value\ =\ \textcolor{keyword}{static\_cast<}uint32\_or\_64\_or\_128\_t<T>\textcolor{keyword}{>}(value);}
\DoxyCodeLine{02400\ \ \ \textcolor{keywordtype}{bool}\ negative\ =\ is\_negative(value);}
\DoxyCodeLine{02401\ \ \ \textcolor{comment}{//\ Don't\ do\ -\/abs\_value\ since\ it\ trips\ unsigned-\/integer-\/overflow\ sanitizer.}}
\DoxyCodeLine{02402\ \ \ \textcolor{keywordflow}{if}\ (negative)\ abs\_value\ =\ \string~abs\_value\ +\ 1;}
\DoxyCodeLine{02403\ \ \ \textcolor{keywordtype}{int}\ num\_digits\ =\ count\_digits(abs\_value);}
\DoxyCodeLine{02404\ \ \ \textcolor{keyword}{auto}\ size\ =\ (negative\ ?\ 1\ :\ 0)\ +\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(num\_digits);}
\DoxyCodeLine{02405\ \ \ \textcolor{keyword}{auto}\ it\ =\ reserve(out,\ size);}
\DoxyCodeLine{02406\ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ ptr\ =\ to\_pointer<Char>(it,\ size))\ \{}
\DoxyCodeLine{02407\ \ \ \ \ \textcolor{keywordflow}{if}\ (negative)\ *ptr++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'-\/'});}
\DoxyCodeLine{02408\ \ \ \ \ format\_decimal<Char>(ptr,\ abs\_value,\ num\_digits);}
\DoxyCodeLine{02409\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02410\ \ \ \}}
\DoxyCodeLine{02411\ \ \ \textcolor{keywordflow}{if}\ (negative)\ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'-\/'});}
\DoxyCodeLine{02412\ \ \ it\ =\ format\_decimal<Char>(it,\ abs\_value,\ num\_digits).end;}
\DoxyCodeLine{02413\ \ \ \textcolor{keywordflow}{return}\ base\_iterator(out,\ it);}
\DoxyCodeLine{02414\ \}}
\DoxyCodeLine{02415\ }
\DoxyCodeLine{02416\ \textcolor{comment}{//\ A\ floating-\/point\ presentation\ format.}}
\DoxyCodeLine{02417\ \textcolor{keyword}{enum\ class}\ float\_format\ :\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \{}
\DoxyCodeLine{02418\ \ \ general,\ \ \textcolor{comment}{//\ General:\ exponent\ notation\ or\ fixed\ point\ based\ on\ magnitude.}}
\DoxyCodeLine{02419\ \ \ exp,\ \ \ \ \ \ \textcolor{comment}{//\ Exponent\ notation\ with\ the\ default\ precision\ of\ 6,\ e.g.\ 1.2e-\/3.}}
\DoxyCodeLine{02420\ \ \ fixed,\ \ \ \ \textcolor{comment}{//\ Fixed\ point\ with\ the\ default\ precision\ of\ 6,\ e.g.\ 0.0012.}}
\DoxyCodeLine{02421\ \ \ hex}
\DoxyCodeLine{02422\ \};}
\DoxyCodeLine{02423\ }
\DoxyCodeLine{02424\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structfloat__specs}{float\_specs}}\ \{}
\DoxyCodeLine{02425\ \ \ \textcolor{keywordtype}{int}\ precision;}
\DoxyCodeLine{02426\ \ \ float\_format\ format\ :\ 8;}
\DoxyCodeLine{02427\ \ \ sign\_t\ sign\ :\ 8;}
\DoxyCodeLine{02428\ \ \ \textcolor{keywordtype}{bool}\ upper\ :\ 1;}
\DoxyCodeLine{02429\ \ \ \textcolor{keywordtype}{bool}\ locale\ :\ 1;}
\DoxyCodeLine{02430\ \ \ \textcolor{keywordtype}{bool}\ binary32\ :\ 1;}
\DoxyCodeLine{02431\ \ \ \textcolor{keywordtype}{bool}\ showpoint\ :\ 1;}
\DoxyCodeLine{02432\ \};}
\DoxyCodeLine{02433\ }
\DoxyCodeLine{02434\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ErrorHandler\ =\ error\_handler,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{02435\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ parse\_float\_type\_spec(\textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ErrorHandler\&\&\ eh\ =\ \{\})}
\DoxyCodeLine{02437\ \ \ \ \ -\/>\ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\ \{}
\DoxyCodeLine{02438\ \ \ \textcolor{keyword}{auto}\ result\ =\ \mbox{\hyperlink{structfloat__specs}{float\_specs}}();}
\DoxyCodeLine{02439\ \ \ result.showpoint\ =\ specs.alt;}
\DoxyCodeLine{02440\ \ \ result.locale\ =\ specs.localized;}
\DoxyCodeLine{02441\ \ \ \textcolor{keywordflow}{switch}\ (specs.type)\ \{}
\DoxyCodeLine{02442\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::none:}
\DoxyCodeLine{02443\ \ \ \ \ result.format\ =\ float\_format::general;}
\DoxyCodeLine{02444\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02445\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::general\_upper:}
\DoxyCodeLine{02446\ \ \ \ \ result.upper\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02447\ \ \ \ \ FMT\_FALLTHROUGH;}
\DoxyCodeLine{02448\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::general\_lower:}
\DoxyCodeLine{02449\ \ \ \ \ result.format\ =\ float\_format::general;}
\DoxyCodeLine{02450\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02451\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::exp\_upper:}
\DoxyCodeLine{02452\ \ \ \ \ result.upper\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02453\ \ \ \ \ FMT\_FALLTHROUGH;}
\DoxyCodeLine{02454\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::exp\_lower:}
\DoxyCodeLine{02455\ \ \ \ \ result.format\ =\ float\_format::exp;}
\DoxyCodeLine{02456\ \ \ \ \ result.showpoint\ |=\ specs.precision\ !=\ 0;}
\DoxyCodeLine{02457\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02458\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::fixed\_upper:}
\DoxyCodeLine{02459\ \ \ \ \ result.upper\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02460\ \ \ \ \ FMT\_FALLTHROUGH;}
\DoxyCodeLine{02461\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::fixed\_lower:}
\DoxyCodeLine{02462\ \ \ \ \ result.format\ =\ float\_format::fixed;}
\DoxyCodeLine{02463\ \ \ \ \ result.showpoint\ |=\ specs.precision\ !=\ 0;}
\DoxyCodeLine{02464\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02465\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::hexfloat\_upper:}
\DoxyCodeLine{02466\ \ \ \ \ result.upper\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02467\ \ \ \ \ FMT\_FALLTHROUGH;}
\DoxyCodeLine{02468\ \ \ \textcolor{keywordflow}{case}\ presentation\_type::hexfloat\_lower:}
\DoxyCodeLine{02469\ \ \ \ \ result.format\ =\ float\_format::hex;}
\DoxyCodeLine{02470\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02471\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02472\ \ \ \ \ eh.on\_error(\textcolor{stringliteral}{"{}invalid\ format\ specifier"{}});}
\DoxyCodeLine{02473\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02474\ \ \ \}}
\DoxyCodeLine{02475\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{02476\ \}}
\DoxyCodeLine{02477\ }
\DoxyCodeLine{02478\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02479\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ write\_nonfinite(OutputIt\ out,\ \textcolor{keywordtype}{bool}\ isnan,}
\DoxyCodeLine{02480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\ specs,}
\DoxyCodeLine{02481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\&\ fspecs)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02482\ \ \ \textcolor{keyword}{auto}\ str\ =}
\DoxyCodeLine{02483\ \ \ \ \ \ \ isnan\ ?\ (fspecs.upper\ ?\ \textcolor{stringliteral}{"{}NAN"{}}\ :\ \textcolor{stringliteral}{"{}nan"{}})\ :\ (fspecs.upper\ ?\ \textcolor{stringliteral}{"{}INF"{}}\ :\ \textcolor{stringliteral}{"{}inf"{}});}
\DoxyCodeLine{02484\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ str\_size\ =\ 3;}
\DoxyCodeLine{02485\ \ \ \textcolor{keyword}{auto}\ sign\ =\ fspecs.sign;}
\DoxyCodeLine{02486\ \ \ \textcolor{keyword}{auto}\ size\ =\ str\_size\ +\ (sign\ ?\ 1\ :\ 0);}
\DoxyCodeLine{02487\ \ \ \textcolor{comment}{//\ Replace\ '0'-\/padding\ with\ space\ for\ non-\/finite\ values.}}
\DoxyCodeLine{02488\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_zero\_fill\ =}
\DoxyCodeLine{02489\ \ \ \ \ \ \ specs.fill.size()\ ==\ 1\ \&\&\ *specs.fill.data()\ ==\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'0'});}
\DoxyCodeLine{02490\ \ \ \textcolor{keywordflow}{if}\ (is\_zero\_fill)\ specs.fill[0]\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'\ '});}
\DoxyCodeLine{02491\ \ \ \textcolor{keywordflow}{return}\ write\_padded(out,\ specs,\ size,\ [=](reserve\_iterator<OutputIt>\ it)\ \{}
\DoxyCodeLine{02492\ \ \ \ \ \textcolor{keywordflow}{if}\ (sign)\ *it++\ =\ detail::sign<Char>(sign);}
\DoxyCodeLine{02493\ \ \ \ \ \textcolor{keywordflow}{return}\ copy\_str<Char>(str,\ str\ +\ str\_size,\ it);}
\DoxyCodeLine{02494\ \ \ \});}
\DoxyCodeLine{02495\ \}}
\DoxyCodeLine{02496\ }
\DoxyCodeLine{02497\ \textcolor{comment}{//\ A\ decimal\ floating-\/point\ number\ significand\ *\ pow(10,\ exp).}}
\DoxyCodeLine{02498\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structbig__decimal__fp}{big\_decimal\_fp}}\ \{}
\DoxyCodeLine{02499\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ significand;}
\DoxyCodeLine{02500\ \ \ \textcolor{keywordtype}{int}\ significand\_size;}
\DoxyCodeLine{02501\ \ \ \textcolor{keywordtype}{int}\ exponent;}
\DoxyCodeLine{02502\ \};}
\DoxyCodeLine{02503\ }
\DoxyCodeLine{02504\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ get\_significand\_size(\textcolor{keyword}{const}\ \mbox{\hyperlink{structbig__decimal__fp}{big\_decimal\_fp}}\&\ f)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{02505\ \ \ \textcolor{keywordflow}{return}\ f.significand\_size;}
\DoxyCodeLine{02506\ \}}
\DoxyCodeLine{02507\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{02508\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ get\_significand\_size(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdragonbox_1_1decimal__fp}{dragonbox::decimal\_fp<T>}}\&\ f)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{02509\ \ \ \textcolor{keywordflow}{return}\ count\_digits(f.significand);}
\DoxyCodeLine{02510\ \}}
\DoxyCodeLine{02511\ }
\DoxyCodeLine{02512\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{02513\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ write\_significand(OutputIt\ out,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ significand,}
\DoxyCodeLine{02514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ significand\_size)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02515\ \ \ \textcolor{keywordflow}{return}\ copy\_str<Char>(significand,\ significand\ +\ significand\_size,\ out);}
\DoxyCodeLine{02516\ \}}
\DoxyCodeLine{02517\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ UInt>}
\DoxyCodeLine{02518\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ write\_significand(OutputIt\ out,\ UInt\ significand,}
\DoxyCodeLine{02519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ significand\_size)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02520\ \ \ \textcolor{keywordflow}{return}\ format\_decimal<Char>(out,\ significand,\ significand\_size).end;}
\DoxyCodeLine{02521\ \}}
\DoxyCodeLine{02522\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Grouping>}
\DoxyCodeLine{02523\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ write\_significand(OutputIt\ out,\ T\ significand,}
\DoxyCodeLine{02524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ significand\_size,\ \textcolor{keywordtype}{int}\ exponent,}
\DoxyCodeLine{02525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Grouping\&\ grouping)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02526\ \ \ \textcolor{keywordflow}{if}\ (!grouping.has\_separator())\ \{}
\DoxyCodeLine{02527\ \ \ \ \ out\ =\ write\_significand<Char>(out,\ significand,\ significand\_size);}
\DoxyCodeLine{02528\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::fill\_n(out,\ exponent,\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{02529\ \ \ \}}
\DoxyCodeLine{02530\ \ \ \textcolor{keyword}{auto}\ buffer\ =\ \mbox{\hyperlink{classbasic__memory__buffer}{memory\_buffer}}();}
\DoxyCodeLine{02531\ \ \ write\_significand<char>(\mbox{\hyperlink{classappender}{appender}}(buffer),\ significand,\ significand\_size);}
\DoxyCodeLine{02532\ \ \ detail::fill\_n(\mbox{\hyperlink{classappender}{appender}}(buffer),\ exponent,\ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{02533\ \ \ \textcolor{keywordflow}{return}\ grouping.apply(out,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}(buffer.data(),\ buffer.size()));}
\DoxyCodeLine{02534\ \}}
\DoxyCodeLine{02535\ }
\DoxyCodeLine{02536\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ UInt,}
\DoxyCodeLine{02537\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(std::is\_integral<UInt>::value)>}
\DoxyCodeLine{02538\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ write\_significand(Char*\ out,\ UInt\ significand,\ \textcolor{keywordtype}{int}\ significand\_size,}
\DoxyCodeLine{02539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ integral\_size,\ Char\ decimal\_point)\ -\/>\ Char*\ \{}
\DoxyCodeLine{02540\ \ \ \textcolor{keywordflow}{if}\ (!decimal\_point)}
\DoxyCodeLine{02541\ \ \ \ \ \textcolor{keywordflow}{return}\ format\_decimal(out,\ significand,\ significand\_size).end;}
\DoxyCodeLine{02542\ \ \ out\ +=\ significand\_size\ +\ 1;}
\DoxyCodeLine{02543\ \ \ Char*\ end\ =\ out;}
\DoxyCodeLine{02544\ \ \ \textcolor{keywordtype}{int}\ floating\_size\ =\ significand\_size\ -\/\ integral\_size;}
\DoxyCodeLine{02545\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ floating\_size\ /\ 2;\ i\ >\ 0;\ -\/-\/i)\ \{}
\DoxyCodeLine{02546\ \ \ \ \ out\ -\/=\ 2;}
\DoxyCodeLine{02547\ \ \ \ \ copy2(out,\ digits2(\textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(significand\ \%\ 100)));}
\DoxyCodeLine{02548\ \ \ \ \ significand\ /=\ 100;}
\DoxyCodeLine{02549\ \ \ \}}
\DoxyCodeLine{02550\ \ \ \textcolor{keywordflow}{if}\ (floating\_size\ \%\ 2\ !=\ 0)\ \{}
\DoxyCodeLine{02551\ \ \ \ \ *-\/-\/out\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ significand\ \%\ 10);}
\DoxyCodeLine{02552\ \ \ \ \ significand\ /=\ 10;}
\DoxyCodeLine{02553\ \ \ \}}
\DoxyCodeLine{02554\ \ \ *-\/-\/out\ =\ decimal\_point;}
\DoxyCodeLine{02555\ \ \ format\_decimal(out\ -\/\ integral\_size,\ significand,\ integral\_size);}
\DoxyCodeLine{02556\ \ \ \textcolor{keywordflow}{return}\ end;}
\DoxyCodeLine{02557\ \}}
\DoxyCodeLine{02558\ }
\DoxyCodeLine{02559\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ UInt,\ \textcolor{keyword}{typename}\ Char,}
\DoxyCodeLine{02560\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(!std::is\_pointer<remove\_cvref\_t<OutputIt>>::value)>}
\DoxyCodeLine{02561\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ write\_significand(OutputIt\ out,\ UInt\ significand,}
\DoxyCodeLine{02562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ significand\_size,\ \textcolor{keywordtype}{int}\ integral\_size,}
\DoxyCodeLine{02563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Char\ decimal\_point)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02564\ \ \ \textcolor{comment}{//\ Buffer\ is\ large\ enough\ to\ hold\ digits\ (digits10\ +\ 1)\ and\ a\ decimal\ point.}}
\DoxyCodeLine{02565\ \ \ Char\ buffer[digits10<UInt>()\ +\ 2];}
\DoxyCodeLine{02566\ \ \ \textcolor{keyword}{auto}\ end\ =\ write\_significand(buffer,\ significand,\ significand\_size,}
\DoxyCodeLine{02567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ integral\_size,\ decimal\_point);}
\DoxyCodeLine{02568\ \ \ \textcolor{keywordflow}{return}\ detail::copy\_str\_noinline<Char>(buffer,\ end,\ out);}
\DoxyCodeLine{02569\ \}}
\DoxyCodeLine{02570\ }
\DoxyCodeLine{02571\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{02572\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write\_significand(OutputIt\ out,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ significand,}
\DoxyCodeLine{02573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ significand\_size,\ \textcolor{keywordtype}{int}\ integral\_size,}
\DoxyCodeLine{02574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Char\ decimal\_point)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02575\ \ \ out\ =\ detail::copy\_str\_noinline<Char>(significand,}
\DoxyCodeLine{02576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ significand\ +\ integral\_size,\ out);}
\DoxyCodeLine{02577\ \ \ \textcolor{keywordflow}{if}\ (!decimal\_point)\ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02578\ \ \ *out++\ =\ decimal\_point;}
\DoxyCodeLine{02579\ \ \ \textcolor{keywordflow}{return}\ detail::copy\_str\_noinline<Char>(significand\ +\ integral\_size,}
\DoxyCodeLine{02580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ significand\ +\ significand\_size,\ out);}
\DoxyCodeLine{02581\ \}}
\DoxyCodeLine{02582\ }
\DoxyCodeLine{02583\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Grouping>}
\DoxyCodeLine{02584\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ write\_significand(OutputIt\ out,\ T\ significand,}
\DoxyCodeLine{02585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ significand\_size,\ \textcolor{keywordtype}{int}\ integral\_size,}
\DoxyCodeLine{02586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Char\ decimal\_point,}
\DoxyCodeLine{02587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Grouping\&\ grouping)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02588\ \ \ \textcolor{keywordflow}{if}\ (!grouping.has\_separator())\ \{}
\DoxyCodeLine{02589\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_significand(out,\ significand,\ significand\_size,\ integral\_size,}
\DoxyCodeLine{02590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decimal\_point);}
\DoxyCodeLine{02591\ \ \ \}}
\DoxyCodeLine{02592\ \ \ \textcolor{keyword}{auto}\ buffer\ =\ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<Char>}}();}
\DoxyCodeLine{02593\ \ \ write\_significand(buffer\_appender<Char>(buffer),\ significand,}
\DoxyCodeLine{02594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ significand\_size,\ integral\_size,\ decimal\_point);}
\DoxyCodeLine{02595\ \ \ grouping.apply(}
\DoxyCodeLine{02596\ \ \ \ \ \ \ out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}(buffer.data(),\ to\_unsigned(integral\_size)));}
\DoxyCodeLine{02597\ \ \ \textcolor{keywordflow}{return}\ detail::copy\_str\_noinline<Char>(buffer.data()\ +\ integral\_size,}
\DoxyCodeLine{02598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.end(),\ out);}
\DoxyCodeLine{02599\ \}}
\DoxyCodeLine{02600\ }
\DoxyCodeLine{02601\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ DecimalFP,\ \textcolor{keyword}{typename}\ Char,}
\DoxyCodeLine{02602\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Grouping\ =\ \mbox{\hyperlink{classdigit__grouping}{digit\_grouping<Char>}}>}
\DoxyCodeLine{02603\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ do\_write\_float(OutputIt\ out,\ \textcolor{keyword}{const}\ DecimalFP\&\ f,}
\DoxyCodeLine{02604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\ fspecs,\ locale\_ref\ loc)}
\DoxyCodeLine{02606\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02607\ \ \ \textcolor{keyword}{auto}\ significand\ =\ f.significand;}
\DoxyCodeLine{02608\ \ \ \textcolor{keywordtype}{int}\ significand\_size\ =\ get\_significand\_size(f);}
\DoxyCodeLine{02609\ \ \ \textcolor{keyword}{const}\ Char\ zero\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(\textcolor{charliteral}{'0'});}
\DoxyCodeLine{02610\ \ \ \textcolor{keyword}{auto}\ sign\ =\ fspecs.sign;}
\DoxyCodeLine{02611\ \ \ \textcolor{keywordtype}{size\_t}\ size\ =\ to\_unsigned(significand\_size)\ +\ (sign\ ?\ 1\ :\ 0);}
\DoxyCodeLine{02612\ \ \ \textcolor{keyword}{using\ }iterator\ =\ reserve\_iterator<OutputIt>;}
\DoxyCodeLine{02613\ }
\DoxyCodeLine{02614\ \ \ Char\ decimal\_point\ =}
\DoxyCodeLine{02615\ \ \ \ \ \ \ fspecs.locale\ ?\ detail::decimal\_point<Char>(loc)\ :\ static\_cast<Char>(\textcolor{stringliteral}{'.'});}
\DoxyCodeLine{02616\ }
\DoxyCodeLine{02617\ \ \ \textcolor{keywordtype}{int}\ output\_exp\ =\ f.exponent\ +\ significand\_size\ -\/\ 1;}
\DoxyCodeLine{02618\ \ \ \textcolor{keyword}{auto}\ use\_exp\_format\ =\ [=]()\ \{}
\DoxyCodeLine{02619\ \ \ \ \ \textcolor{keywordflow}{if}\ (fspecs.format\ ==\ float\_format::exp)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02620\ \ \ \ \ \textcolor{keywordflow}{if}\ (fspecs.format\ !=\ float\_format::general)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02621\ \ \ \ \ \textcolor{comment}{//\ Use\ the\ fixed\ notation\ if\ the\ exponent\ is\ in\ [exp\_lower,\ exp\_upper),}}
\DoxyCodeLine{02622\ \ \ \ \ \textcolor{comment}{//\ e.g.\ 0.0001\ instead\ of\ 1e-\/04.\ Otherwise\ use\ the\ exponent\ notation.}}
\DoxyCodeLine{02623\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ exp\_lower\ =\ -\/4,\ exp\_upper\ =\ 16;}
\DoxyCodeLine{02624\ \ \ \ \ \textcolor{keywordflow}{return}\ output\_exp\ <\ exp\_lower\ ||}
\DoxyCodeLine{02625\ \ \ \ \ \ \ \ \ \ \ \ output\_exp\ >=\ (fspecs.precision\ >\ 0\ ?\ fspecs.precision\ :\ exp\_upper);}
\DoxyCodeLine{02626\ \ \ \};}
\DoxyCodeLine{02627\ \ \ \textcolor{keywordflow}{if}\ (use\_exp\_format())\ \{}
\DoxyCodeLine{02628\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_zeros\ =\ 0;}
\DoxyCodeLine{02629\ \ \ \ \ \textcolor{keywordflow}{if}\ (fspecs.showpoint)\ \{}
\DoxyCodeLine{02630\ \ \ \ \ \ \ num\_zeros\ =\ fspecs.precision\ -\/\ significand\_size;}
\DoxyCodeLine{02631\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_zeros\ <\ 0)\ num\_zeros\ =\ 0;}
\DoxyCodeLine{02632\ \ \ \ \ \ \ size\ +=\ to\_unsigned(num\_zeros);}
\DoxyCodeLine{02633\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (significand\_size\ ==\ 1)\ \{}
\DoxyCodeLine{02634\ \ \ \ \ \ \ decimal\_point\ =\ Char();}
\DoxyCodeLine{02635\ \ \ \ \ \}}
\DoxyCodeLine{02636\ \ \ \ \ \textcolor{keyword}{auto}\ abs\_output\_exp\ =\ output\_exp\ >=\ 0\ ?\ output\_exp\ :\ -\/output\_exp;}
\DoxyCodeLine{02637\ \ \ \ \ \textcolor{keywordtype}{int}\ exp\_digits\ =\ 2;}
\DoxyCodeLine{02638\ \ \ \ \ \textcolor{keywordflow}{if}\ (abs\_output\_exp\ >=\ 100)\ exp\_digits\ =\ abs\_output\_exp\ >=\ 1000\ ?\ 4\ :\ 3;}
\DoxyCodeLine{02639\ }
\DoxyCodeLine{02640\ \ \ \ \ size\ +=\ to\_unsigned((decimal\_point\ ?\ 1\ :\ 0)\ +\ 2\ +\ exp\_digits);}
\DoxyCodeLine{02641\ \ \ \ \ \textcolor{keywordtype}{char}\ exp\_char\ =\ fspecs.upper\ ?\ \textcolor{charliteral}{'E'}\ :\ \textcolor{charliteral}{'e'};}
\DoxyCodeLine{02642\ \ \ \ \ \textcolor{keyword}{auto}\ write\ =\ [=](iterator\ it)\ \{}
\DoxyCodeLine{02643\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sign)\ *it++\ =\ detail::sign<Char>(sign);}
\DoxyCodeLine{02644\ \ \ \ \ \ \ \textcolor{comment}{//\ Insert\ a\ decimal\ point\ after\ the\ first\ digit\ and\ add\ an\ exponent.}}
\DoxyCodeLine{02645\ \ \ \ \ \ \ it\ =\ write\_significand(it,\ significand,\ significand\_size,\ 1,}
\DoxyCodeLine{02646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decimal\_point);}
\DoxyCodeLine{02647\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_zeros\ >\ 0)\ it\ =\ detail::fill\_n(it,\ num\_zeros,\ zero);}
\DoxyCodeLine{02648\ \ \ \ \ \ \ *it++\ =\ \textcolor{keyword}{static\_cast<}Char\textcolor{keyword}{>}(exp\_char);}
\DoxyCodeLine{02649\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ write\_exponent<Char>(output\_exp,\ it);}
\DoxyCodeLine{02650\ \ \ \ \ \};}
\DoxyCodeLine{02651\ \ \ \ \ \textcolor{keywordflow}{return}\ specs.width\ >\ 0\ ?\ write\_padded<align::right>(out,\ specs,\ size,\ write)}
\DoxyCodeLine{02652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ base\_iterator(out,\ write(reserve(out,\ size)));}
\DoxyCodeLine{02653\ \ \ \}}
\DoxyCodeLine{02654\ }
\DoxyCodeLine{02655\ \ \ \textcolor{keywordtype}{int}\ exp\ =\ f.exponent\ +\ significand\_size;}
\DoxyCodeLine{02656\ \ \ \textcolor{keywordflow}{if}\ (f.exponent\ >=\ 0)\ \{}
\DoxyCodeLine{02657\ \ \ \ \ \textcolor{comment}{//\ 1234e5\ -\/>\ 123400000[.0+]}}
\DoxyCodeLine{02658\ \ \ \ \ size\ +=\ to\_unsigned(f.exponent);}
\DoxyCodeLine{02659\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_zeros\ =\ fspecs.precision\ -\/\ exp;}
\DoxyCodeLine{02660\ \ \ \ \ abort\_fuzzing\_if(num\_zeros\ >\ 5000);}
\DoxyCodeLine{02661\ \ \ \ \ \textcolor{keywordflow}{if}\ (fspecs.showpoint)\ \{}
\DoxyCodeLine{02662\ \ \ \ \ \ \ ++size;}
\DoxyCodeLine{02663\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_zeros\ <=\ 0\ \&\&\ fspecs.format\ !=\ float\_format::fixed)\ num\_zeros\ =\ 0;}
\DoxyCodeLine{02664\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_zeros\ >\ 0)\ size\ +=\ to\_unsigned(num\_zeros);}
\DoxyCodeLine{02665\ \ \ \ \ \}}
\DoxyCodeLine{02666\ \ \ \ \ \textcolor{keyword}{auto}\ grouping\ =\ Grouping(loc,\ fspecs.locale);}
\DoxyCodeLine{02667\ \ \ \ \ size\ +=\ to\_unsigned(grouping.count\_separators(exp));}
\DoxyCodeLine{02668\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_padded<align::right>(out,\ specs,\ size,\ [\&](iterator\ it)\ \{}
\DoxyCodeLine{02669\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sign)\ *it++\ =\ detail::sign<Char>(sign);}
\DoxyCodeLine{02670\ \ \ \ \ \ \ it\ =\ write\_significand<Char>(it,\ significand,\ significand\_size,}
\DoxyCodeLine{02671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f.exponent,\ grouping);}
\DoxyCodeLine{02672\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!fspecs.showpoint)\ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{02673\ \ \ \ \ \ \ *it++\ =\ decimal\_point;}
\DoxyCodeLine{02674\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ num\_zeros\ >\ 0\ ?\ detail::fill\_n(it,\ num\_zeros,\ zero)\ :\ it;}
\DoxyCodeLine{02675\ \ \ \ \ \});}
\DoxyCodeLine{02676\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (exp\ >\ 0)\ \{}
\DoxyCodeLine{02677\ \ \ \ \ \textcolor{comment}{//\ 1234e-\/2\ -\/>\ 12.34[0+]}}
\DoxyCodeLine{02678\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_zeros\ =\ fspecs.showpoint\ ?\ fspecs.precision\ -\/\ significand\_size\ :\ 0;}
\DoxyCodeLine{02679\ \ \ \ \ size\ +=\ 1\ +\ to\_unsigned(num\_zeros\ >\ 0\ ?\ num\_zeros\ :\ 0);}
\DoxyCodeLine{02680\ \ \ \ \ \textcolor{keyword}{auto}\ grouping\ =\ Grouping(loc,\ fspecs.locale);}
\DoxyCodeLine{02681\ \ \ \ \ size\ +=\ to\_unsigned(grouping.count\_separators(exp));}
\DoxyCodeLine{02682\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_padded<align::right>(out,\ specs,\ size,\ [\&](iterator\ it)\ \{}
\DoxyCodeLine{02683\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sign)\ *it++\ =\ detail::sign<Char>(sign);}
\DoxyCodeLine{02684\ \ \ \ \ \ \ it\ =\ write\_significand(it,\ significand,\ significand\_size,\ exp,}
\DoxyCodeLine{02685\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decimal\_point,\ grouping);}
\DoxyCodeLine{02686\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ num\_zeros\ >\ 0\ ?\ detail::fill\_n(it,\ num\_zeros,\ zero)\ :\ it;}
\DoxyCodeLine{02687\ \ \ \ \ \});}
\DoxyCodeLine{02688\ \ \ \}}
\DoxyCodeLine{02689\ \ \ \textcolor{comment}{//\ 1234e-\/6\ -\/>\ 0.001234}}
\DoxyCodeLine{02690\ \ \ \textcolor{keywordtype}{int}\ num\_zeros\ =\ -\/exp;}
\DoxyCodeLine{02691\ \ \ \textcolor{keywordflow}{if}\ (significand\_size\ ==\ 0\ \&\&\ fspecs.precision\ >=\ 0\ \&\&}
\DoxyCodeLine{02692\ \ \ \ \ \ \ fspecs.precision\ <\ num\_zeros)\ \{}
\DoxyCodeLine{02693\ \ \ \ \ num\_zeros\ =\ fspecs.precision;}
\DoxyCodeLine{02694\ \ \ \}}
\DoxyCodeLine{02695\ \ \ \textcolor{keywordtype}{bool}\ pointy\ =\ num\_zeros\ !=\ 0\ ||\ significand\_size\ !=\ 0\ ||\ fspecs.showpoint;}
\DoxyCodeLine{02696\ \ \ size\ +=\ 1\ +\ (pointy\ ?\ 1\ :\ 0)\ +\ to\_unsigned(num\_zeros);}
\DoxyCodeLine{02697\ \ \ \textcolor{keywordflow}{return}\ write\_padded<align::right>(out,\ specs,\ size,\ [\&](iterator\ it)\ \{}
\DoxyCodeLine{02698\ \ \ \ \ \textcolor{keywordflow}{if}\ (sign)\ *it++\ =\ detail::sign<Char>(sign);}
\DoxyCodeLine{02699\ \ \ \ \ *it++\ =\ zero;}
\DoxyCodeLine{02700\ \ \ \ \ \textcolor{keywordflow}{if}\ (!pointy)\ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{02701\ \ \ \ \ *it++\ =\ decimal\_point;}
\DoxyCodeLine{02702\ \ \ \ \ it\ =\ detail::fill\_n(it,\ num\_zeros,\ zero);}
\DoxyCodeLine{02703\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_significand<Char>(it,\ significand,\ significand\_size);}
\DoxyCodeLine{02704\ \ \ \});}
\DoxyCodeLine{02705\ \}}
\DoxyCodeLine{02706\ }
\DoxyCodeLine{02707\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfallback__digit__grouping}{fallback\_digit\_grouping}}\ \{}
\DoxyCodeLine{02708\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02709\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classfallback__digit__grouping}{fallback\_digit\_grouping}}(locale\_ref,\ \textcolor{keywordtype}{bool})\ \{\}}
\DoxyCodeLine{02710\ }
\DoxyCodeLine{02711\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ has\_separator()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{02712\ }
\DoxyCodeLine{02713\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ count\_separators(\textcolor{keywordtype}{int})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{02714\ }
\DoxyCodeLine{02715\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Out,\ \textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{02716\ \ \ \textcolor{keyword}{constexpr}\ Out\ apply(Out\ out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<C>}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{02717\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{02718\ \ \ \}}
\DoxyCodeLine{02719\ \};}
\DoxyCodeLine{02720\ }
\DoxyCodeLine{02721\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ DecimalFP,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{02722\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ write\_float(OutputIt\ out,\ \textcolor{keyword}{const}\ DecimalFP\&\ f,}
\DoxyCodeLine{02723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs,}
\DoxyCodeLine{02724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\ fspecs,\ locale\_ref\ loc)}
\DoxyCodeLine{02725\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{02726\ \ \ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())\ \{}
\DoxyCodeLine{02727\ \ \ \ \ \textcolor{keywordflow}{return}\ do\_write\_float<OutputIt,\ DecimalFP,\ Char,}
\DoxyCodeLine{02728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfallback__digit__grouping}{fallback\_digit\_grouping<Char>}}>(out,\ f,\ specs,\ fspecs,}
\DoxyCodeLine{02729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ loc);}
\DoxyCodeLine{02730\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02731\ \ \ \ \ \textcolor{keywordflow}{return}\ do\_write\_float(out,\ f,\ specs,\ fspecs,\ loc);}
\DoxyCodeLine{02732\ \ \ \}}
\DoxyCodeLine{02733\ \}}
\DoxyCodeLine{02734\ }
\DoxyCodeLine{02735\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ isnan(T\ value)\ \{}
\DoxyCodeLine{02736\ \ \ \textcolor{keywordflow}{return}\ !(value\ >=\ value);\ \ \textcolor{comment}{//\ std::isnan\ doesn't\ support\ \_\_float128.}}
\DoxyCodeLine{02737\ \}}
\DoxyCodeLine{02738\ }
\DoxyCodeLine{02739\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Enable\ =\ \textcolor{keywordtype}{void}>}
\DoxyCodeLine{02740\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structhas__isfinite}{has\_isfinite}}\ :\ std::false\_type\ \{\};}
\DoxyCodeLine{02741\ }
\DoxyCodeLine{02742\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{02743\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structhas__isfinite}{has\_isfinite}}<T,\ enable\_if\_t<sizeof(std::isfinite(T()))\ !=\ 0>>}
\DoxyCodeLine{02744\ \ \ \ \ :\ std::true\_type\ \{\};}
\DoxyCodeLine{02745\ }
\DoxyCodeLine{02746\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(std::is\_\textcolor{keywordtype}{float}ing\_po\textcolor{keywordtype}{int}<T>::value\&\&}
\DoxyCodeLine{02747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_isfinite<T>::value)>}
\DoxyCodeLine{02748\ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{bool}\ isfinite(T\ value)\ \{}
\DoxyCodeLine{02749\ \ \ \textcolor{keyword}{constexpr}\ T\ inf\ =\ T(std::numeric\_limits<double>::infinity());}
\DoxyCodeLine{02750\ \ \ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())}
\DoxyCodeLine{02751\ \ \ \ \ \textcolor{keywordflow}{return}\ !detail::isnan(value)\ \&\&\ value\ <\ inf\ \&\&\ value\ >\ -\/inf;}
\DoxyCodeLine{02752\ \ \ \textcolor{keywordflow}{return}\ std::isfinite(value);}
\DoxyCodeLine{02753\ \}}
\DoxyCodeLine{02754\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(!has\_isfinite<T>::value)>}
\DoxyCodeLine{02755\ FMT\_CONSTEXPR\ \textcolor{keywordtype}{bool}\ isfinite(T\ value)\ \{}
\DoxyCodeLine{02756\ \ \ T\ inf\ =\ T(std::numeric\_limits<double>::infinity());}
\DoxyCodeLine{02757\ \ \ \textcolor{comment}{//\ std::isfinite\ doesn't\ support\ \_\_float128.}}
\DoxyCodeLine{02758\ \ \ \textcolor{keywordflow}{return}\ !detail::isnan(value)\ \&\&\ value\ <\ inf\ \&\&\ value\ >\ -\/inf;}
\DoxyCodeLine{02759\ \}}
\DoxyCodeLine{02760\ }
\DoxyCodeLine{02761\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(is\_\textcolor{keywordtype}{float}ing\_po\textcolor{keywordtype}{int}<T>::value)>}
\DoxyCodeLine{02762\ FMT\_INLINE\ FMT\_CONSTEXPR\ \textcolor{keywordtype}{bool}\ signbit(T\ value)\ \{}
\DoxyCodeLine{02763\ \ \ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())\ \{}
\DoxyCodeLine{02764\ \textcolor{preprocessor}{\#ifdef\ \_\_cpp\_if\_constexpr}}
\DoxyCodeLine{02765\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::numeric\_limits<double>::is\_iec559)\ \{}
\DoxyCodeLine{02766\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ bits\ =\ detail::bit\_cast<uint64\_t>(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(value));}
\DoxyCodeLine{02767\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (bits\ >>\ (num\_bits<uint64\_t>()\ -\/\ 1))\ !=\ 0;}
\DoxyCodeLine{02768\ \ \ \ \ \}}
\DoxyCodeLine{02769\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02770\ \ \ \}}
\DoxyCodeLine{02771\ \ \ \textcolor{keywordflow}{return}\ std::signbit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(value));}
\DoxyCodeLine{02772\ \}}
\DoxyCodeLine{02773\ }
\DoxyCodeLine{02774\ \textcolor{keyword}{enum\ class}\ round\_direction\ \{\ unknown,\ up,\ down\ \};}
\DoxyCodeLine{02775\ }
\DoxyCodeLine{02776\ \textcolor{comment}{//\ Given\ the\ divisor\ (normally\ a\ power\ of\ 10),\ the\ remainder\ =\ v\ \%\ divisor\ for}}
\DoxyCodeLine{02777\ \textcolor{comment}{//\ some\ number\ v\ and\ the\ error,\ returns\ whether\ v\ should\ be\ rounded\ up,\ down,\ or}}
\DoxyCodeLine{02778\ \textcolor{comment}{//\ whether\ the\ rounding\ direction\ can't\ be\ determined\ due\ to\ error.}}
\DoxyCodeLine{02779\ \textcolor{comment}{//\ error\ should\ be\ less\ than\ divisor\ /\ 2.}}
\DoxyCodeLine{02780\ FMT\_CONSTEXPR\ \textcolor{keyword}{inline}\ round\_direction\ get\_round\_direction(uint64\_t\ divisor,}
\DoxyCodeLine{02781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint64\_t\ remainder,}
\DoxyCodeLine{02782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint64\_t\ error)\ \{}
\DoxyCodeLine{02783\ \ \ FMT\_ASSERT(remainder\ <\ divisor,\ \textcolor{stringliteral}{"{}"{}});\ \ \textcolor{comment}{//\ divisor\ -\/\ remainder\ won't\ overflow.}}
\DoxyCodeLine{02784\ \ \ FMT\_ASSERT(error\ <\ divisor,\ \textcolor{stringliteral}{"{}"{}});\ \ \ \ \ \ \textcolor{comment}{//\ divisor\ -\/\ error\ won't\ overflow.}}
\DoxyCodeLine{02785\ \ \ FMT\_ASSERT(error\ <\ divisor\ -\/\ error,\ \textcolor{stringliteral}{"{}"{}});\ \ \textcolor{comment}{//\ error\ *\ 2\ won't\ overflow.}}
\DoxyCodeLine{02786\ \ \ \textcolor{comment}{//\ Round\ down\ if\ (remainder\ +\ error)\ *\ 2\ <=\ divisor.}}
\DoxyCodeLine{02787\ \ \ \textcolor{keywordflow}{if}\ (remainder\ <=\ divisor\ -\/\ remainder\ \&\&\ error\ *\ 2\ <=\ divisor\ -\/\ remainder\ *\ 2)}
\DoxyCodeLine{02788\ \ \ \ \ \textcolor{keywordflow}{return}\ round\_direction::down;}
\DoxyCodeLine{02789\ \ \ \textcolor{comment}{//\ Round\ up\ if\ (remainder\ -\/\ error)\ *\ 2\ >=\ divisor.}}
\DoxyCodeLine{02790\ \ \ \textcolor{keywordflow}{if}\ (remainder\ >=\ error\ \&\&}
\DoxyCodeLine{02791\ \ \ \ \ \ \ remainder\ -\/\ error\ >=\ divisor\ -\/\ (remainder\ -\/\ error))\ \{}
\DoxyCodeLine{02792\ \ \ \ \ \textcolor{keywordflow}{return}\ round\_direction::up;}
\DoxyCodeLine{02793\ \ \ \}}
\DoxyCodeLine{02794\ \ \ \textcolor{keywordflow}{return}\ round\_direction::unknown;}
\DoxyCodeLine{02795\ \}}
\DoxyCodeLine{02796\ }
\DoxyCodeLine{02797\ \textcolor{keyword}{namespace\ }digits\ \{}
\DoxyCodeLine{02798\ \textcolor{keyword}{enum}\ result\ \{}
\DoxyCodeLine{02799\ \ \ more,\ \ \textcolor{comment}{//\ Generate\ more\ digits.}}
\DoxyCodeLine{02800\ \ \ done,\ \ \textcolor{comment}{//\ Done\ generating\ digits.}}
\DoxyCodeLine{02801\ \ \ error\ \ \textcolor{comment}{//\ Digit\ generation\ cancelled\ due\ to\ an\ error.}}
\DoxyCodeLine{02802\ \};}
\DoxyCodeLine{02803\ \}}
\DoxyCodeLine{02804\ }
\DoxyCodeLine{02805\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structgen__digits__handler}{gen\_digits\_handler}}\ \{}
\DoxyCodeLine{02806\ \ \ \textcolor{keywordtype}{char}*\ buf;}
\DoxyCodeLine{02807\ \ \ \textcolor{keywordtype}{int}\ size;}
\DoxyCodeLine{02808\ \ \ \textcolor{keywordtype}{int}\ precision;}
\DoxyCodeLine{02809\ \ \ \textcolor{keywordtype}{int}\ exp10;}
\DoxyCodeLine{02810\ \ \ \textcolor{keywordtype}{bool}\ fixed;}
\DoxyCodeLine{02811\ }
\DoxyCodeLine{02812\ \ \ FMT\_CONSTEXPR\ digits::result\ on\_digit(\textcolor{keywordtype}{char}\ digit,\ uint64\_t\ divisor,}
\DoxyCodeLine{02813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint64\_t\ remainder,\ uint64\_t\ error,}
\DoxyCodeLine{02814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ integral)\ \{}
\DoxyCodeLine{02815\ \ \ \ \ FMT\_ASSERT(remainder\ <\ divisor,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02816\ \ \ \ \ buf[size++]\ =\ digit;}
\DoxyCodeLine{02817\ \ \ \ \ \textcolor{keywordflow}{if}\ (!integral\ \&\&\ error\ >=\ remainder)\ \textcolor{keywordflow}{return}\ digits::error;}
\DoxyCodeLine{02818\ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ <\ precision)\ \textcolor{keywordflow}{return}\ digits::more;}
\DoxyCodeLine{02819\ \ \ \ \ \textcolor{keywordflow}{if}\ (!integral)\ \{}
\DoxyCodeLine{02820\ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ error\ *\ 2\ <\ divisor\ with\ overflow\ prevention.}}
\DoxyCodeLine{02821\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ check\ is\ not\ needed\ for\ the\ integral\ part\ because\ error\ =\ 1}}
\DoxyCodeLine{02822\ \ \ \ \ \ \ \textcolor{comment}{//\ and\ divisor\ >\ (1\ <<\ 32)\ there.}}
\DoxyCodeLine{02823\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ >=\ divisor\ ||\ error\ >=\ divisor\ -\/\ error)\ \textcolor{keywordflow}{return}\ digits::error;}
\DoxyCodeLine{02824\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02825\ \ \ \ \ \ \ FMT\_ASSERT(error\ ==\ 1\ \&\&\ divisor\ >\ 2,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02826\ \ \ \ \ \}}
\DoxyCodeLine{02827\ \ \ \ \ \textcolor{keyword}{auto}\ dir\ =\ get\_round\_direction(divisor,\ remainder,\ error);}
\DoxyCodeLine{02828\ \ \ \ \ \textcolor{keywordflow}{if}\ (dir\ !=\ round\_direction::up)}
\DoxyCodeLine{02829\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ dir\ ==\ round\_direction::down\ ?\ digits::done\ :\ digits::error;}
\DoxyCodeLine{02830\ \ \ \ \ ++buf[size\ -\/\ 1];}
\DoxyCodeLine{02831\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ size\ -\/\ 1;\ i\ >\ 0\ \&\&\ buf[i]\ >\ \textcolor{charliteral}{'9'};\ -\/-\/i)\ \{}
\DoxyCodeLine{02832\ \ \ \ \ \ \ buf[i]\ =\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{02833\ \ \ \ \ \ \ ++buf[i\ -\/\ 1];}
\DoxyCodeLine{02834\ \ \ \ \ \}}
\DoxyCodeLine{02835\ \ \ \ \ \textcolor{keywordflow}{if}\ (buf[0]\ >\ \textcolor{charliteral}{'9'})\ \{}
\DoxyCodeLine{02836\ \ \ \ \ \ \ buf[0]\ =\ \textcolor{charliteral}{'1'};}
\DoxyCodeLine{02837\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fixed)}
\DoxyCodeLine{02838\ \ \ \ \ \ \ \ \ buf[size++]\ =\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{02839\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02840\ \ \ \ \ \ \ \ \ ++exp10;}
\DoxyCodeLine{02841\ \ \ \ \ \}}
\DoxyCodeLine{02842\ \ \ \ \ \textcolor{keywordflow}{return}\ digits::done;}
\DoxyCodeLine{02843\ \ \ \}}
\DoxyCodeLine{02844\ \};}
\DoxyCodeLine{02845\ }
\DoxyCodeLine{02846\ \textcolor{keyword}{inline}\ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ adjust\_precision(\textcolor{keywordtype}{int}\&\ precision,\ \textcolor{keywordtype}{int}\ exp10)\ \{}
\DoxyCodeLine{02847\ \ \ \textcolor{comment}{//\ Adjust\ fixed\ precision\ by\ exponent\ because\ it\ is\ relative\ to\ decimal}}
\DoxyCodeLine{02848\ \ \ \textcolor{comment}{//\ point.}}
\DoxyCodeLine{02849\ \ \ \textcolor{keywordflow}{if}\ (exp10\ >\ 0\ \&\&\ precision\ >\ max\_value<int>()\ -\/\ exp10)}
\DoxyCodeLine{02850\ \ \ \ \ FMT\_THROW(\mbox{\hyperlink{classformat__error}{format\_error}}(\textcolor{stringliteral}{"{}number\ is\ too\ big"{}}));}
\DoxyCodeLine{02851\ \ \ precision\ +=\ exp10;}
\DoxyCodeLine{02852\ \}}
\DoxyCodeLine{02853\ }
\DoxyCodeLine{02854\ \textcolor{comment}{//\ Generates\ output\ using\ the\ Grisu\ digit-\/gen\ algorithm.}}
\DoxyCodeLine{02855\ \textcolor{comment}{//\ error:\ the\ size\ of\ the\ region\ (lower,\ upper)\ outside\ of\ which\ numbers}}
\DoxyCodeLine{02856\ \textcolor{comment}{//\ definitely\ do\ not\ round\ to\ value\ (Delta\ in\ Grisu3).}}
\DoxyCodeLine{02857\ FMT\_INLINE\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ grisu\_gen\_digits(\mbox{\hyperlink{structbasic__fp}{fp}}\ value,\ uint64\_t\ error,}
\DoxyCodeLine{02858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\&\ exp,}
\DoxyCodeLine{02859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structgen__digits__handler}{gen\_digits\_handler}}\&\ handler)}
\DoxyCodeLine{02860\ \ \ \ \ -\/>\ digits::result\ \{}
\DoxyCodeLine{02861\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structbasic__fp}{fp}}\ one(1ULL\ <<\ -\/value.e,\ value.e);}
\DoxyCodeLine{02862\ \ \ \textcolor{comment}{//\ The\ integral\ part\ of\ scaled\ value\ (p1\ in\ Grisu)\ =\ value\ /\ one.\ It\ cannot\ be}}
\DoxyCodeLine{02863\ \ \ \textcolor{comment}{//\ zero\ because\ it\ contains\ a\ product\ of\ two\ 64-\/bit\ numbers\ with\ MSB\ set\ (due}}
\DoxyCodeLine{02864\ \ \ \textcolor{comment}{//\ to\ normalization)\ -\/\ 1,\ shifted\ right\ by\ at\ most\ 60\ bits.}}
\DoxyCodeLine{02865\ \ \ \textcolor{keyword}{auto}\ integral\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(value.f\ >>\ -\/one.e);}
\DoxyCodeLine{02866\ \ \ FMT\_ASSERT(integral\ !=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02867\ \ \ FMT\_ASSERT(integral\ ==\ value.f\ >>\ -\/one.e,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02868\ \ \ \textcolor{comment}{//\ The\ fractional\ part\ of\ scaled\ value\ (p2\ in\ Grisu)\ c\ =\ value\ \%\ one.}}
\DoxyCodeLine{02869\ \ \ uint64\_t\ fractional\ =\ value.f\ \&\ (one.f\ -\/\ 1);}
\DoxyCodeLine{02870\ \ \ exp\ =\ count\_digits(integral);\ \ \textcolor{comment}{//\ kappa\ in\ Grisu.}}
\DoxyCodeLine{02871\ \ \ \textcolor{comment}{//\ Non-\/fixed\ formats\ require\ at\ least\ one\ digit\ and\ no\ precision\ adjustment.}}
\DoxyCodeLine{02872\ \ \ \textcolor{keywordflow}{if}\ (handler.fixed)\ \{}
\DoxyCodeLine{02873\ \ \ \ \ adjust\_precision(handler.precision,\ exp\ +\ handler.exp10);}
\DoxyCodeLine{02874\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ precision\ is\ satisfied\ just\ by\ leading\ zeros,\ e.g.}}
\DoxyCodeLine{02875\ \ \ \ \ \textcolor{comment}{//\ format("{}\{:.2f\}"{},\ 0.001)\ gives\ "{}0.00"{}\ without\ generating\ any\ digits.}}
\DoxyCodeLine{02876\ \ \ \ \ \textcolor{keywordflow}{if}\ (handler.precision\ <=\ 0)\ \{}
\DoxyCodeLine{02877\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (handler.precision\ <\ 0)\ \textcolor{keywordflow}{return}\ digits::done;}
\DoxyCodeLine{02878\ \ \ \ \ \ \ \textcolor{comment}{//\ Divide\ by\ 10\ to\ prevent\ overflow.}}
\DoxyCodeLine{02879\ \ \ \ \ \ \ uint64\_t\ divisor\ =\ data::power\_of\_10\_64[exp\ -\/\ 1]\ <<\ -\/one.e;}
\DoxyCodeLine{02880\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ dir\ =\ get\_round\_direction(divisor,\ value.f\ /\ 10,\ error\ *\ 10);}
\DoxyCodeLine{02881\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dir\ ==\ round\_direction::unknown)\ \textcolor{keywordflow}{return}\ digits::error;}
\DoxyCodeLine{02882\ \ \ \ \ \ \ handler.buf[handler.size++]\ =\ dir\ ==\ round\_direction::up\ ?\ \textcolor{charliteral}{'1'}\ :\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{02883\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ digits::done;}
\DoxyCodeLine{02884\ \ \ \ \ \}}
\DoxyCodeLine{02885\ \ \ \}}
\DoxyCodeLine{02886\ \ \ \textcolor{comment}{//\ Generate\ digits\ for\ the\ integral\ part.\ This\ can\ produce\ up\ to\ 10\ digits.}}
\DoxyCodeLine{02887\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{02888\ \ \ \ \ uint32\_t\ digit\ =\ 0;}
\DoxyCodeLine{02889\ \ \ \ \ \textcolor{keyword}{auto}\ divmod\_integral\ =\ [\&](uint32\_t\ divisor)\ \{}
\DoxyCodeLine{02890\ \ \ \ \ \ \ digit\ =\ integral\ /\ divisor;}
\DoxyCodeLine{02891\ \ \ \ \ \ \ integral\ \%=\ divisor;}
\DoxyCodeLine{02892\ \ \ \ \ \};}
\DoxyCodeLine{02893\ \ \ \ \ \textcolor{comment}{//\ This\ optimization\ by\ Milo\ Yip\ reduces\ the\ number\ of\ integer\ divisions\ by}}
\DoxyCodeLine{02894\ \ \ \ \ \textcolor{comment}{//\ one\ per\ iteration.}}
\DoxyCodeLine{02895\ \ \ \ \ \textcolor{keywordflow}{switch}\ (exp)\ \{}
\DoxyCodeLine{02896\ \ \ \ \ \textcolor{keywordflow}{case}\ 10:}
\DoxyCodeLine{02897\ \ \ \ \ \ \ divmod\_integral(1000000000);}
\DoxyCodeLine{02898\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02899\ \ \ \ \ \textcolor{keywordflow}{case}\ 9:}
\DoxyCodeLine{02900\ \ \ \ \ \ \ divmod\_integral(100000000);}
\DoxyCodeLine{02901\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02902\ \ \ \ \ \textcolor{keywordflow}{case}\ 8:}
\DoxyCodeLine{02903\ \ \ \ \ \ \ divmod\_integral(10000000);}
\DoxyCodeLine{02904\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02905\ \ \ \ \ \textcolor{keywordflow}{case}\ 7:}
\DoxyCodeLine{02906\ \ \ \ \ \ \ divmod\_integral(1000000);}
\DoxyCodeLine{02907\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02908\ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{02909\ \ \ \ \ \ \ divmod\_integral(100000);}
\DoxyCodeLine{02910\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02911\ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{02912\ \ \ \ \ \ \ divmod\_integral(10000);}
\DoxyCodeLine{02913\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02914\ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{02915\ \ \ \ \ \ \ divmod\_integral(1000);}
\DoxyCodeLine{02916\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02917\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{02918\ \ \ \ \ \ \ divmod\_integral(100);}
\DoxyCodeLine{02919\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02920\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{02921\ \ \ \ \ \ \ divmod\_integral(10);}
\DoxyCodeLine{02922\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02923\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{02924\ \ \ \ \ \ \ digit\ =\ integral;}
\DoxyCodeLine{02925\ \ \ \ \ \ \ integral\ =\ 0;}
\DoxyCodeLine{02926\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02927\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02928\ \ \ \ \ \ \ FMT\_ASSERT(\textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}invalid\ number\ of\ digits"{}});}
\DoxyCodeLine{02929\ \ \ \ \ \}}
\DoxyCodeLine{02930\ \ \ \ \ -\/-\/exp;}
\DoxyCodeLine{02931\ \ \ \ \ \textcolor{keyword}{auto}\ remainder\ =\ (\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(integral)\ <<\ -\/one.e)\ +\ fractional;}
\DoxyCodeLine{02932\ \ \ \ \ \textcolor{keyword}{auto}\ result\ =\ handler.on\_digit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ digit),}
\DoxyCodeLine{02933\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data::power\_of\_10\_64[exp]\ <<\ -\/one.e,}
\DoxyCodeLine{02934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remainder,\ error,\ \textcolor{keyword}{true});}
\DoxyCodeLine{02935\ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ !=\ digits::more)\ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{02936\ \ \ \}\ \textcolor{keywordflow}{while}\ (exp\ >\ 0);}
\DoxyCodeLine{02937\ \ \ \textcolor{comment}{//\ Generate\ digits\ for\ the\ fractional\ part.}}
\DoxyCodeLine{02938\ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{02939\ \ \ \ \ fractional\ *=\ 10;}
\DoxyCodeLine{02940\ \ \ \ \ error\ *=\ 10;}
\DoxyCodeLine{02941\ \ \ \ \ \textcolor{keywordtype}{char}\ digit\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ (fractional\ >>\ -\/one.e));}
\DoxyCodeLine{02942\ \ \ \ \ fractional\ \&=\ one.f\ -\/\ 1;}
\DoxyCodeLine{02943\ \ \ \ \ -\/-\/exp;}
\DoxyCodeLine{02944\ \ \ \ \ \textcolor{keyword}{auto}\ result\ =\ handler.on\_digit(digit,\ one.f,\ fractional,\ error,\ \textcolor{keyword}{false});}
\DoxyCodeLine{02945\ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ !=\ digits::more)\ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{02946\ \ \ \}}
\DoxyCodeLine{02947\ \}}
\DoxyCodeLine{02948\ }
\DoxyCodeLine{02949\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classbigint}{bigint}}\ \{}
\DoxyCodeLine{02950\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{02951\ \ \ \textcolor{comment}{//\ A\ bigint\ is\ stored\ as\ an\ array\ of\ bigits\ (big\ digits),\ with\ bigit\ at\ index}}
\DoxyCodeLine{02952\ \ \ \textcolor{comment}{//\ 0\ being\ the\ least\ significant\ one.}}
\DoxyCodeLine{02953\ \ \ \textcolor{keyword}{using\ }bigit\ =\ uint32\_t;}
\DoxyCodeLine{02954\ \ \ \textcolor{keyword}{using\ }double\_bigit\ =\ uint64\_t;}
\DoxyCodeLine{02955\ \ \ \textcolor{keyword}{enum}\ \{\ bigits\_capacity\ =\ 32\ \};}
\DoxyCodeLine{02956\ \ \ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<bigit,\ bigits\_capacity>}}\ bigits\_;}
\DoxyCodeLine{02957\ \ \ \textcolor{keywordtype}{int}\ exp\_;}
\DoxyCodeLine{02958\ }
\DoxyCodeLine{02959\ \ \ FMT\_CONSTEXPR20\ bigit\ operator[](\textcolor{keywordtype}{int}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{02960\ \ \ \ \ \textcolor{keywordflow}{return}\ bigits\_[to\_unsigned(index)];}
\DoxyCodeLine{02961\ \ \ \}}
\DoxyCodeLine{02962\ \ \ FMT\_CONSTEXPR20\ bigit\&\ operator[](\textcolor{keywordtype}{int}\ index)\ \{}
\DoxyCodeLine{02963\ \ \ \ \ \textcolor{keywordflow}{return}\ bigits\_[to\_unsigned(index)];}
\DoxyCodeLine{02964\ \ \ \}}
\DoxyCodeLine{02965\ }
\DoxyCodeLine{02966\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ bigit\_bits\ =\ num\_bits<bigit>();}
\DoxyCodeLine{02967\ }
\DoxyCodeLine{02968\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<\mbox{\hyperlink{classbigint}{bigint}}>;}
\DoxyCodeLine{02969\ }
\DoxyCodeLine{02970\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ subtract\_bigits(\textcolor{keywordtype}{int}\ index,\ bigit\ other,\ bigit\&\ borrow)\ \{}
\DoxyCodeLine{02971\ \ \ \ \ \textcolor{keyword}{auto}\ result\ =\ \textcolor{keyword}{static\_cast<}double\_bigit\textcolor{keyword}{>}((*this)[index])\ -\/\ other\ -\/\ borrow;}
\DoxyCodeLine{02972\ \ \ \ \ (*this)[index]\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(result);}
\DoxyCodeLine{02973\ \ \ \ \ borrow\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(result\ >>\ (bigit\_bits\ *\ 2\ -\/\ 1));}
\DoxyCodeLine{02974\ \ \ \}}
\DoxyCodeLine{02975\ }
\DoxyCodeLine{02976\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ remove\_leading\_zeros()\ \{}
\DoxyCodeLine{02977\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_bigits\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}())\ -\/\ 1;}
\DoxyCodeLine{02978\ \ \ \ \ \textcolor{keywordflow}{while}\ (num\_bigits\ >\ 0\ \&\&\ (*\textcolor{keyword}{this})[num\_bigits]\ ==\ 0)\ -\/-\/num\_bigits;}
\DoxyCodeLine{02979\ \ \ \ \ bigits\_.\mbox{\hyperlink{classbasic__memory__buffer_a153c47788d6d1a76ec97780748755ea1}{resize}}(to\_unsigned(num\_bigits\ +\ 1));}
\DoxyCodeLine{02980\ \ \ \}}
\DoxyCodeLine{02981\ }
\DoxyCodeLine{02982\ \ \ \textcolor{comment}{//\ Computes\ *this\ -\/=\ other\ assuming\ aligned\ bigints\ and\ *this\ >=\ other.}}
\DoxyCodeLine{02983\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ subtract\_aligned(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ other)\ \{}
\DoxyCodeLine{02984\ \ \ \ \ FMT\_ASSERT(other.exp\_\ >=\ exp\_,\ \textcolor{stringliteral}{"{}unaligned\ bigints"{}});}
\DoxyCodeLine{02985\ \ \ \ \ FMT\_ASSERT(compare(*\textcolor{keyword}{this},\ other)\ >=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02986\ \ \ \ \ bigit\ borrow\ =\ 0;}
\DoxyCodeLine{02987\ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ other.exp\_\ -\/\ exp\_;}
\DoxyCodeLine{02988\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ j\ =\ 0,\ n\ =\ other.bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}();\ j\ !=\ n;\ ++i,\ ++j)}
\DoxyCodeLine{02989\ \ \ \ \ \ \ subtract\_bigits(i,\ other.bigits\_[j],\ borrow);}
\DoxyCodeLine{02990\ \ \ \ \ \textcolor{keywordflow}{while}\ (borrow\ >\ 0)\ subtract\_bigits(i,\ 0,\ borrow);}
\DoxyCodeLine{02991\ \ \ \ \ remove\_leading\_zeros();}
\DoxyCodeLine{02992\ \ \ \}}
\DoxyCodeLine{02993\ }
\DoxyCodeLine{02994\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ multiply(uint32\_t\ value)\ \{}
\DoxyCodeLine{02995\ \ \ \ \ \textcolor{keyword}{const}\ double\_bigit\ wide\_value\ =\ value;}
\DoxyCodeLine{02996\ \ \ \ \ bigit\ carry\ =\ 0;}
\DoxyCodeLine{02997\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0,\ n\ =\ bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}();\ i\ <\ n;\ ++i)\ \{}
\DoxyCodeLine{02998\ \ \ \ \ \ \ double\_bigit\ result\ =\ bigits\_[i]\ *\ wide\_value\ +\ carry;}
\DoxyCodeLine{02999\ \ \ \ \ \ \ bigits\_[i]\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(result);}
\DoxyCodeLine{03000\ \ \ \ \ \ \ carry\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(result\ >>\ bigit\_bits);}
\DoxyCodeLine{03001\ \ \ \ \ \}}
\DoxyCodeLine{03002\ \ \ \ \ \textcolor{keywordflow}{if}\ (carry\ !=\ 0)\ bigits\_.push\_back(carry);}
\DoxyCodeLine{03003\ \ \ \}}
\DoxyCodeLine{03004\ }
\DoxyCodeLine{03005\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ UInt,\ FMT\_ENABLE\_IF(std::is\_same<UInt,\ u\textcolor{keywordtype}{int}64\_t>::value\ ||}
\DoxyCodeLine{03006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_same<UInt,\ u\textcolor{keywordtype}{int}128\_t>::value)>}
\DoxyCodeLine{03007\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ multiply(UInt\ value)\ \{}
\DoxyCodeLine{03008\ \ \ \ \ \textcolor{keyword}{using\ }half\_uint\ =}
\DoxyCodeLine{03009\ \ \ \ \ \ \ \ \ conditional\_t<std::is\_same<UInt,\ uint128\_t>::value,\ uint64\_t,\ uint32\_t>;}
\DoxyCodeLine{03010\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shift\ =\ num\_bits<half\_uint>()\ -\/\ bigit\_bits;}
\DoxyCodeLine{03011\ \ \ \ \ \textcolor{keyword}{const}\ UInt\ lower\ =\ \textcolor{keyword}{static\_cast<}half\_uint\textcolor{keyword}{>}(value);}
\DoxyCodeLine{03012\ \ \ \ \ \textcolor{keyword}{const}\ UInt\ upper\ =\ value\ >>\ num\_bits<half\_uint>();}
\DoxyCodeLine{03013\ \ \ \ \ UInt\ carry\ =\ 0;}
\DoxyCodeLine{03014\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0,\ n\ =\ bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}();\ i\ <\ n;\ ++i)\ \{}
\DoxyCodeLine{03015\ \ \ \ \ \ \ UInt\ result\ =\ lower\ *\ bigits\_[i]\ +\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(carry);}
\DoxyCodeLine{03016\ \ \ \ \ \ \ carry\ =\ (upper\ *\ bigits\_[i]\ <<\ shift)\ +\ (result\ >>\ bigit\_bits)\ +}
\DoxyCodeLine{03017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (carry\ >>\ bigit\_bits);}
\DoxyCodeLine{03018\ \ \ \ \ \ \ bigits\_[i]\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(result);}
\DoxyCodeLine{03019\ \ \ \ \ \}}
\DoxyCodeLine{03020\ \ \ \ \ \textcolor{keywordflow}{while}\ (carry\ !=\ 0)\ \{}
\DoxyCodeLine{03021\ \ \ \ \ \ \ bigits\_.push\_back(\textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(carry));}
\DoxyCodeLine{03022\ \ \ \ \ \ \ carry\ >>=\ bigit\_bits;}
\DoxyCodeLine{03023\ \ \ \ \ \}}
\DoxyCodeLine{03024\ \ \ \}}
\DoxyCodeLine{03025\ }
\DoxyCodeLine{03026\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ UInt,\ FMT\_ENABLE\_IF(std::is\_same<UInt,\ u\textcolor{keywordtype}{int}64\_t>::value\ ||}
\DoxyCodeLine{03027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_same<UInt,\ u\textcolor{keywordtype}{int}128\_t>::value)>}
\DoxyCodeLine{03028\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ assign(UInt\ n)\ \{}
\DoxyCodeLine{03029\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ num\_bigits\ =\ 0;}
\DoxyCodeLine{03030\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03031\ \ \ \ \ \ \ bigits\_[num\_bigits++]\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(n);}
\DoxyCodeLine{03032\ \ \ \ \ \ \ n\ >>=\ bigit\_bits;}
\DoxyCodeLine{03033\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (n\ !=\ 0);}
\DoxyCodeLine{03034\ \ \ \ \ bigits\_.\mbox{\hyperlink{classbasic__memory__buffer_a153c47788d6d1a76ec97780748755ea1}{resize}}(num\_bigits);}
\DoxyCodeLine{03035\ \ \ \ \ exp\_\ =\ 0;}
\DoxyCodeLine{03036\ \ \ \}}
\DoxyCodeLine{03037\ }
\DoxyCodeLine{03038\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{03039\ \ \ FMT\_CONSTEXPR20\ \mbox{\hyperlink{classbigint}{bigint}}()\ :\ exp\_(0)\ \{\}}
\DoxyCodeLine{03040\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classbigint}{bigint}}(uint64\_t\ n)\ \{\ assign(n);\ \}}
\DoxyCodeLine{03041\ }
\DoxyCodeLine{03042\ \ \ \mbox{\hyperlink{classbigint}{bigint}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{03043\ \ \ \textcolor{keywordtype}{void}\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{03044\ }
\DoxyCodeLine{03045\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ assign(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ other)\ \{}
\DoxyCodeLine{03046\ \ \ \ \ \textcolor{keyword}{auto}\ size\ =\ other.bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}();}
\DoxyCodeLine{03047\ \ \ \ \ bigits\_.\mbox{\hyperlink{classbasic__memory__buffer_a153c47788d6d1a76ec97780748755ea1}{resize}}(size);}
\DoxyCodeLine{03048\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structdata}{data}}\ =\ other.bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_aeb33e0a2d2be2bbca9e0236c148089c8}{data}}();}
\DoxyCodeLine{03049\ \ \ \ \ std::copy(\mbox{\hyperlink{structdata}{data}},\ \mbox{\hyperlink{structdata}{data}}\ +\ size,\ make\_checked(bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_aeb33e0a2d2be2bbca9e0236c148089c8}{data}}(),\ size));}
\DoxyCodeLine{03050\ \ \ \ \ exp\_\ =\ other.exp\_;}
\DoxyCodeLine{03051\ \ \ \}}
\DoxyCodeLine{03052\ }
\DoxyCodeLine{03053\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Int>\ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ operator=(Int\ n)\ \{}
\DoxyCodeLine{03054\ \ \ \ \ FMT\_ASSERT(n\ >\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03055\ \ \ \ \ assign(uint64\_or\_128\_t<Int>(n));}
\DoxyCodeLine{03056\ \ \ \}}
\DoxyCodeLine{03057\ }
\DoxyCodeLine{03058\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{int}\ num\_bigits()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{03059\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}())\ +\ exp\_;}
\DoxyCodeLine{03060\ \ \ \}}
\DoxyCodeLine{03061\ }
\DoxyCodeLine{03062\ \ \ FMT\_NOINLINE\ FMT\_CONSTEXPR20\ \mbox{\hyperlink{classbigint}{bigint}}\&\ operator<<=(\textcolor{keywordtype}{int}\ shift)\ \{}
\DoxyCodeLine{03063\ \ \ \ \ FMT\_ASSERT(shift\ >=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03064\ \ \ \ \ exp\_\ +=\ shift\ /\ bigit\_bits;}
\DoxyCodeLine{03065\ \ \ \ \ shift\ \%=\ bigit\_bits;}
\DoxyCodeLine{03066\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 0)\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{03067\ \ \ \ \ bigit\ carry\ =\ 0;}
\DoxyCodeLine{03068\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0,\ n\ =\ bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}();\ i\ <\ n;\ ++i)\ \{}
\DoxyCodeLine{03069\ \ \ \ \ \ \ bigit\ c\ =\ bigits\_[i]\ >>\ (bigit\_bits\ -\/\ shift);}
\DoxyCodeLine{03070\ \ \ \ \ \ \ bigits\_[i]\ =\ (bigits\_[i]\ <<\ shift)\ +\ carry;}
\DoxyCodeLine{03071\ \ \ \ \ \ \ carry\ =\ c;}
\DoxyCodeLine{03072\ \ \ \ \ \}}
\DoxyCodeLine{03073\ \ \ \ \ \textcolor{keywordflow}{if}\ (carry\ !=\ 0)\ bigits\_.push\_back(carry);}
\DoxyCodeLine{03074\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{03075\ \ \ \}}
\DoxyCodeLine{03076\ }
\DoxyCodeLine{03077\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Int>\ FMT\_CONSTEXPR20\ \mbox{\hyperlink{classbigint}{bigint}}\&\ operator*=(Int\ value)\ \{}
\DoxyCodeLine{03078\ \ \ \ \ FMT\_ASSERT(value\ >\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03079\ \ \ \ \ multiply(uint32\_or\_64\_or\_128\_t<Int>(value));}
\DoxyCodeLine{03080\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{03081\ \ \ \}}
\DoxyCodeLine{03082\ }
\DoxyCodeLine{03083\ \ \ \textcolor{keyword}{friend}\ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{int}\ compare(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ lhs,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ rhs)\ \{}
\DoxyCodeLine{03084\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_lhs\_bigits\ =\ lhs.num\_bigits(),\ num\_rhs\_bigits\ =\ rhs.num\_bigits();}
\DoxyCodeLine{03085\ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_lhs\_bigits\ !=\ num\_rhs\_bigits)}
\DoxyCodeLine{03086\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ num\_lhs\_bigits\ >\ num\_rhs\_bigits\ ?\ 1\ :\ -\/1;}
\DoxyCodeLine{03087\ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(lhs.bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}())\ -\/\ 1;}
\DoxyCodeLine{03088\ \ \ \ \ \textcolor{keywordtype}{int}\ j\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(rhs.bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}())\ -\/\ 1;}
\DoxyCodeLine{03089\ \ \ \ \ \textcolor{keywordtype}{int}\ end\ =\ i\ -\/\ j;}
\DoxyCodeLine{03090\ \ \ \ \ \textcolor{keywordflow}{if}\ (end\ <\ 0)\ end\ =\ 0;}
\DoxyCodeLine{03091\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ i\ >=\ end;\ -\/-\/i,\ -\/-\/j)\ \{}
\DoxyCodeLine{03092\ \ \ \ \ \ \ bigit\ lhs\_bigit\ =\ lhs[i],\ rhs\_bigit\ =\ rhs[j];}
\DoxyCodeLine{03093\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lhs\_bigit\ !=\ rhs\_bigit)\ \textcolor{keywordflow}{return}\ lhs\_bigit\ >\ rhs\_bigit\ ?\ 1\ :\ -\/1;}
\DoxyCodeLine{03094\ \ \ \ \ \}}
\DoxyCodeLine{03095\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ !=\ j)\ \textcolor{keywordflow}{return}\ i\ >\ j\ ?\ 1\ :\ -\/1;}
\DoxyCodeLine{03096\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{03097\ \ \ \}}
\DoxyCodeLine{03098\ }
\DoxyCodeLine{03099\ \ \ \textcolor{comment}{//\ Returns\ compare(lhs1\ +\ lhs2,\ rhs).}}
\DoxyCodeLine{03100\ \ \ \textcolor{keyword}{friend}\ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{int}\ add\_compare(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ lhs1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ lhs2,}
\DoxyCodeLine{03101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ rhs)\ \{}
\DoxyCodeLine{03102\ \ \ \ \ \textcolor{keyword}{auto}\ minimum\ =\ [](\textcolor{keywordtype}{int}\ a,\ \textcolor{keywordtype}{int}\ b)\ \{\ \textcolor{keywordflow}{return}\ a\ <\ b\ ?\ a\ :\ b;\ \};}
\DoxyCodeLine{03103\ \ \ \ \ \textcolor{keyword}{auto}\ maximum\ =\ [](\textcolor{keywordtype}{int}\ a,\ \textcolor{keywordtype}{int}\ b)\ \{\ \textcolor{keywordflow}{return}\ a\ >\ b\ ?\ a\ :\ b;\ \};}
\DoxyCodeLine{03104\ \ \ \ \ \textcolor{keywordtype}{int}\ max\_lhs\_bigits\ =\ maximum(lhs1.num\_bigits(),\ lhs2.num\_bigits());}
\DoxyCodeLine{03105\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_rhs\_bigits\ =\ rhs.num\_bigits();}
\DoxyCodeLine{03106\ \ \ \ \ \textcolor{keywordflow}{if}\ (max\_lhs\_bigits\ +\ 1\ <\ num\_rhs\_bigits)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{03107\ \ \ \ \ \textcolor{keywordflow}{if}\ (max\_lhs\_bigits\ >\ num\_rhs\_bigits)\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{03108\ \ \ \ \ \textcolor{keyword}{auto}\ get\_bigit\ =\ [](\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ n,\ \textcolor{keywordtype}{int}\ i)\ -\/>\ bigit\ \{}
\DoxyCodeLine{03109\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i\ >=\ n.exp\_\ \&\&\ i\ <\ n.num\_bigits()\ ?\ n[i\ -\/\ n.exp\_]\ :\ 0;}
\DoxyCodeLine{03110\ \ \ \ \ \};}
\DoxyCodeLine{03111\ \ \ \ \ double\_bigit\ borrow\ =\ 0;}
\DoxyCodeLine{03112\ \ \ \ \ \textcolor{keywordtype}{int}\ min\_exp\ =\ minimum(minimum(lhs1.exp\_,\ lhs2.exp\_),\ rhs.exp\_);}
\DoxyCodeLine{03113\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ num\_rhs\_bigits\ -\/\ 1;\ i\ >=\ min\_exp;\ -\/-\/i)\ \{}
\DoxyCodeLine{03114\ \ \ \ \ \ \ double\_bigit\ sum\ =}
\DoxyCodeLine{03115\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}double\_bigit\textcolor{keyword}{>}(get\_bigit(lhs1,\ i))\ +\ get\_bigit(lhs2,\ i);}
\DoxyCodeLine{03116\ \ \ \ \ \ \ bigit\ rhs\_bigit\ =\ get\_bigit(rhs,\ i);}
\DoxyCodeLine{03117\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sum\ >\ rhs\_bigit\ +\ borrow)\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{03118\ \ \ \ \ \ \ borrow\ =\ rhs\_bigit\ +\ borrow\ -\/\ sum;}
\DoxyCodeLine{03119\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (borrow\ >\ 1)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{03120\ \ \ \ \ \ \ borrow\ <<=\ bigit\_bits;}
\DoxyCodeLine{03121\ \ \ \ \ \}}
\DoxyCodeLine{03122\ \ \ \ \ \textcolor{keywordflow}{return}\ borrow\ !=\ 0\ ?\ -\/1\ :\ 0;}
\DoxyCodeLine{03123\ \ \ \}}
\DoxyCodeLine{03124\ }
\DoxyCodeLine{03125\ \ \ \textcolor{comment}{//\ Assigns\ pow(10,\ exp)\ to\ this\ bigint.}}
\DoxyCodeLine{03126\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ assign\_pow10(\textcolor{keywordtype}{int}\ exp)\ \{}
\DoxyCodeLine{03127\ \ \ \ \ FMT\_ASSERT(exp\ >=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03128\ \ \ \ \ \textcolor{keywordflow}{if}\ (exp\ ==\ 0)\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this}\ =\ 1;}
\DoxyCodeLine{03129\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ top\ bit.}}
\DoxyCodeLine{03130\ \ \ \ \ \textcolor{keywordtype}{int}\ bitmask\ =\ 1;}
\DoxyCodeLine{03131\ \ \ \ \ \textcolor{keywordflow}{while}\ (exp\ >=\ bitmask)\ bitmask\ <<=\ 1;}
\DoxyCodeLine{03132\ \ \ \ \ bitmask\ >>=\ 1;}
\DoxyCodeLine{03133\ \ \ \ \ \textcolor{comment}{//\ pow(10,\ exp)\ =\ pow(5,\ exp)\ *\ pow(2,\ exp).\ First\ compute\ pow(5,\ exp)\ by}}
\DoxyCodeLine{03134\ \ \ \ \ \textcolor{comment}{//\ repeated\ squaring\ and\ multiplication.}}
\DoxyCodeLine{03135\ \ \ \ \ *\textcolor{keyword}{this}\ =\ 5;}
\DoxyCodeLine{03136\ \ \ \ \ bitmask\ >>=\ 1;}
\DoxyCodeLine{03137\ \ \ \ \ \textcolor{keywordflow}{while}\ (bitmask\ !=\ 0)\ \{}
\DoxyCodeLine{03138\ \ \ \ \ \ \ square();}
\DoxyCodeLine{03139\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((exp\ \&\ bitmask)\ !=\ 0)\ *\textcolor{keyword}{this}\ *=\ 5;}
\DoxyCodeLine{03140\ \ \ \ \ \ \ bitmask\ >>=\ 1;}
\DoxyCodeLine{03141\ \ \ \ \ \}}
\DoxyCodeLine{03142\ \ \ \ \ *\textcolor{keyword}{this}\ <<=\ exp;\ \ \textcolor{comment}{//\ Multiply\ by\ pow(2,\ exp)\ by\ shifting.}}
\DoxyCodeLine{03143\ \ \ \}}
\DoxyCodeLine{03144\ }
\DoxyCodeLine{03145\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ square()\ \{}
\DoxyCodeLine{03146\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_bigits\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}());}
\DoxyCodeLine{03147\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_result\_bigits\ =\ 2\ *\ num\_bigits;}
\DoxyCodeLine{03148\ \ \ \ \ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<bigit,\ bigits\_capacity>}}\ n(std::move(bigits\_));}
\DoxyCodeLine{03149\ \ \ \ \ bigits\_.\mbox{\hyperlink{classbasic__memory__buffer_a153c47788d6d1a76ec97780748755ea1}{resize}}(to\_unsigned(num\_result\_bigits));}
\DoxyCodeLine{03150\ \ \ \ \ \textcolor{keyword}{auto}\ sum\ =\ uint128\_t();}
\DoxyCodeLine{03151\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ bigit\_index\ =\ 0;\ bigit\_index\ <\ num\_bigits;\ ++bigit\_index)\ \{}
\DoxyCodeLine{03152\ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ bigit\ at\ position\ bigit\_index\ of\ the\ result\ by\ adding}}
\DoxyCodeLine{03153\ \ \ \ \ \ \ \textcolor{comment}{//\ cross-\/product\ terms\ n[i]\ *\ n[j]\ such\ that\ i\ +\ j\ ==\ bigit\_index.}}
\DoxyCodeLine{03154\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0,\ j\ =\ bigit\_index;\ j\ >=\ 0;\ ++i,\ -\/-\/j)\ \{}
\DoxyCodeLine{03155\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Most\ terms\ are\ multiplied\ twice\ which\ can\ be\ optimized\ in\ the\ future.}}
\DoxyCodeLine{03156\ \ \ \ \ \ \ \ \ sum\ +=\ \textcolor{keyword}{static\_cast<}double\_bigit\textcolor{keyword}{>}(n[i])\ *\ n[j];}
\DoxyCodeLine{03157\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03158\ \ \ \ \ \ \ (*this)[bigit\_index]\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(sum);}
\DoxyCodeLine{03159\ \ \ \ \ \ \ sum\ >>=\ num\_bits<bigit>();\ \ \textcolor{comment}{//\ Compute\ the\ carry.}}
\DoxyCodeLine{03160\ \ \ \ \ \}}
\DoxyCodeLine{03161\ \ \ \ \ \textcolor{comment}{//\ Do\ the\ same\ for\ the\ top\ half.}}
\DoxyCodeLine{03162\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ bigit\_index\ =\ num\_bigits;\ bigit\_index\ <\ num\_result\_bigits;}
\DoxyCodeLine{03163\ \ \ \ \ \ \ \ \ \ ++bigit\_index)\ \{}
\DoxyCodeLine{03164\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ num\_bigits\ -\/\ 1,\ i\ =\ bigit\_index\ -\/\ j;\ i\ <\ num\_bigits;)}
\DoxyCodeLine{03165\ \ \ \ \ \ \ \ \ sum\ +=\ \textcolor{keyword}{static\_cast<}double\_bigit\textcolor{keyword}{>}(n[i++])\ *\ n[j-\/-\/];}
\DoxyCodeLine{03166\ \ \ \ \ \ \ (*this)[bigit\_index]\ =\ \textcolor{keyword}{static\_cast<}bigit\textcolor{keyword}{>}(sum);}
\DoxyCodeLine{03167\ \ \ \ \ \ \ sum\ >>=\ num\_bits<bigit>();}
\DoxyCodeLine{03168\ \ \ \ \ \}}
\DoxyCodeLine{03169\ \ \ \ \ remove\_leading\_zeros();}
\DoxyCodeLine{03170\ \ \ \ \ exp\_\ *=\ 2;}
\DoxyCodeLine{03171\ \ \ \}}
\DoxyCodeLine{03172\ }
\DoxyCodeLine{03173\ \ \ \textcolor{comment}{//\ If\ this\ bigint\ has\ a\ bigger\ exponent\ than\ other,\ adds\ trailing\ zero\ to\ make}}
\DoxyCodeLine{03174\ \ \ \textcolor{comment}{//\ exponents\ equal.\ This\ simplifies\ some\ operations\ such\ as\ subtraction.}}
\DoxyCodeLine{03175\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ align(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ other)\ \{}
\DoxyCodeLine{03176\ \ \ \ \ \textcolor{keywordtype}{int}\ exp\_difference\ =\ exp\_\ -\/\ other.exp\_;}
\DoxyCodeLine{03177\ \ \ \ \ \textcolor{keywordflow}{if}\ (exp\_difference\ <=\ 0)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03178\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_bigits\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}());}
\DoxyCodeLine{03179\ \ \ \ \ bigits\_.\mbox{\hyperlink{classbasic__memory__buffer_a153c47788d6d1a76ec97780748755ea1}{resize}}(to\_unsigned(num\_bigits\ +\ exp\_difference));}
\DoxyCodeLine{03180\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ num\_bigits\ -\/\ 1,\ j\ =\ i\ +\ exp\_difference;\ i\ >=\ 0;\ -\/-\/i,\ -\/-\/j)}
\DoxyCodeLine{03181\ \ \ \ \ \ \ bigits\_[j]\ =\ bigits\_[i];}
\DoxyCodeLine{03182\ \ \ \ \ std::uninitialized\_fill\_n(bigits\_.\mbox{\hyperlink{classdetail_1_1buffer_aeb33e0a2d2be2bbca9e0236c148089c8}{data}}(),\ exp\_difference,\ 0);}
\DoxyCodeLine{03183\ \ \ \ \ exp\_\ -\/=\ exp\_difference;}
\DoxyCodeLine{03184\ \ \ \}}
\DoxyCodeLine{03185\ }
\DoxyCodeLine{03186\ \ \ \textcolor{comment}{//\ Divides\ this\ bignum\ by\ divisor,\ assigning\ the\ remainder\ to\ this\ and}}
\DoxyCodeLine{03187\ \ \ \textcolor{comment}{//\ returning\ the\ quotient.}}
\DoxyCodeLine{03188\ \ \ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{int}\ divmod\_assign(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbigint}{bigint}}\&\ divisor)\ \{}
\DoxyCodeLine{03189\ \ \ \ \ FMT\_ASSERT(\textcolor{keyword}{this}\ !=\ \&divisor,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03190\ \ \ \ \ \textcolor{keywordflow}{if}\ (compare(*\textcolor{keyword}{this},\ divisor)\ <\ 0)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{03191\ \ \ \ \ FMT\_ASSERT(divisor.bigits\_[divisor.bigits\_.size()\ -\/\ 1u]\ !=\ 0,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03192\ \ \ \ \ align(divisor);}
\DoxyCodeLine{03193\ \ \ \ \ \textcolor{keywordtype}{int}\ quotient\ =\ 0;}
\DoxyCodeLine{03194\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03195\ \ \ \ \ \ \ subtract\_aligned(divisor);}
\DoxyCodeLine{03196\ \ \ \ \ \ \ ++quotient;}
\DoxyCodeLine{03197\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (compare(*\textcolor{keyword}{this},\ divisor)\ >=\ 0);}
\DoxyCodeLine{03198\ \ \ \ \ \textcolor{keywordflow}{return}\ quotient;}
\DoxyCodeLine{03199\ \ \ \}}
\DoxyCodeLine{03200\ \};}
\DoxyCodeLine{03201\ }
\DoxyCodeLine{03202\ \textcolor{comment}{//\ format\_dragon\ flags.}}
\DoxyCodeLine{03203\ \textcolor{keyword}{enum}\ dragon\ \{}
\DoxyCodeLine{03204\ \ \ predecessor\_closer\ =\ 1,}
\DoxyCodeLine{03205\ \ \ fixup\ =\ 2,\ \ \textcolor{comment}{//\ Run\ fixup\ to\ correct\ exp10\ which\ can\ be\ off\ by\ one.}}
\DoxyCodeLine{03206\ \ \ fixed\ =\ 4,}
\DoxyCodeLine{03207\ \};}
\DoxyCodeLine{03208\ }
\DoxyCodeLine{03209\ \textcolor{comment}{//\ Formats\ a\ floating-\/point\ number\ using\ a\ variation\ of\ the\ Fixed-\/Precision}}
\DoxyCodeLine{03210\ \textcolor{comment}{//\ Positive\ Floating-\/Point\ Printout\ ((FPP)\string^2)\ algorithm\ by\ Steele\ \&\ White:}}
\DoxyCodeLine{03211\ \textcolor{comment}{//\ https://fmt.dev/papers/p372-\/steele.pdf.}}
\DoxyCodeLine{03212\ FMT\_CONSTEXPR20\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ format\_dragon(\mbox{\hyperlink{structbasic__fp}{basic\_fp<uint128\_t>}}\ value,}
\DoxyCodeLine{03213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ flags,\ \textcolor{keywordtype}{int}\ num\_digits,}
\DoxyCodeLine{03214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer<char>\&\ buf,\ \textcolor{keywordtype}{int}\&\ exp10)\ \{}
\DoxyCodeLine{03215\ \ \ \mbox{\hyperlink{classbigint}{bigint}}\ numerator;\ \ \ \ \textcolor{comment}{//\ 2\ *\ R\ in\ (FPP)\string^2.}}
\DoxyCodeLine{03216\ \ \ \mbox{\hyperlink{classbigint}{bigint}}\ denominator;\ \ \textcolor{comment}{//\ 2\ *\ S\ in\ (FPP)\string^2.}}
\DoxyCodeLine{03217\ \ \ \textcolor{comment}{//\ lower\ and\ upper\ are\ differences\ between\ value\ and\ corresponding\ boundaries.}}
\DoxyCodeLine{03218\ \ \ \mbox{\hyperlink{classbigint}{bigint}}\ lower;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (M\string^-\/\ in\ (FPP)\string^2).}}
\DoxyCodeLine{03219\ \ \ \mbox{\hyperlink{classbigint}{bigint}}\ upper\_store;\ \ \ \ \ \ \ \textcolor{comment}{//\ upper's\ value\ if\ different\ from\ lower.}}
\DoxyCodeLine{03220\ \ \ \mbox{\hyperlink{classbigint}{bigint}}*\ upper\ =\ \textcolor{keyword}{nullptr};\ \ \textcolor{comment}{//\ (M\string^+\ in\ (FPP)\string^2).}}
\DoxyCodeLine{03221\ \ \ \textcolor{comment}{//\ Shift\ numerator\ and\ denominator\ by\ an\ extra\ bit\ or\ two\ (if\ lower\ boundary}}
\DoxyCodeLine{03222\ \ \ \textcolor{comment}{//\ is\ closer)\ to\ make\ lower\ and\ upper\ integers.\ This\ eliminates\ multiplication}}
\DoxyCodeLine{03223\ \ \ \textcolor{comment}{//\ by\ 2\ during\ later\ computations.}}
\DoxyCodeLine{03224\ \ \ \textcolor{keywordtype}{bool}\ is\_predecessor\_closer\ =\ (flags\ \&\ dragon::predecessor\_closer)\ !=\ 0;}
\DoxyCodeLine{03225\ \ \ \textcolor{keywordtype}{int}\ shift\ =\ is\_predecessor\_closer\ ?\ 2\ :\ 1;}
\DoxyCodeLine{03226\ \ \ \textcolor{keywordflow}{if}\ (value.e\ >=\ 0)\ \{}
\DoxyCodeLine{03227\ \ \ \ \ numerator\ =\ value.f;}
\DoxyCodeLine{03228\ \ \ \ \ numerator\ <<=\ value.e\ +\ shift;}
\DoxyCodeLine{03229\ \ \ \ \ lower\ =\ 1;}
\DoxyCodeLine{03230\ \ \ \ \ lower\ <<=\ value.e;}
\DoxyCodeLine{03231\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_predecessor\_closer)\ \{}
\DoxyCodeLine{03232\ \ \ \ \ \ \ upper\_store\ =\ 1;}
\DoxyCodeLine{03233\ \ \ \ \ \ \ upper\_store\ <<=\ value.e\ +\ 1;}
\DoxyCodeLine{03234\ \ \ \ \ \ \ upper\ =\ \&upper\_store;}
\DoxyCodeLine{03235\ \ \ \ \ \}}
\DoxyCodeLine{03236\ \ \ \ \ denominator.assign\_pow10(exp10);}
\DoxyCodeLine{03237\ \ \ \ \ denominator\ <<=\ shift;}
\DoxyCodeLine{03238\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (exp10\ <\ 0)\ \{}
\DoxyCodeLine{03239\ \ \ \ \ numerator.assign\_pow10(-\/exp10);}
\DoxyCodeLine{03240\ \ \ \ \ lower.assign(numerator);}
\DoxyCodeLine{03241\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_predecessor\_closer)\ \{}
\DoxyCodeLine{03242\ \ \ \ \ \ \ upper\_store.assign(numerator);}
\DoxyCodeLine{03243\ \ \ \ \ \ \ upper\_store\ <<=\ 1;}
\DoxyCodeLine{03244\ \ \ \ \ \ \ upper\ =\ \&upper\_store;}
\DoxyCodeLine{03245\ \ \ \ \ \}}
\DoxyCodeLine{03246\ \ \ \ \ numerator\ *=\ value.f;}
\DoxyCodeLine{03247\ \ \ \ \ numerator\ <<=\ shift;}
\DoxyCodeLine{03248\ \ \ \ \ denominator\ =\ 1;}
\DoxyCodeLine{03249\ \ \ \ \ denominator\ <<=\ shift\ -\/\ value.e;}
\DoxyCodeLine{03250\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03251\ \ \ \ \ numerator\ =\ value.f;}
\DoxyCodeLine{03252\ \ \ \ \ numerator\ <<=\ shift;}
\DoxyCodeLine{03253\ \ \ \ \ denominator.assign\_pow10(exp10);}
\DoxyCodeLine{03254\ \ \ \ \ denominator\ <<=\ shift\ -\/\ value.e;}
\DoxyCodeLine{03255\ \ \ \ \ lower\ =\ 1;}
\DoxyCodeLine{03256\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_predecessor\_closer)\ \{}
\DoxyCodeLine{03257\ \ \ \ \ \ \ upper\_store\ =\ 1ULL\ <<\ 1;}
\DoxyCodeLine{03258\ \ \ \ \ \ \ upper\ =\ \&upper\_store;}
\DoxyCodeLine{03259\ \ \ \ \ \}}
\DoxyCodeLine{03260\ \ \ \}}
\DoxyCodeLine{03261\ \ \ \textcolor{keywordtype}{int}\ even\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}((value.f\ \&\ 1)\ ==\ 0);}
\DoxyCodeLine{03262\ \ \ \textcolor{keywordflow}{if}\ (!upper)\ upper\ =\ \&lower;}
\DoxyCodeLine{03263\ \ \ \textcolor{keywordflow}{if}\ ((flags\ \&\ dragon::fixup)\ !=\ 0)\ \{}
\DoxyCodeLine{03264\ \ \ \ \ \textcolor{keywordflow}{if}\ (add\_compare(numerator,\ *upper,\ denominator)\ +\ even\ <=\ 0)\ \{}
\DoxyCodeLine{03265\ \ \ \ \ \ \ -\/-\/exp10;}
\DoxyCodeLine{03266\ \ \ \ \ \ \ numerator\ *=\ 10;}
\DoxyCodeLine{03267\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_digits\ <\ 0)\ \{}
\DoxyCodeLine{03268\ \ \ \ \ \ \ \ \ lower\ *=\ 10;}
\DoxyCodeLine{03269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (upper\ !=\ \&lower)\ *upper\ *=\ 10;}
\DoxyCodeLine{03270\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03271\ \ \ \ \ \}}
\DoxyCodeLine{03272\ \ \ \ \ \textcolor{keywordflow}{if}\ ((flags\ \&\ dragon::fixed)\ !=\ 0)\ adjust\_precision(num\_digits,\ exp10\ +\ 1);}
\DoxyCodeLine{03273\ \ \ \}}
\DoxyCodeLine{03274\ \ \ \textcolor{comment}{//\ Invariant:\ value\ ==\ (numerator\ /\ denominator)\ *\ pow(10,\ exp10).}}
\DoxyCodeLine{03275\ \ \ \textcolor{keywordflow}{if}\ (num\_digits\ <\ 0)\ \{}
\DoxyCodeLine{03276\ \ \ \ \ \textcolor{comment}{//\ Generate\ the\ shortest\ representation.}}
\DoxyCodeLine{03277\ \ \ \ \ num\_digits\ =\ 0;}
\DoxyCodeLine{03278\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdata}{data}}\ =\ buf.data();}
\DoxyCodeLine{03279\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{03280\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ digit\ =\ numerator.divmod\_assign(denominator);}
\DoxyCodeLine{03281\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ low\ =\ compare(numerator,\ lower)\ -\/\ even\ <\ 0;\ \ \textcolor{comment}{//\ numerator\ <[=]\ lower.}}
\DoxyCodeLine{03282\ \ \ \ \ \ \ \textcolor{comment}{//\ numerator\ +\ upper\ >[=]\ pow10:}}
\DoxyCodeLine{03283\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ high\ =\ add\_compare(numerator,\ *upper,\ denominator)\ +\ even\ >\ 0;}
\DoxyCodeLine{03284\ \ \ \ \ \ \ \mbox{\hyperlink{structdata}{data}}[num\_digits++]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ digit);}
\DoxyCodeLine{03285\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (low\ ||\ high)\ \{}
\DoxyCodeLine{03286\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!low)\ \{}
\DoxyCodeLine{03287\ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structdata}{data}}[num\_digits\ -\/\ 1];}
\DoxyCodeLine{03288\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (high)\ \{}
\DoxyCodeLine{03289\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ result\ =\ add\_compare(numerator,\ numerator,\ denominator);}
\DoxyCodeLine{03290\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Round\ half\ to\ even.}}
\DoxyCodeLine{03291\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ >\ 0\ ||\ (result\ ==\ 0\ \&\&\ (digit\ \%\ 2)\ !=\ 0))}
\DoxyCodeLine{03292\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{structdata}{data}}[num\_digits\ -\/\ 1];}
\DoxyCodeLine{03293\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03294\ \ \ \ \ \ \ \ \ buf.try\_resize(to\_unsigned(num\_digits));}
\DoxyCodeLine{03295\ \ \ \ \ \ \ \ \ exp10\ -\/=\ num\_digits\ -\/\ 1;}
\DoxyCodeLine{03296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03297\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03298\ \ \ \ \ \ \ numerator\ *=\ 10;}
\DoxyCodeLine{03299\ \ \ \ \ \ \ lower\ *=\ 10;}
\DoxyCodeLine{03300\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (upper\ !=\ \&lower)\ *upper\ *=\ 10;}
\DoxyCodeLine{03301\ \ \ \ \ \}}
\DoxyCodeLine{03302\ \ \ \}}
\DoxyCodeLine{03303\ \ \ \textcolor{comment}{//\ Generate\ the\ given\ number\ of\ digits.}}
\DoxyCodeLine{03304\ \ \ exp10\ -\/=\ num\_digits\ -\/\ 1;}
\DoxyCodeLine{03305\ \ \ \textcolor{keywordflow}{if}\ (num\_digits\ ==\ 0)\ \{}
\DoxyCodeLine{03306\ \ \ \ \ denominator\ *=\ 10;}
\DoxyCodeLine{03307\ \ \ \ \ \textcolor{keyword}{auto}\ digit\ =\ add\_compare(numerator,\ numerator,\ denominator)\ >\ 0\ ?\ \textcolor{charliteral}{'1'}\ :\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{03308\ \ \ \ \ buf.push\_back(digit);}
\DoxyCodeLine{03309\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03310\ \ \ \}}
\DoxyCodeLine{03311\ \ \ buf.try\_resize(to\_unsigned(num\_digits));}
\DoxyCodeLine{03312\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_digits\ -\/\ 1;\ ++i)\ \{}
\DoxyCodeLine{03313\ \ \ \ \ \textcolor{keywordtype}{int}\ digit\ =\ numerator.divmod\_assign(denominator);}
\DoxyCodeLine{03314\ \ \ \ \ buf[i]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ digit);}
\DoxyCodeLine{03315\ \ \ \ \ numerator\ *=\ 10;}
\DoxyCodeLine{03316\ \ \ \}}
\DoxyCodeLine{03317\ \ \ \textcolor{keywordtype}{int}\ digit\ =\ numerator.divmod\_assign(denominator);}
\DoxyCodeLine{03318\ \ \ \textcolor{keyword}{auto}\ result\ =\ add\_compare(numerator,\ numerator,\ denominator);}
\DoxyCodeLine{03319\ \ \ \textcolor{keywordflow}{if}\ (result\ >\ 0\ ||\ (result\ ==\ 0\ \&\&\ (digit\ \%\ 2)\ !=\ 0))\ \{}
\DoxyCodeLine{03320\ \ \ \ \ \textcolor{keywordflow}{if}\ (digit\ ==\ 9)\ \{}
\DoxyCodeLine{03321\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ overflow\ =\ \textcolor{charliteral}{'0'}\ +\ 10;}
\DoxyCodeLine{03322\ \ \ \ \ \ \ buf[num\_digits\ -\/\ 1]\ =\ overflow;}
\DoxyCodeLine{03323\ \ \ \ \ \ \ \textcolor{comment}{//\ Propagate\ the\ carry.}}
\DoxyCodeLine{03324\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ num\_digits\ -\/\ 1;\ i\ >\ 0\ \&\&\ buf[i]\ ==\ overflow;\ -\/-\/i)\ \{}
\DoxyCodeLine{03325\ \ \ \ \ \ \ \ \ buf[i]\ =\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{03326\ \ \ \ \ \ \ \ \ ++buf[i\ -\/\ 1];}
\DoxyCodeLine{03327\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03328\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf[0]\ ==\ overflow)\ \{}
\DoxyCodeLine{03329\ \ \ \ \ \ \ \ \ buf[0]\ =\ \textcolor{charliteral}{'1'};}
\DoxyCodeLine{03330\ \ \ \ \ \ \ \ \ ++exp10;}
\DoxyCodeLine{03331\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03332\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03333\ \ \ \ \ \}}
\DoxyCodeLine{03334\ \ \ \ \ ++digit;}
\DoxyCodeLine{03335\ \ \ \}}
\DoxyCodeLine{03336\ \ \ buf[num\_digits\ -\/\ 1]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ digit);}
\DoxyCodeLine{03337\ \}}
\DoxyCodeLine{03338\ }
\DoxyCodeLine{03339\ \textcolor{comment}{//\ Formats\ a\ floating-\/point\ number\ using\ the\ hexfloat\ format.}}
\DoxyCodeLine{03340\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float,\ FMT\_ENABLE\_IF(!is\_\textcolor{keywordtype}{double}\_\textcolor{keywordtype}{double}<Float>::value)>}
\DoxyCodeLine{03341\ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ format\_hexfloat(Float\ value,\ \textcolor{keywordtype}{int}\ precision,}
\DoxyCodeLine{03342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\ specs,\ buffer<char>\&\ buf)\ \{}
\DoxyCodeLine{03343\ \ \ \textcolor{comment}{//\ float\ is\ passed\ as\ double\ to\ reduce\ the\ number\ of\ instantiations\ and\ to}}
\DoxyCodeLine{03344\ \ \ \textcolor{comment}{//\ simplify\ implementation.}}
\DoxyCodeLine{03345\ \ \ \textcolor{keyword}{static\_assert}(!std::is\_same<Float,\ float>::value,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03346\ }
\DoxyCodeLine{03347\ \ \ \textcolor{keyword}{using\ }info\ =\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info<Float>}};}
\DoxyCodeLine{03348\ }
\DoxyCodeLine{03349\ \ \ \textcolor{comment}{//\ Assume\ Float\ is\ in\ the\ format\ [sign][exponent][significand].}}
\DoxyCodeLine{03350\ \ \ \textcolor{keyword}{using\ }carrier\_uint\ =\ \textcolor{keyword}{typename}\ info::carrier\_uint;}
\DoxyCodeLine{03351\ }
\DoxyCodeLine{03352\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ num\_float\_significand\_bits\ =}
\DoxyCodeLine{03353\ \ \ \ \ \ \ detail::num\_significand\_bits<Float>();}
\DoxyCodeLine{03354\ }
\DoxyCodeLine{03355\ \ \ \mbox{\hyperlink{structbasic__fp}{basic\_fp<carrier\_uint>}}\ f(value);}
\DoxyCodeLine{03356\ \ \ f.e\ +=\ num\_float\_significand\_bits;}
\DoxyCodeLine{03357\ \ \ \textcolor{keywordflow}{if}\ (!has\_implicit\_bit<Float>())\ -\/-\/f.e;}
\DoxyCodeLine{03358\ }
\DoxyCodeLine{03359\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ num\_fraction\_bits\ =}
\DoxyCodeLine{03360\ \ \ \ \ \ \ num\_float\_significand\_bits\ +\ (has\_implicit\_bit<Float>()\ ?\ 1\ :\ 0);}
\DoxyCodeLine{03361\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ num\_xdigits\ =\ (num\_fraction\_bits\ +\ 3)\ /\ 4;}
\DoxyCodeLine{03362\ }
\DoxyCodeLine{03363\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ leading\_shift\ =\ ((num\_xdigits\ -\/\ 1)\ *\ 4);}
\DoxyCodeLine{03364\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ leading\_mask\ =\ carrier\_uint(0xF)\ <<\ leading\_shift;}
\DoxyCodeLine{03365\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ leading\_xdigit\ =}
\DoxyCodeLine{03366\ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}((f.f\ \&\ leading\_mask)\ >>\ leading\_shift);}
\DoxyCodeLine{03367\ \ \ \textcolor{keywordflow}{if}\ (leading\_xdigit\ >\ 1)\ f.e\ -\/=\ (32\ -\/\ countl\_zero(leading\_xdigit)\ -\/\ 1);}
\DoxyCodeLine{03368\ }
\DoxyCodeLine{03369\ \ \ \textcolor{keywordtype}{int}\ print\_xdigits\ =\ num\_xdigits\ -\/\ 1;}
\DoxyCodeLine{03370\ \ \ \textcolor{keywordflow}{if}\ (precision\ >=\ 0\ \&\&\ print\_xdigits\ >\ precision)\ \{}
\DoxyCodeLine{03371\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ shift\ =\ ((print\_xdigits\ -\/\ precision\ -\/\ 1)\ *\ 4);}
\DoxyCodeLine{03372\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ mask\ =\ carrier\_uint(0xF)\ <<\ shift;}
\DoxyCodeLine{03373\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ v\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}((f.f\ \&\ mask)\ >>\ shift);}
\DoxyCodeLine{03374\ }
\DoxyCodeLine{03375\ \ \ \ \ \textcolor{keywordflow}{if}\ (v\ >=\ 8)\ \{}
\DoxyCodeLine{03376\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ inc\ =\ carrier\_uint(1)\ <<\ (shift\ +\ 4);}
\DoxyCodeLine{03377\ \ \ \ \ \ \ f.f\ +=\ inc;}
\DoxyCodeLine{03378\ \ \ \ \ \ \ f.f\ \&=\ \string~(inc\ -\/\ 1);}
\DoxyCodeLine{03379\ \ \ \ \ \}}
\DoxyCodeLine{03380\ }
\DoxyCodeLine{03381\ \ \ \ \ \textcolor{comment}{//\ Check\ long\ double\ overflow}}
\DoxyCodeLine{03382\ \ \ \ \ \textcolor{keywordflow}{if}\ (!has\_implicit\_bit<Float>())\ \{}
\DoxyCodeLine{03383\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ implicit\_bit\ =\ carrier\_uint(1)\ <<\ num\_float\_significand\_bits;}
\DoxyCodeLine{03384\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((f.f\ \&\ implicit\_bit)\ ==\ implicit\_bit)\ \{}
\DoxyCodeLine{03385\ \ \ \ \ \ \ \ \ f.f\ >>=\ 4;}
\DoxyCodeLine{03386\ \ \ \ \ \ \ \ \ f.e\ +=\ 4;}
\DoxyCodeLine{03387\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03388\ \ \ \ \ \}}
\DoxyCodeLine{03389\ }
\DoxyCodeLine{03390\ \ \ \ \ print\_xdigits\ =\ precision;}
\DoxyCodeLine{03391\ \ \ \}}
\DoxyCodeLine{03392\ }
\DoxyCodeLine{03393\ \ \ \textcolor{keywordtype}{char}\ xdigits[num\_bits<carrier\_uint>()\ /\ 4];}
\DoxyCodeLine{03394\ \ \ detail::fill\_n(xdigits,\ \textcolor{keyword}{sizeof}(xdigits),\ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{03395\ \ \ format\_uint<4>(xdigits,\ f.f,\ num\_xdigits,\ specs.upper);}
\DoxyCodeLine{03396\ }
\DoxyCodeLine{03397\ \ \ \textcolor{comment}{//\ Remove\ zero\ tail}}
\DoxyCodeLine{03398\ \ \ \textcolor{keywordflow}{while}\ (print\_xdigits\ >\ 0\ \&\&\ xdigits[print\_xdigits]\ ==\ \textcolor{charliteral}{'0'})\ -\/-\/print\_xdigits;}
\DoxyCodeLine{03399\ }
\DoxyCodeLine{03400\ \ \ buf.push\_back(\textcolor{charliteral}{'0'});}
\DoxyCodeLine{03401\ \ \ buf.push\_back(specs.upper\ ?\ \textcolor{charliteral}{'X'}\ :\ \textcolor{charliteral}{'x'});}
\DoxyCodeLine{03402\ \ \ buf.push\_back(xdigits[0]);}
\DoxyCodeLine{03403\ \ \ \textcolor{keywordflow}{if}\ (specs.showpoint\ ||\ print\_xdigits\ >\ 0\ ||\ print\_xdigits\ <\ precision)}
\DoxyCodeLine{03404\ \ \ \ \ buf.push\_back(\textcolor{charliteral}{'.'});}
\DoxyCodeLine{03405\ \ \ buf.append(xdigits\ +\ 1,\ xdigits\ +\ 1\ +\ print\_xdigits);}
\DoxyCodeLine{03406\ \ \ \textcolor{keywordflow}{for}\ (;\ print\_xdigits\ <\ precision;\ ++print\_xdigits)\ buf.push\_back(\textcolor{charliteral}{'0'});}
\DoxyCodeLine{03407\ }
\DoxyCodeLine{03408\ \ \ buf.push\_back(specs.upper\ ?\ \textcolor{charliteral}{'P'}\ :\ \textcolor{charliteral}{'p'});}
\DoxyCodeLine{03409\ }
\DoxyCodeLine{03410\ \ \ uint32\_t\ abs\_e;}
\DoxyCodeLine{03411\ \ \ \textcolor{keywordflow}{if}\ (f.e\ <\ 0)\ \{}
\DoxyCodeLine{03412\ \ \ \ \ buf.push\_back(\textcolor{charliteral}{'-\/'});}
\DoxyCodeLine{03413\ \ \ \ \ abs\_e\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(-\/f.e);}
\DoxyCodeLine{03414\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03415\ \ \ \ \ buf.push\_back(\textcolor{charliteral}{'+'});}
\DoxyCodeLine{03416\ \ \ \ \ abs\_e\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(f.e);}
\DoxyCodeLine{03417\ \ \ \}}
\DoxyCodeLine{03418\ \ \ format\_decimal<char>(\mbox{\hyperlink{classappender}{appender}}(buf),\ abs\_e,\ detail::count\_digits(abs\_e));}
\DoxyCodeLine{03419\ \}}
\DoxyCodeLine{03420\ }
\DoxyCodeLine{03421\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float,\ FMT\_ENABLE\_IF(is\_\textcolor{keywordtype}{double}\_\textcolor{keywordtype}{double}<Float>::value)>}
\DoxyCodeLine{03422\ FMT\_CONSTEXPR20\ \textcolor{keywordtype}{void}\ format\_hexfloat(Float\ value,\ \textcolor{keywordtype}{int}\ precision,}
\DoxyCodeLine{03423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\ specs,\ buffer<char>\&\ buf)\ \{}
\DoxyCodeLine{03424\ \ \ format\_hexfloat(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(value),\ precision,\ specs,\ buf);}
\DoxyCodeLine{03425\ \}}
\DoxyCodeLine{03426\ }
\DoxyCodeLine{03427\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Float>}
\DoxyCodeLine{03428\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ format\_float(Float\ value,\ \textcolor{keywordtype}{int}\ precision,\ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\ specs,}
\DoxyCodeLine{03429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer<char>\&\ buf)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{03430\ \ \ \textcolor{comment}{//\ float\ is\ passed\ as\ double\ to\ reduce\ the\ number\ of\ instantiations.}}
\DoxyCodeLine{03431\ \ \ \textcolor{keyword}{static\_assert}(!std::is\_same<Float,\ float>::value,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03432\ \ \ FMT\_ASSERT(value\ >=\ 0,\ \textcolor{stringliteral}{"{}value\ is\ negative"{}});}
\DoxyCodeLine{03433\ \ \ \textcolor{keyword}{auto}\ converted\_value\ =\ convert\_float(value);}
\DoxyCodeLine{03434\ }
\DoxyCodeLine{03435\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ fixed\ =\ specs.format\ ==\ float\_format::fixed;}
\DoxyCodeLine{03436\ \ \ \textcolor{keywordflow}{if}\ (value\ <=\ 0)\ \{\ \ \textcolor{comment}{//\ <=\ instead\ of\ ==\ to\ silence\ a\ warning.}}
\DoxyCodeLine{03437\ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ <=\ 0\ ||\ !fixed)\ \{}
\DoxyCodeLine{03438\ \ \ \ \ \ \ buf.push\_back(\textcolor{charliteral}{'0'});}
\DoxyCodeLine{03439\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{03440\ \ \ \ \ \}}
\DoxyCodeLine{03441\ \ \ \ \ buf.try\_resize(to\_unsigned(precision));}
\DoxyCodeLine{03442\ \ \ \ \ fill\_n(buf.data(),\ precision,\ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{03443\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/precision;}
\DoxyCodeLine{03444\ \ \ \}}
\DoxyCodeLine{03445\ }
\DoxyCodeLine{03446\ \ \ \textcolor{keywordtype}{int}\ exp\ =\ 0;}
\DoxyCodeLine{03447\ \ \ \textcolor{keywordtype}{bool}\ use\_dragon\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{03448\ \ \ \textcolor{keywordtype}{unsigned}\ dragon\_flags\ =\ 0;}
\DoxyCodeLine{03449\ \ \ \textcolor{keywordflow}{if}\ (!is\_fast\_float<Float>())\ \{}
\DoxyCodeLine{03450\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ inv\_log2\_10\ =\ 0.3010299956639812;\ \ \textcolor{comment}{//\ 1\ /\ log2(10)}}
\DoxyCodeLine{03451\ \ \ \ \ \textcolor{keyword}{using\ }info\ =\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info}}<\textcolor{keyword}{decltype}(converted\_value)>;}
\DoxyCodeLine{03452\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ f\ =\ \mbox{\hyperlink{structbasic__fp}{basic\_fp<typename\ info::carrier\_uint>}}(converted\_value);}
\DoxyCodeLine{03453\ \ \ \ \ \textcolor{comment}{//\ Compute\ exp,\ an\ approximate\ power\ of\ 10,\ such\ that}}
\DoxyCodeLine{03454\ \ \ \ \ \textcolor{comment}{//\ \ \ 10\string^(exp\ -\/\ 1)\ <=\ value\ <\ 10\string^exp\ or\ 10\string^exp\ <=\ value\ <\ 10\string^(exp\ +\ 1).}}
\DoxyCodeLine{03455\ \ \ \ \ \textcolor{comment}{//\ This\ is\ based\ on\ log10(value)\ ==\ log2(value)\ /\ log2(10)\ and\ approximation}}
\DoxyCodeLine{03456\ \ \ \ \ \textcolor{comment}{//\ of\ log2(value)\ by\ e\ +\ num\_fraction\_bits\ idea\ from\ double-\/conversion.}}
\DoxyCodeLine{03457\ \ \ \ \ exp\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(}
\DoxyCodeLine{03458\ \ \ \ \ \ \ \ \ std::ceil((f.e\ +\ count\_digits<1>(f.f)\ -\/\ 1)\ *\ inv\_log2\_10\ -\/\ 1e-\/10));}
\DoxyCodeLine{03459\ \ \ \ \ dragon\_flags\ =\ dragon::fixup;}
\DoxyCodeLine{03460\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!is\_constant\_evaluated()\ \&\&\ precision\ <\ 0)\ \{}
\DoxyCodeLine{03461\ \ \ \ \ \textcolor{comment}{//\ Use\ Dragonbox\ for\ the\ shortest\ format.}}
\DoxyCodeLine{03462\ \ \ \ \ \textcolor{keywordflow}{if}\ (specs.binary32)\ \{}
\DoxyCodeLine{03463\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ dec\ =\ dragonbox::to\_decimal(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(value));}
\DoxyCodeLine{03464\ \ \ \ \ \ \ write<char>(buffer\_appender<char>(buf),\ dec.significand);}
\DoxyCodeLine{03465\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ dec.exponent;}
\DoxyCodeLine{03466\ \ \ \ \ \}}
\DoxyCodeLine{03467\ \ \ \ \ \textcolor{keyword}{auto}\ dec\ =\ dragonbox::to\_decimal(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(value));}
\DoxyCodeLine{03468\ \ \ \ \ write<char>(buffer\_appender<char>(buf),\ dec.significand);}
\DoxyCodeLine{03469\ \ \ \ \ \textcolor{keywordflow}{return}\ dec.exponent;}
\DoxyCodeLine{03470\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())\ \{}
\DoxyCodeLine{03471\ \ \ \ \ \textcolor{comment}{//\ Use\ Grisu\ +\ Dragon4\ for\ the\ given\ precision:}}
\DoxyCodeLine{03472\ \ \ \ \ \textcolor{comment}{//\ https://www.cs.tufts.edu/\string~nr/cs257/archive/florian-\/loitsch/printf.pdf.}}
\DoxyCodeLine{03473\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ min\_exp\ =\ -\/60;\ \ \textcolor{comment}{//\ alpha\ in\ Grisu.}}
\DoxyCodeLine{03474\ \ \ \ \ \textcolor{keywordtype}{int}\ cached\_exp10\ =\ 0;\ \ \ \ \ \textcolor{comment}{//\ K\ in\ Grisu.}}
\DoxyCodeLine{03475\ \ \ \ \ \mbox{\hyperlink{structbasic__fp}{fp}}\ normalized\ =\ normalize(\mbox{\hyperlink{structbasic__fp}{fp}}(converted\_value));}
\DoxyCodeLine{03476\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ cached\_pow\ =\ get\_cached\_power(}
\DoxyCodeLine{03477\ \ \ \ \ \ \ \ \ min\_exp\ -\/\ (normalized.e\ +\ fp::num\_significand\_bits),\ cached\_exp10);}
\DoxyCodeLine{03478\ \ \ \ \ normalized\ =\ normalized\ *\ cached\_pow;}
\DoxyCodeLine{03479\ \ \ \ \ \mbox{\hyperlink{structgen__digits__handler}{gen\_digits\_handler}}\ handler\{buf.data(),\ 0,\ precision,\ -\/cached\_exp10,\ fixed\};}
\DoxyCodeLine{03480\ \ \ \ \ \textcolor{keywordflow}{if}\ (grisu\_gen\_digits(normalized,\ 1,\ exp,\ handler)\ !=\ digits::error\ \&\&}
\DoxyCodeLine{03481\ \ \ \ \ \ \ \ \ !is\_constant\_evaluated())\ \{}
\DoxyCodeLine{03482\ \ \ \ \ \ \ exp\ +=\ handler.exp10;}
\DoxyCodeLine{03483\ \ \ \ \ \ \ buf.try\_resize(to\_unsigned(handler.size));}
\DoxyCodeLine{03484\ \ \ \ \ \ \ use\_dragon\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{03485\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03486\ \ \ \ \ \ \ exp\ +=\ handler.size\ -\/\ cached\_exp10\ -\/\ 1;}
\DoxyCodeLine{03487\ \ \ \ \ \ \ precision\ =\ handler.precision;}
\DoxyCodeLine{03488\ \ \ \ \ \}}
\DoxyCodeLine{03489\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03490\ \ \ \ \ \textcolor{comment}{//\ Extract\ significand\ bits\ and\ exponent\ bits.}}
\DoxyCodeLine{03491\ \ \ \ \ \textcolor{keyword}{using\ }info\ =\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info<double>}};}
\DoxyCodeLine{03492\ \ \ \ \ \textcolor{keyword}{auto}\ br\ =\ bit\_cast<uint64\_t>(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(value));}
\DoxyCodeLine{03493\ }
\DoxyCodeLine{03494\ \ \ \ \ \textcolor{keyword}{const}\ uint64\_t\ significand\_mask\ =}
\DoxyCodeLine{03495\ \ \ \ \ \ \ \ \ (\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(1)\ <<\ num\_significand\_bits<double>())\ -\/\ 1;}
\DoxyCodeLine{03496\ \ \ \ \ uint64\_t\ significand\ =\ (br\ \&\ significand\_mask);}
\DoxyCodeLine{03497\ \ \ \ \ \textcolor{keywordtype}{int}\ exponent\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}((br\ \&\ exponent\_mask<double>())\ >>}
\DoxyCodeLine{03498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_significand\_bits<double>());}
\DoxyCodeLine{03499\ }
\DoxyCodeLine{03500\ \ \ \ \ \textcolor{keywordflow}{if}\ (exponent\ !=\ 0)\ \{\ \ \textcolor{comment}{//\ Check\ if\ normal.}}
\DoxyCodeLine{03501\ \ \ \ \ \ \ exponent\ -\/=\ exponent\_bias<double>()\ +\ num\_significand\_bits<double>();}
\DoxyCodeLine{03502\ \ \ \ \ \ \ significand\ |=}
\DoxyCodeLine{03503\ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(1)\ <<\ num\_significand\_bits<double>());}
\DoxyCodeLine{03504\ \ \ \ \ \ \ significand\ <<=\ 1;}
\DoxyCodeLine{03505\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03506\ \ \ \ \ \ \ \textcolor{comment}{//\ Normalize\ subnormal\ inputs.}}
\DoxyCodeLine{03507\ \ \ \ \ \ \ FMT\_ASSERT(significand\ !=\ 0,\ \textcolor{stringliteral}{"{}zeros\ should\ not\ appear\ hear"{}});}
\DoxyCodeLine{03508\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ shift\ =\ countl\_zero(significand);}
\DoxyCodeLine{03509\ \ \ \ \ \ \ FMT\_ASSERT(shift\ >=\ num\_bits<uint64\_t>()\ -\/\ num\_significand\_bits<double>(),}
\DoxyCodeLine{03510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03511\ \ \ \ \ \ \ shift\ -\/=\ (num\_bits<uint64\_t>()\ -\/\ num\_significand\_bits<double>()\ -\/\ 2);}
\DoxyCodeLine{03512\ \ \ \ \ \ \ exponent\ =\ (std::numeric\_limits<double>::min\_exponent\ -\/}
\DoxyCodeLine{03513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_significand\_bits<double>())\ -\/}
\DoxyCodeLine{03514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shift;}
\DoxyCodeLine{03515\ \ \ \ \ \ \ significand\ <<=\ shift;}
\DoxyCodeLine{03516\ \ \ \ \ \}}
\DoxyCodeLine{03517\ }
\DoxyCodeLine{03518\ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ first\ several\ nonzero\ decimal\ significand\ digits.}}
\DoxyCodeLine{03519\ \ \ \ \ \textcolor{comment}{//\ We\ call\ the\ number\ we\ get\ the\ first\ segment.}}
\DoxyCodeLine{03520\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ k\ =\ info::kappa\ -\/\ dragonbox::floor\_log10\_pow2(exponent);}
\DoxyCodeLine{03521\ \ \ \ \ exp\ =\ -\/k;}
\DoxyCodeLine{03522\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ beta\ =\ exponent\ +\ dragonbox::floor\_log2\_pow10(k);}
\DoxyCodeLine{03523\ \ \ \ \ uint64\_t\ first\_segment;}
\DoxyCodeLine{03524\ \ \ \ \ \textcolor{keywordtype}{bool}\ has\_more\_segments;}
\DoxyCodeLine{03525\ \ \ \ \ \textcolor{keywordtype}{int}\ digits\_in\_the\_first\_segment;}
\DoxyCodeLine{03526\ \ \ \ \ \{}
\DoxyCodeLine{03527\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ r\ =\ dragonbox::umul192\_upper128(}
\DoxyCodeLine{03528\ \ \ \ \ \ \ \ \ \ \ significand\ <<\ beta,\ dragonbox::get\_cached\_power(k));}
\DoxyCodeLine{03529\ \ \ \ \ \ \ first\_segment\ =\ r.high();}
\DoxyCodeLine{03530\ \ \ \ \ \ \ has\_more\_segments\ =\ r.low()\ !=\ 0;}
\DoxyCodeLine{03531\ }
\DoxyCodeLine{03532\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ first\ segment\ can\ have\ 18\ \string~\ 19\ digits.}}
\DoxyCodeLine{03533\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_segment\ >=\ 1000000000000000000ULL)\ \{}
\DoxyCodeLine{03534\ \ \ \ \ \ \ \ \ digits\_in\_the\_first\_segment\ =\ 19;}
\DoxyCodeLine{03535\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03536\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ When\ it\ is\ of\ 18-\/digits,\ we\ align\ it\ to\ 19-\/digits\ by\ adding\ a\ bogus}}
\DoxyCodeLine{03537\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ zero\ at\ the\ end.}}
\DoxyCodeLine{03538\ \ \ \ \ \ \ \ \ digits\_in\_the\_first\_segment\ =\ 18;}
\DoxyCodeLine{03539\ \ \ \ \ \ \ \ \ first\_segment\ *=\ 10;}
\DoxyCodeLine{03540\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03541\ \ \ \ \ \}}
\DoxyCodeLine{03542\ }
\DoxyCodeLine{03543\ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ actual\ number\ of\ decimal\ digits\ to\ print.}}
\DoxyCodeLine{03544\ \ \ \ \ \textcolor{keywordflow}{if}\ (fixed)\ \{}
\DoxyCodeLine{03545\ \ \ \ \ \ \ adjust\_precision(precision,\ exp\ +\ digits\_in\_the\_first\_segment);}
\DoxyCodeLine{03546\ \ \ \ \ \}}
\DoxyCodeLine{03547\ }
\DoxyCodeLine{03548\ \ \ \ \ \textcolor{comment}{//\ Use\ Dragon4\ only\ when\ there\ might\ be\ not\ enough\ digits\ in\ the\ first}}
\DoxyCodeLine{03549\ \ \ \ \ \textcolor{comment}{//\ segment.}}
\DoxyCodeLine{03550\ \ \ \ \ \textcolor{keywordflow}{if}\ (digits\_in\_the\_first\_segment\ >\ precision)\ \{}
\DoxyCodeLine{03551\ \ \ \ \ \ \ use\_dragon\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{03552\ }
\DoxyCodeLine{03553\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ <=\ 0)\ \{}
\DoxyCodeLine{03554\ \ \ \ \ \ \ \ \ exp\ +=\ digits\_in\_the\_first\_segment;}
\DoxyCodeLine{03555\ }
\DoxyCodeLine{03556\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ <\ 0)\ \{}
\DoxyCodeLine{03557\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Nothing\ to\ do,\ since\ all\ we\ have\ are\ just\ leading\ zeros.}}
\DoxyCodeLine{03558\ \ \ \ \ \ \ \ \ \ \ buf.try\_resize(0);}
\DoxyCodeLine{03559\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03560\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ may\ need\ to\ round-\/up.}}
\DoxyCodeLine{03561\ \ \ \ \ \ \ \ \ \ \ buf.try\_resize(1);}
\DoxyCodeLine{03562\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((first\_segment\ |\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(has\_more\_segments))\ >}
\DoxyCodeLine{03563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 5000000000000000000ULL)\ \{}
\DoxyCodeLine{03564\ \ \ \ \ \ \ \ \ \ \ \ \ buf[0]\ =\ \textcolor{charliteral}{'1'};}
\DoxyCodeLine{03565\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03566\ \ \ \ \ \ \ \ \ \ \ \ \ buf[0]\ =\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{03567\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03568\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03569\ \ \ \ \ \ \ \}\ \ \textcolor{comment}{//\ precision\ <=\ 0}}
\DoxyCodeLine{03570\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03571\ \ \ \ \ \ \ \ \ exp\ +=\ digits\_in\_the\_first\_segment\ -\/\ precision;}
\DoxyCodeLine{03572\ }
\DoxyCodeLine{03573\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ When\ precision\ >\ 0,\ we\ divide\ the\ first\ segment\ into\ three}}
\DoxyCodeLine{03574\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ subsegments,\ each\ with\ 9,\ 9,\ and\ 0\ \string~\ 1\ digits\ so\ that\ each\ fits}}
\DoxyCodeLine{03575\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ in\ 32-\/bits\ which\ usually\ allows\ faster\ calculation\ than\ in}}
\DoxyCodeLine{03576\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 64-\/bits.\ Since\ some\ compiler\ (e.g.\ MSVC)\ doesn't\ know\ how\ to\ optimize}}
\DoxyCodeLine{03577\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ division-\/by-\/constant\ for\ large\ 64-\/bit\ divisors,\ we\ do\ it\ here}}
\DoxyCodeLine{03578\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ manually.\ The\ magic\ number\ 7922816251426433760\ below\ is\ equal\ to}}
\DoxyCodeLine{03579\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ceil(2\string^(64+32)\ /\ 10\string^10).}}
\DoxyCodeLine{03580\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint32\_t\ first\_subsegment\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(}
\DoxyCodeLine{03581\ \ \ \ \ \ \ \ \ \ \ \ \ dragonbox::umul128\_upper64(first\_segment,\ 7922816251426433760ULL)\ >>}
\DoxyCodeLine{03582\ \ \ \ \ \ \ \ \ \ \ \ \ 32);}
\DoxyCodeLine{03583\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint64\_t\ second\_third\_subsegments\ =}
\DoxyCodeLine{03584\ \ \ \ \ \ \ \ \ \ \ \ \ first\_segment\ -\/\ first\_subsegment\ *\ 10000000000ULL;}
\DoxyCodeLine{03585\ }
\DoxyCodeLine{03586\ \ \ \ \ \ \ \ \ uint64\_t\ prod;}
\DoxyCodeLine{03587\ \ \ \ \ \ \ \ \ uint32\_t\ digits;}
\DoxyCodeLine{03588\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ should\_round\_up;}
\DoxyCodeLine{03589\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ number\_of\_digits\_to\_print\ =\ precision\ >\ 9\ ?\ 9\ :\ precision;}
\DoxyCodeLine{03590\ }
\DoxyCodeLine{03591\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Print\ a\ 9-\/digits\ subsegment,\ either\ the\ first\ or\ the\ second.}}
\DoxyCodeLine{03592\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ print\_subsegment\ =\ [\&](uint32\_t\ subsegment,\ \textcolor{keywordtype}{char}*\ buffer)\ \{}
\DoxyCodeLine{03593\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ number\_of\_digits\_printed\ =\ 0;}
\DoxyCodeLine{03594\ }
\DoxyCodeLine{03595\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ want\ to\ print\ an\ odd\ number\ of\ digits\ from\ the\ subsegment,}}
\DoxyCodeLine{03596\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((number\_of\_digits\_to\_print\ \&\ 1)\ !=\ 0)\ \{}
\DoxyCodeLine{03597\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ to\ 64-\/bit\ fixed-\/point\ fractional\ form\ with\ 1-\/digit}}
\DoxyCodeLine{03598\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ integer\ part.\ The\ magic\ number\ 720575941\ is\ a\ good\ enough}}
\DoxyCodeLine{03599\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ approximation\ of\ 2\string^(32\ +\ 24)\ /\ 10\string^8;\ see}}
\DoxyCodeLine{03600\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ https://jk-\/jeon.github.io/posts/2022/12/fixed-\/precision-\/formatting/\#fixed-\/length-\/case}}
\DoxyCodeLine{03601\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for\ details.}}
\DoxyCodeLine{03602\ \ \ \ \ \ \ \ \ \ \ \ \ prod\ =\ ((subsegment\ *\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(720575941))\ >>\ 24)\ +\ 1;}
\DoxyCodeLine{03603\ \ \ \ \ \ \ \ \ \ \ \ \ digits\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(prod\ >>\ 32);}
\DoxyCodeLine{03604\ \ \ \ \ \ \ \ \ \ \ \ \ *buffer\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ +\ digits);}
\DoxyCodeLine{03605\ \ \ \ \ \ \ \ \ \ \ \ \ number\_of\_digits\_printed++;}
\DoxyCodeLine{03606\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03607\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ want\ to\ print\ an\ even\ number\ of\ digits\ from\ the}}
\DoxyCodeLine{03608\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ first\_subsegment,}}
\DoxyCodeLine{03609\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03610\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ to\ 64-\/bit\ fixed-\/point\ fractional\ form\ with\ 2-\/digits}}
\DoxyCodeLine{03611\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ integer\ part.\ The\ magic\ number\ 450359963\ is\ a\ good\ enough}}
\DoxyCodeLine{03612\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ approximation\ of\ 2\string^(32\ +\ 20)\ /\ 10\string^7;\ see}}
\DoxyCodeLine{03613\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ https://jk-\/jeon.github.io/posts/2022/12/fixed-\/precision-\/formatting/\#fixed-\/length-\/case}}
\DoxyCodeLine{03614\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for\ details.}}
\DoxyCodeLine{03615\ \ \ \ \ \ \ \ \ \ \ \ \ prod\ =\ ((subsegment\ *\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(450359963))\ >>\ 20)\ +\ 1;}
\DoxyCodeLine{03616\ \ \ \ \ \ \ \ \ \ \ \ \ digits\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(prod\ >>\ 32);}
\DoxyCodeLine{03617\ \ \ \ \ \ \ \ \ \ \ \ \ copy2(buffer,\ digits2(digits));}
\DoxyCodeLine{03618\ \ \ \ \ \ \ \ \ \ \ \ \ number\_of\_digits\_printed\ +=\ 2;}
\DoxyCodeLine{03619\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03620\ }
\DoxyCodeLine{03621\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Print\ all\ digit\ pairs.}}
\DoxyCodeLine{03622\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (number\_of\_digits\_printed\ <\ number\_of\_digits\_to\_print)\ \{}
\DoxyCodeLine{03623\ \ \ \ \ \ \ \ \ \ \ \ \ prod\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(prod)\ *\ \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(100);}
\DoxyCodeLine{03624\ \ \ \ \ \ \ \ \ \ \ \ \ digits\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(prod\ >>\ 32);}
\DoxyCodeLine{03625\ \ \ \ \ \ \ \ \ \ \ \ \ copy2(buffer\ +\ number\_of\_digits\_printed,\ digits2(digits));}
\DoxyCodeLine{03626\ \ \ \ \ \ \ \ \ \ \ \ \ number\_of\_digits\_printed\ +=\ 2;}
\DoxyCodeLine{03627\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03628\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{03629\ }
\DoxyCodeLine{03630\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Print\ first\ subsegment.}}
\DoxyCodeLine{03631\ \ \ \ \ \ \ \ \ print\_subsegment(first\_subsegment,\ buf.data());}
\DoxyCodeLine{03632\ }
\DoxyCodeLine{03633\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Perform\ rounding\ if\ the\ first\ subsegment\ is\ the\ last\ subsegment\ to}}
\DoxyCodeLine{03634\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print.}}
\DoxyCodeLine{03635\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ <=\ 9)\ \{}
\DoxyCodeLine{03636\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Rounding\ inside\ the\ subsegment.}}
\DoxyCodeLine{03637\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ round-\/up\ if:}}
\DoxyCodeLine{03638\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ -\/\ either\ the\ fractional\ part\ is\ strictly\ larger\ than\ 1/2,\ or}}
\DoxyCodeLine{03639\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ -\/\ the\ fractional\ part\ is\ exactly\ 1/2\ and\ the\ last\ digit\ is\ odd.}}
\DoxyCodeLine{03640\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ rely\ on\ the\ following\ observations:}}
\DoxyCodeLine{03641\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ -\/\ If\ fractional\_part\ >=\ threshold,\ then\ the\ fractional\ part\ is}}
\DoxyCodeLine{03642\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ strictly\ larger\ than\ 1/2.}}
\DoxyCodeLine{03643\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ -\/\ If\ the\ MSB\ of\ fractional\_part\ is\ set,\ then\ the\ fractional\ part}}
\DoxyCodeLine{03644\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ must\ be\ at\ least\ 1/2.}}
\DoxyCodeLine{03645\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ -\/\ When\ the\ MSB\ of\ fractional\_part\ is\ set,\ either}}
\DoxyCodeLine{03646\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ second\_third\_subsegments\ being\ nonzero\ or\ has\_more\_segments}}
\DoxyCodeLine{03647\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ being\ true\ means\ there\ are\ further\ digits\ not\ printed,\ so\ the}}
\DoxyCodeLine{03648\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ fractional\ part\ is\ strictly\ larger\ than\ 1/2.}}
\DoxyCodeLine{03649\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ <\ 9)\ \{}
\DoxyCodeLine{03650\ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ fractional\_part\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(prod);}
\DoxyCodeLine{03651\ \ \ \ \ \ \ \ \ \ \ \ \ should\_round\_up\ =\ fractional\_part\ >=}
\DoxyCodeLine{03652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data::fractional\_part\_rounding\_thresholds}
\DoxyCodeLine{03653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [8\ -\/\ number\_of\_digits\_to\_print]\ ||}
\DoxyCodeLine{03654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((fractional\_part\ >>\ 31)\ \&}
\DoxyCodeLine{03655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((digits\ \&\ 1)\ |\ (second\_third\_subsegments\ !=\ 0)\ |}
\DoxyCodeLine{03656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_more\_segments))\ !=\ 0;}
\DoxyCodeLine{03657\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03658\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Rounding\ at\ the\ subsegment\ boundary.}}
\DoxyCodeLine{03659\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ In\ this\ case,\ the\ fractional\ part\ is\ at\ least\ 1/2\ if\ and\ only\ if}}
\DoxyCodeLine{03660\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ second\_third\_subsegments\ >=\ 5000000000ULL,\ and\ is\ strictly\ larger}}
\DoxyCodeLine{03661\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ than\ 1/2\ if\ we\ further\ have\ either\ second\_third\_subsegments\ >}}
\DoxyCodeLine{03662\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 5000000000ULL\ or\ has\_more\_segments\ ==\ true.}}
\DoxyCodeLine{03663\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03664\ \ \ \ \ \ \ \ \ \ \ \ \ should\_round\_up\ =\ second\_third\_subsegments\ >\ 5000000000ULL\ ||}
\DoxyCodeLine{03665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (second\_third\_subsegments\ ==\ 5000000000ULL\ \&\&}
\DoxyCodeLine{03666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((digits\ \&\ 1)\ !=\ 0\ ||\ has\_more\_segments));}
\DoxyCodeLine{03667\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03668\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03669\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Otherwise,\ print\ the\ second\ subsegment.}}
\DoxyCodeLine{03670\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03671\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compilers\ are\ not\ aware\ of\ how\ to\ leverage\ the\ maximum\ value\ of}}
\DoxyCodeLine{03672\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ second\_third\_subsegments\ to\ find\ out\ a\ better\ magic\ number\ which}}
\DoxyCodeLine{03673\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ allows\ us\ to\ eliminate\ an\ additional\ shift.\ 1844674407370955162\ =}}
\DoxyCodeLine{03674\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ceil(2\string^64/10)\ <\ ceil(2\string^64*(10\string^9/(10\string^10\ -\/\ 1))).}}
\DoxyCodeLine{03675\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint32\_t\ second\_subsegment\ =}
\DoxyCodeLine{03676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(dragonbox::umul128\_upper64(}
\DoxyCodeLine{03677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ second\_third\_subsegments,\ 1844674407370955162ULL));}
\DoxyCodeLine{03678\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint32\_t\ third\_subsegment\ =}
\DoxyCodeLine{03679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(second\_third\_subsegments)\ -\/}
\DoxyCodeLine{03680\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ second\_subsegment\ *\ 10;}
\DoxyCodeLine{03681\ }
\DoxyCodeLine{03682\ \ \ \ \ \ \ \ \ \ \ number\_of\_digits\_to\_print\ =\ precision\ -\/\ 9;}
\DoxyCodeLine{03683\ \ \ \ \ \ \ \ \ \ \ print\_subsegment(second\_subsegment,\ buf.data()\ +\ 9);}
\DoxyCodeLine{03684\ }
\DoxyCodeLine{03685\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Rounding\ inside\ the\ subsegment.}}
\DoxyCodeLine{03686\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ <\ 18)\ \{}
\DoxyCodeLine{03687\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ condition\ third\_subsegment\ !=\ 0\ implies\ that\ the\ segment\ was}}
\DoxyCodeLine{03688\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ of\ 19\ digits,\ so\ in\ this\ case\ the\ third\ segment\ should\ be}}
\DoxyCodeLine{03689\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ consisting\ of\ a\ genuine\ digit\ from\ the\ input.}}
\DoxyCodeLine{03690\ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ fractional\_part\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(prod);}
\DoxyCodeLine{03691\ \ \ \ \ \ \ \ \ \ \ \ \ should\_round\_up\ =\ fractional\_part\ >=}
\DoxyCodeLine{03692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data::fractional\_part\_rounding\_thresholds}
\DoxyCodeLine{03693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [8\ -\/\ number\_of\_digits\_to\_print]\ ||}
\DoxyCodeLine{03694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((fractional\_part\ >>\ 31)\ \&}
\DoxyCodeLine{03695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((digits\ \&\ 1)\ |\ (third\_subsegment\ !=\ 0)\ |}
\DoxyCodeLine{03696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_more\_segments))\ !=\ 0;}
\DoxyCodeLine{03697\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03698\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Rounding\ at\ the\ subsegment\ boundary.}}
\DoxyCodeLine{03699\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03700\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ In\ this\ case,\ the\ segment\ must\ be\ of\ 19\ digits,\ thus}}
\DoxyCodeLine{03701\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ third\ subsegment\ should\ be\ consisting\ of\ a\ genuine\ digit\ from}}
\DoxyCodeLine{03702\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ input.}}
\DoxyCodeLine{03703\ \ \ \ \ \ \ \ \ \ \ \ \ should\_round\_up\ =\ third\_subsegment\ >\ 5\ ||}
\DoxyCodeLine{03704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (third\_subsegment\ ==\ 5\ \&\&}
\DoxyCodeLine{03705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((digits\ \&\ 1)\ !=\ 0\ ||\ has\_more\_segments));}
\DoxyCodeLine{03706\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03707\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03708\ }
\DoxyCodeLine{03709\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Round-\/up\ if\ necessary.}}
\DoxyCodeLine{03710\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (should\_round\_up)\ \{}
\DoxyCodeLine{03711\ \ \ \ \ \ \ \ \ \ \ ++buf[precision\ -\/\ 1];}
\DoxyCodeLine{03712\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ precision\ -\/\ 1;\ i\ >\ 0\ \&\&\ buf[i]\ >\ \textcolor{charliteral}{'9'};\ -\/-\/i)\ \{}
\DoxyCodeLine{03713\ \ \ \ \ \ \ \ \ \ \ \ \ buf[i]\ =\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{03714\ \ \ \ \ \ \ \ \ \ \ \ \ ++buf[i\ -\/\ 1];}
\DoxyCodeLine{03715\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03716\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf[0]\ >\ \textcolor{charliteral}{'9'})\ \{}
\DoxyCodeLine{03717\ \ \ \ \ \ \ \ \ \ \ \ \ buf[0]\ =\ \textcolor{charliteral}{'1'};}
\DoxyCodeLine{03718\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fixed)}
\DoxyCodeLine{03719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buf[precision++]\ =\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{03720\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++exp;}
\DoxyCodeLine{03722\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03723\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03724\ \ \ \ \ \ \ \ \ buf.try\_resize(to\_unsigned(precision));}
\DoxyCodeLine{03725\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03726\ \ \ \ \ \}\ \ \textcolor{comment}{//\ if\ (digits\_in\_the\_first\_segment\ >\ precision)}}
\DoxyCodeLine{03727\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03728\ \ \ \ \ \ \ \textcolor{comment}{//\ Adjust\ the\ exponent\ for\ its\ use\ in\ Dragon4.}}
\DoxyCodeLine{03729\ \ \ \ \ \ \ exp\ +=\ digits\_in\_the\_first\_segment\ -\/\ 1;}
\DoxyCodeLine{03730\ \ \ \ \ \}}
\DoxyCodeLine{03731\ \ \ \}}
\DoxyCodeLine{03732\ \ \ \textcolor{keywordflow}{if}\ (use\_dragon)\ \{}
\DoxyCodeLine{03733\ \ \ \ \ \textcolor{keyword}{auto}\ f\ =\ \mbox{\hyperlink{structbasic__fp}{basic\_fp<uint128\_t>}}();}
\DoxyCodeLine{03734\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_predecessor\_closer\ =\ specs.binary32}
\DoxyCodeLine{03735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ f.assign(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(value))}
\DoxyCodeLine{03736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ f.assign(converted\_value);}
\DoxyCodeLine{03737\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_predecessor\_closer)\ dragon\_flags\ |=\ dragon::predecessor\_closer;}
\DoxyCodeLine{03738\ \ \ \ \ \textcolor{keywordflow}{if}\ (fixed)\ dragon\_flags\ |=\ dragon::fixed;}
\DoxyCodeLine{03739\ \ \ \ \ \textcolor{comment}{//\ Limit\ precision\ to\ the\ maximum\ possible\ number\ of\ significant\ digits\ in}}
\DoxyCodeLine{03740\ \ \ \ \ \textcolor{comment}{//\ an\ IEEE754\ double\ because\ we\ don't\ need\ to\ generate\ zeros.}}
\DoxyCodeLine{03741\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_double\_digits\ =\ 767;}
\DoxyCodeLine{03742\ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ >\ max\_double\_digits)\ precision\ =\ max\_double\_digits;}
\DoxyCodeLine{03743\ \ \ \ \ format\_dragon(f,\ dragon\_flags,\ precision,\ buf,\ exp);}
\DoxyCodeLine{03744\ \ \ \}}
\DoxyCodeLine{03745\ \ \ \textcolor{keywordflow}{if}\ (!fixed\ \&\&\ !specs.showpoint)\ \{}
\DoxyCodeLine{03746\ \ \ \ \ \textcolor{comment}{//\ Remove\ trailing\ zeros.}}
\DoxyCodeLine{03747\ \ \ \ \ \textcolor{keyword}{auto}\ num\_digits\ =\ buf.size();}
\DoxyCodeLine{03748\ \ \ \ \ \textcolor{keywordflow}{while}\ (num\_digits\ >\ 0\ \&\&\ buf[num\_digits\ -\/\ 1]\ ==\ \textcolor{charliteral}{'0'})\ \{}
\DoxyCodeLine{03749\ \ \ \ \ \ \ -\/-\/num\_digits;}
\DoxyCodeLine{03750\ \ \ \ \ \ \ ++exp;}
\DoxyCodeLine{03751\ \ \ \ \ \}}
\DoxyCodeLine{03752\ \ \ \ \ buf.try\_resize(num\_digits);}
\DoxyCodeLine{03753\ \ \ \}}
\DoxyCodeLine{03754\ \ \ \textcolor{keywordflow}{return}\ exp;}
\DoxyCodeLine{03755\ \}}
\DoxyCodeLine{03756\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{03757\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ write\_float(OutputIt\ out,\ T\ value,}
\DoxyCodeLine{03758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\ specs,\ locale\_ref\ loc)}
\DoxyCodeLine{03759\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03760\ \ \ \mbox{\hyperlink{structfloat__specs}{float\_specs}}\ fspecs\ =\ parse\_float\_type\_spec(specs);}
\DoxyCodeLine{03761\ \ \ fspecs.sign\ =\ specs.sign;}
\DoxyCodeLine{03762\ \ \ \textcolor{keywordflow}{if}\ (detail::signbit(value))\ \{\ \ \textcolor{comment}{//\ value\ <\ 0\ is\ false\ for\ NaN\ so\ use\ signbit.}}
\DoxyCodeLine{03763\ \ \ \ \ fspecs.sign\ =\ sign::minus;}
\DoxyCodeLine{03764\ \ \ \ \ value\ =\ -\/value;}
\DoxyCodeLine{03765\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (fspecs.sign\ ==\ sign::minus)\ \{}
\DoxyCodeLine{03766\ \ \ \ \ fspecs.sign\ =\ sign::none;}
\DoxyCodeLine{03767\ \ \ \}}
\DoxyCodeLine{03768\ }
\DoxyCodeLine{03769\ \ \ \textcolor{keywordflow}{if}\ (!detail::isfinite(value))}
\DoxyCodeLine{03770\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_nonfinite(out,\ detail::isnan(value),\ specs,\ fspecs);}
\DoxyCodeLine{03771\ }
\DoxyCodeLine{03772\ \ \ \textcolor{keywordflow}{if}\ (specs.align\ ==\ align::numeric\ \&\&\ fspecs.sign)\ \{}
\DoxyCodeLine{03773\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ reserve(out,\ 1);}
\DoxyCodeLine{03774\ \ \ \ \ *it++\ =\ detail::sign<Char>(fspecs.sign);}
\DoxyCodeLine{03775\ \ \ \ \ out\ =\ base\_iterator(out,\ it);}
\DoxyCodeLine{03776\ \ \ \ \ fspecs.sign\ =\ sign::none;}
\DoxyCodeLine{03777\ \ \ \ \ \textcolor{keywordflow}{if}\ (specs.width\ !=\ 0)\ -\/-\/specs.width;}
\DoxyCodeLine{03778\ \ \ \}}
\DoxyCodeLine{03779\ }
\DoxyCodeLine{03780\ \ \ \mbox{\hyperlink{classbasic__memory__buffer}{memory\_buffer}}\ buffer;}
\DoxyCodeLine{03781\ \ \ \textcolor{keywordflow}{if}\ (fspecs.format\ ==\ float\_format::hex)\ \{}
\DoxyCodeLine{03782\ \ \ \ \ \textcolor{keywordflow}{if}\ (fspecs.sign)\ buffer.push\_back(detail::sign<char>(fspecs.sign));}
\DoxyCodeLine{03783\ \ \ \ \ format\_hexfloat(convert\_float(value),\ specs.precision,\ fspecs,\ buffer);}
\DoxyCodeLine{03784\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_bytes<align::right>(out,\ \{buffer.\mbox{\hyperlink{classdetail_1_1buffer_aeb33e0a2d2be2bbca9e0236c148089c8}{data}}(),\ buffer.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}()\},}
\DoxyCodeLine{03785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ specs);}
\DoxyCodeLine{03786\ \ \ \}}
\DoxyCodeLine{03787\ \ \ \textcolor{keywordtype}{int}\ precision\ =\ specs.precision\ >=\ 0\ ||\ specs.type\ ==\ presentation\_type::none}
\DoxyCodeLine{03788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ specs.precision}
\DoxyCodeLine{03789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ 6;}
\DoxyCodeLine{03790\ \ \ \textcolor{keywordflow}{if}\ (fspecs.format\ ==\ float\_format::exp)\ \{}
\DoxyCodeLine{03791\ \ \ \ \ \textcolor{keywordflow}{if}\ (precision\ ==\ max\_value<int>())}
\DoxyCodeLine{03792\ \ \ \ \ \ \ throw\_format\_error(\textcolor{stringliteral}{"{}number\ is\ too\ big"{}});}
\DoxyCodeLine{03793\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03794\ \ \ \ \ \ \ ++precision;}
\DoxyCodeLine{03795\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (fspecs.format\ !=\ float\_format::fixed\ \&\&\ precision\ ==\ 0)\ \{}
\DoxyCodeLine{03796\ \ \ \ \ precision\ =\ 1;}
\DoxyCodeLine{03797\ \ \ \}}
\DoxyCodeLine{03798\ \ \ \textcolor{keywordflow}{if}\ (const\_check(std::is\_same<T,\ float>()))\ fspecs.binary32\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{03799\ \ \ \textcolor{keywordtype}{int}\ exp\ =\ format\_float(convert\_float(value),\ precision,\ fspecs,\ buffer);}
\DoxyCodeLine{03800\ \ \ fspecs.precision\ =\ precision;}
\DoxyCodeLine{03801\ \ \ \textcolor{keyword}{auto}\ f\ =\ \mbox{\hyperlink{structbig__decimal__fp}{big\_decimal\_fp}}\{buffer.\mbox{\hyperlink{classdetail_1_1buffer_aeb33e0a2d2be2bbca9e0236c148089c8}{data}}(),\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(buffer.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}()),\ exp\};}
\DoxyCodeLine{03802\ \ \ \textcolor{keywordflow}{return}\ write\_float(out,\ f,\ specs,\ fspecs,\ loc);}
\DoxyCodeLine{03803\ \}}
\DoxyCodeLine{03804\ }
\DoxyCodeLine{03805\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03806\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(is\_floating\_point<T>::value)>}
\DoxyCodeLine{03807\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value,\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\ specs,}
\DoxyCodeLine{03808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ locale\_ref\ loc\ =\ \{\})\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03809\ \ \ \textcolor{keywordflow}{if}\ (const\_check(!is\_supported\_floating\_point(value)))\ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{03810\ \ \ \textcolor{keywordflow}{return}\ specs.localized\ \&\&\ write\_loc(out,\ value,\ specs,\ loc)}
\DoxyCodeLine{03811\ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ out}
\DoxyCodeLine{03812\ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ write\_float(out,\ value,\ specs,\ loc);}
\DoxyCodeLine{03813\ \}}
\DoxyCodeLine{03814\ }
\DoxyCodeLine{03815\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03816\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(is\_fast\_float<T>::value)>}
\DoxyCodeLine{03817\ FMT\_CONSTEXPR20\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03818\ \ \ \textcolor{keywordflow}{if}\ (is\_constant\_evaluated())\ \textcolor{keywordflow}{return}\ write(out,\ value,\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}());}
\DoxyCodeLine{03819\ \ \ \textcolor{keywordflow}{if}\ (const\_check(!is\_supported\_floating\_point(value)))\ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{03820\ }
\DoxyCodeLine{03821\ \ \ \textcolor{keyword}{auto}\ fspecs\ =\ \mbox{\hyperlink{structfloat__specs}{float\_specs}}();}
\DoxyCodeLine{03822\ \ \ \textcolor{keywordflow}{if}\ (detail::signbit(value))\ \{}
\DoxyCodeLine{03823\ \ \ \ \ fspecs.sign\ =\ sign::minus;}
\DoxyCodeLine{03824\ \ \ \ \ value\ =\ -\/value;}
\DoxyCodeLine{03825\ \ \ \}}
\DoxyCodeLine{03826\ }
\DoxyCodeLine{03827\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ specs\ =\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}();}
\DoxyCodeLine{03828\ \ \ \textcolor{keyword}{using\ }floaty\ =\ conditional\_t<std::is\_same<T,\ long\ double>::value,\ double,\ T>;}
\DoxyCodeLine{03829\ \ \ \textcolor{keyword}{using\ }floaty\_uint\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structdragonbox_1_1float__info}{dragonbox::float\_info<floaty>::carrier\_uint}};}
\DoxyCodeLine{03830\ \ \ floaty\_uint\ mask\ =\ exponent\_mask<floaty>();}
\DoxyCodeLine{03831\ \ \ \textcolor{keywordflow}{if}\ ((bit\_cast<floaty\_uint>(value)\ \&\ mask)\ ==\ mask)}
\DoxyCodeLine{03832\ \ \ \ \ \textcolor{keywordflow}{return}\ write\_nonfinite(out,\ std::isnan(value),\ specs,\ fspecs);}
\DoxyCodeLine{03833\ }
\DoxyCodeLine{03834\ \ \ \textcolor{keyword}{auto}\ dec\ =\ dragonbox::to\_decimal(\textcolor{keyword}{static\_cast<}floaty\textcolor{keyword}{>}(value));}
\DoxyCodeLine{03835\ \ \ \textcolor{keywordflow}{return}\ write\_float(out,\ dec,\ specs,\ fspecs,\ \{\});}
\DoxyCodeLine{03836\ \}}
\DoxyCodeLine{03837\ }
\DoxyCodeLine{03838\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03839\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(is\_floating\_point<T>::value\ \&\&}
\DoxyCodeLine{03840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !is\_fast\_float<T>::value)>}
\DoxyCodeLine{03841\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03842\ \ \ \textcolor{keywordflow}{return}\ write(out,\ value,\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}());}
\DoxyCodeLine{03843\ \}}
\DoxyCodeLine{03844\ }
\DoxyCodeLine{03845\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{03846\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \mbox{\hyperlink{structmonostate}{monostate}},\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\ =\ \{\},\ locale\_ref\ =\ \{\})}
\DoxyCodeLine{03847\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03848\ \ \ FMT\_ASSERT(\textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{03849\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{03850\ \}}
\DoxyCodeLine{03851\ }
\DoxyCodeLine{03852\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{03853\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ value)}
\DoxyCodeLine{03854\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03855\ \ \ \textcolor{keyword}{auto}\ it\ =\ reserve(out,\ value.size());}
\DoxyCodeLine{03856\ \ \ it\ =\ copy\_str\_noinline<Char>(value.begin(),\ value.end(),\ it);}
\DoxyCodeLine{03857\ \ \ \textcolor{keywordflow}{return}\ base\_iterator(out,\ it);}
\DoxyCodeLine{03858\ \}}
\DoxyCodeLine{03859\ }
\DoxyCodeLine{03860\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03861\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(is\_string<T>::value)>}
\DoxyCodeLine{03862\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \textcolor{keyword}{const}\ T\&\ value)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03863\ \ \ \textcolor{keywordflow}{return}\ write<Char>(out,\ to\_string\_view(value));}
\DoxyCodeLine{03864\ \}}
\DoxyCodeLine{03865\ }
\DoxyCodeLine{03866\ \textcolor{comment}{//\ FMT\_ENABLE\_IF()\ condition\ separated\ to\ workaround\ an\ MSVC\ bug.}}
\DoxyCodeLine{03867\ \textcolor{keyword}{template}\ <}
\DoxyCodeLine{03868\ \ \ \ \ \textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03869\ \ \ \ \ \textcolor{keywordtype}{bool}\ check\ =}
\DoxyCodeLine{03870\ \ \ \ \ \ \ \ \ std::is\_enum<T>::value\ \&\&\ !std::is\_same<T,\ Char>::value\ \&\&}
\DoxyCodeLine{03871\ \ \ \ \ \ \ \ \ mapped\_type\_constant<T,\ basic\_format\_context<OutputIt,\ Char>>::value\ !=}
\DoxyCodeLine{03872\ \ \ \ \ \ \ \ \ \ \ \ \ type::custom\_type,}
\DoxyCodeLine{03873\ \ \ \ \ FMT\_ENABLE\_IF(check)>}
\DoxyCodeLine{03874\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03875\ \ \ \textcolor{keywordflow}{return}\ write<Char>(out,\ \textcolor{keyword}{static\_cast<}underlying\_t<T>\textcolor{keyword}{>}(value));}
\DoxyCodeLine{03876\ \}}
\DoxyCodeLine{03877\ }
\DoxyCodeLine{03878\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03879\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(std::is\_same<T,\ bool>::value)>}
\DoxyCodeLine{03880\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ T\ value,}
\DoxyCodeLine{03881\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs\ =\ \{\},\ locale\_ref\ =\ \{\})}
\DoxyCodeLine{03882\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03883\ \ \ \textcolor{keywordflow}{return}\ specs.type\ !=\ presentation\_type::none\ \&\&}
\DoxyCodeLine{03884\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ specs.type\ !=\ presentation\_type::string}
\DoxyCodeLine{03885\ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ write(out,\ value\ ?\ 1\ :\ 0,\ specs,\ \{\})}
\DoxyCodeLine{03886\ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ write\_bytes(out,\ value\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}},\ specs);}
\DoxyCodeLine{03887\ \}}
\DoxyCodeLine{03888\ }
\DoxyCodeLine{03889\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{03890\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ Char\ value)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03891\ \ \ \textcolor{keyword}{auto}\ it\ =\ reserve(out,\ 1);}
\DoxyCodeLine{03892\ \ \ *it++\ =\ value;}
\DoxyCodeLine{03893\ \ \ \textcolor{keywordflow}{return}\ base\_iterator(out,\ it);}
\DoxyCodeLine{03894\ \}}
\DoxyCodeLine{03895\ }
\DoxyCodeLine{03896\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt>}
\DoxyCodeLine{03897\ FMT\_CONSTEXPR\_CHAR\_TRAITS\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \textcolor{keyword}{const}\ Char*\ value)}
\DoxyCodeLine{03898\ \ \ \ \ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03899\ \ \ \textcolor{keywordflow}{if}\ (value)\ \textcolor{keywordflow}{return}\ write(out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}(value));}
\DoxyCodeLine{03900\ \ \ throw\_format\_error(\textcolor{stringliteral}{"{}string\ pointer\ is\ null"{}});}
\DoxyCodeLine{03901\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{03902\ \}}
\DoxyCodeLine{03903\ }
\DoxyCodeLine{03904\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03905\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(std::is\_same<T,\ void>::value)>}
\DoxyCodeLine{03906\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \textcolor{keyword}{const}\ T*\ value,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs\ =\ \{\},}
\DoxyCodeLine{03907\ \ \ \ \ \ \ \ \ \ \ \ locale\_ref\ =\ \{\})\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{03908\ \ \ \textcolor{keywordflow}{return}\ write\_ptr<Char>(out,\ bit\_cast<uintptr\_t>(value),\ \&specs);}
\DoxyCodeLine{03909\ \}}
\DoxyCodeLine{03910\ }
\DoxyCodeLine{03911\ \textcolor{comment}{//\ A\ write\ overload\ that\ handles\ implicit\ conversions.}}
\DoxyCodeLine{03912\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03913\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Context\ =\ \mbox{\hyperlink{classbasic__format__context}{basic\_format\_context<OutputIt,\ Char>}}>}
\DoxyCodeLine{03914\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \textcolor{keyword}{const}\ T\&\ value)\ -\/>\ enable\_if\_t<}
\DoxyCodeLine{03915\ \ \ \ \ std::is\_class<T>::value\ \&\&\ !is\_string<T>::value\ \&\&}
\DoxyCodeLine{03916\ \ \ \ \ \ \ \ \ !is\_floating\_point<T>::value\ \&\&\ !std::is\_same<T,\ Char>::value\ \&\&}
\DoxyCodeLine{03917\ \ \ \ \ \ \ \ \ !std::is\_same<T,\ remove\_cvref\_t<decltype(arg\_mapper<Context>().map(}
\DoxyCodeLine{03918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ value))>>::value,}
\DoxyCodeLine{03919\ \ \ \ \ OutputIt>\ \{}
\DoxyCodeLine{03920\ \ \ \textcolor{keywordflow}{return}\ write<Char>(out,\ arg\_mapper<Context>().map(value));}
\DoxyCodeLine{03921\ \}}
\DoxyCodeLine{03922\ }
\DoxyCodeLine{03923\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ T,}
\DoxyCodeLine{03924\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Context\ =\ \mbox{\hyperlink{classbasic__format__context}{basic\_format\_context<OutputIt,\ Char>}}>}
\DoxyCodeLine{03925\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ write(OutputIt\ out,\ \textcolor{keyword}{const}\ T\&\ value)}
\DoxyCodeLine{03926\ \ \ \ \ -\/>\ enable\_if\_t<mapped\_type\_constant<T,\ Context>::value\ ==\ type::custom\_type,}
\DoxyCodeLine{03927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OutputIt>\ \{}
\DoxyCodeLine{03928\ \ \ \textcolor{keyword}{auto}\ ctx\ =\ Context(out,\ \{\},\ \{\});}
\DoxyCodeLine{03929\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{typename}\ Context::template\ formatter\_type<T>().format(value,\ ctx);}
\DoxyCodeLine{03930\ \}}
\DoxyCodeLine{03931\ }
\DoxyCodeLine{03932\ \textcolor{comment}{//\ An\ argument\ visitor\ that\ formats\ the\ argument\ and\ writes\ it\ via\ the\ output}}
\DoxyCodeLine{03933\ \textcolor{comment}{//\ iterator.\ It's\ a\ class\ and\ not\ a\ generic\ lambda\ for\ compatibility\ with\ C++11.}}
\DoxyCodeLine{03934\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdefault__arg__formatter}{default\_arg\_formatter}}\ \{}
\DoxyCodeLine{03935\ \ \ \textcolor{keyword}{using\ }iterator\ =\ buffer\_appender<Char>;}
\DoxyCodeLine{03936\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classbasic__format__context}{context}}\ =\ \mbox{\hyperlink{classbasic__format__context}{buffer\_context<Char>}};}
\DoxyCodeLine{03937\ }
\DoxyCodeLine{03938\ \ \ iterator\ out;}
\DoxyCodeLine{03939\ \ \ \mbox{\hyperlink{classbasic__format__args}{basic\_format\_args<context>}}\ args;}
\DoxyCodeLine{03940\ \ \ locale\_ref\ loc;}
\DoxyCodeLine{03941\ }
\DoxyCodeLine{03942\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{auto}\ operator()(T\ value)\ -\/>\ iterator\ \{}
\DoxyCodeLine{03943\ \ \ \ \ \textcolor{keywordflow}{return}\ write<Char>(out,\ value);}
\DoxyCodeLine{03944\ \ \ \}}
\DoxyCodeLine{03945\ \ \ \textcolor{keyword}{auto}\ operator()(\textcolor{keyword}{typename}\ \mbox{\hyperlink{classbasic__format__arg_1_1handle}{basic\_format\_arg<context>::handle}}\ h)\ -\/>\ iterator\ \{}
\DoxyCodeLine{03946\ \ \ \ \ \mbox{\hyperlink{classbasic__format__parse__context}{basic\_format\_parse\_context<Char>}}\ parse\_ctx(\{\});}
\DoxyCodeLine{03947\ \ \ \ \ \mbox{\hyperlink{classbasic__format__context}{context}}\ format\_ctx(out,\ args,\ loc);}
\DoxyCodeLine{03948\ \ \ \ \ h.format(parse\_ctx,\ format\_ctx);}
\DoxyCodeLine{03949\ \ \ \ \ \textcolor{keywordflow}{return}\ format\_ctx.out();}
\DoxyCodeLine{03950\ \ \ \}}
\DoxyCodeLine{03951\ \};}
\DoxyCodeLine{03952\ }
\DoxyCodeLine{03953\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structarg__formatter}{arg\_formatter}}\ \{}
\DoxyCodeLine{03954\ \ \ \textcolor{keyword}{using\ }iterator\ =\ buffer\_appender<Char>;}
\DoxyCodeLine{03955\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classbasic__format__context}{context}}\ =\ \mbox{\hyperlink{classbasic__format__context}{buffer\_context<Char>}};}
\DoxyCodeLine{03956\ }
\DoxyCodeLine{03957\ \ \ iterator\ out;}
\DoxyCodeLine{03958\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__specs}{format\_specs<Char>}}\&\ specs;}
\DoxyCodeLine{03959\ \ \ locale\_ref\ locale;}
\DoxyCodeLine{03960\ }
\DoxyCodeLine{03961\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{03962\ \ \ FMT\_CONSTEXPR\ FMT\_INLINE\ \textcolor{keyword}{auto}\ operator()(T\ value)\ -\/>\ iterator\ \{}
\DoxyCodeLine{03963\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::write(out,\ value,\ specs,\ locale);}
\DoxyCodeLine{03964\ \ \ \}}
\DoxyCodeLine{03965\ \ \ \textcolor{keyword}{auto}\ operator()(\textcolor{keyword}{typename}\ \mbox{\hyperlink{classbasic__format__arg_1_1handle}{basic\_format\_arg<context>::handle}})\ -\/>\ iterator\ \{}
\DoxyCodeLine{03966\ \ \ \ \ \textcolor{comment}{//\ User-\/defined\ types\ are\ handled\ separately\ because\ they\ require\ access}}
\DoxyCodeLine{03967\ \ \ \ \ \textcolor{comment}{//\ to\ the\ parse\ context.}}
\DoxyCodeLine{03968\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{03969\ \ \ \}}
\DoxyCodeLine{03970\ \};}
\DoxyCodeLine{03971\ }
\DoxyCodeLine{03972\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcustom__formatter}{custom\_formatter}}\ \{}
\DoxyCodeLine{03973\ \ \ \mbox{\hyperlink{classbasic__format__parse__context}{basic\_format\_parse\_context<Char>}}\&\ parse\_ctx;}
\DoxyCodeLine{03974\ \ \ \mbox{\hyperlink{classbasic__format__context}{buffer\_context<Char>}}\&\ ctx;}
\DoxyCodeLine{03975\ }
\DoxyCodeLine{03976\ \ \ \textcolor{keywordtype}{void}\ operator()(}
\DoxyCodeLine{03977\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classbasic__format__arg}{basic\_format\_arg}}<\mbox{\hyperlink{classbasic__format__context}{buffer\_context<Char>}}>::handle\ h)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{03978\ \ \ \ \ h.format(parse\_ctx,\ ctx);}
\DoxyCodeLine{03979\ \ \ \}}
\DoxyCodeLine{03980\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keywordtype}{void}\ operator()(T)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{03981\ \};}
\DoxyCodeLine{03982\ }
\DoxyCodeLine{03983\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ErrorHandler>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classwidth__checker}{width\_checker}}\ \{}
\DoxyCodeLine{03984\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{03985\ \ \ \textcolor{keyword}{explicit}\ FMT\_CONSTEXPR\ \mbox{\hyperlink{classwidth__checker}{width\_checker}}(ErrorHandler\&\ eh)\ :\ handler\_(eh)\ \{\}}
\DoxyCodeLine{03986\ }
\DoxyCodeLine{03987\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(is\_\textcolor{keywordtype}{int}eger<T>::value)>}
\DoxyCodeLine{03988\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator()(T\ value)\ -\/>\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \{}
\DoxyCodeLine{03989\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_negative(value))\ handler\_.on\_error(\textcolor{stringliteral}{"{}negative\ width"{}});}
\DoxyCodeLine{03990\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\textcolor{keyword}{>}(value);}
\DoxyCodeLine{03991\ \ \ \}}
\DoxyCodeLine{03992\ }
\DoxyCodeLine{03993\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(!is\_\textcolor{keywordtype}{int}eger<T>::value)>}
\DoxyCodeLine{03994\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator()(T)\ -\/>\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \{}
\DoxyCodeLine{03995\ \ \ \ \ handler\_.on\_error(\textcolor{stringliteral}{"{}width\ is\ not\ integer"{}});}
\DoxyCodeLine{03996\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{03997\ \ \ \}}
\DoxyCodeLine{03998\ }
\DoxyCodeLine{03999\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{04000\ \ \ ErrorHandler\&\ handler\_;}
\DoxyCodeLine{04001\ \};}
\DoxyCodeLine{04002\ }
\DoxyCodeLine{04003\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ErrorHandler>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classprecision__checker}{precision\_checker}}\ \{}
\DoxyCodeLine{04004\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{04005\ \ \ \textcolor{keyword}{explicit}\ FMT\_CONSTEXPR\ \mbox{\hyperlink{classprecision__checker}{precision\_checker}}(ErrorHandler\&\ eh)\ :\ handler\_(eh)\ \{\}}
\DoxyCodeLine{04006\ }
\DoxyCodeLine{04007\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(is\_\textcolor{keywordtype}{int}eger<T>::value)>}
\DoxyCodeLine{04008\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator()(T\ value)\ -\/>\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \{}
\DoxyCodeLine{04009\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_negative(value))\ handler\_.on\_error(\textcolor{stringliteral}{"{}negative\ precision"{}});}
\DoxyCodeLine{04010\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\textcolor{keyword}{>}(value);}
\DoxyCodeLine{04011\ \ \ \}}
\DoxyCodeLine{04012\ }
\DoxyCodeLine{04013\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(!is\_\textcolor{keywordtype}{int}eger<T>::value)>}
\DoxyCodeLine{04014\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ operator()(T)\ -\/>\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \{}
\DoxyCodeLine{04015\ \ \ \ \ handler\_.on\_error(\textcolor{stringliteral}{"{}precision\ is\ not\ integer"{}});}
\DoxyCodeLine{04016\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{04017\ \ \ \}}
\DoxyCodeLine{04018\ }
\DoxyCodeLine{04019\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{04020\ \ \ ErrorHandler\&\ handler\_;}
\DoxyCodeLine{04021\ \};}
\DoxyCodeLine{04022\ }
\DoxyCodeLine{04023\ \textcolor{keyword}{template}\ <\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}>\ \textcolor{keyword}{class\ }Handler,\ \textcolor{keyword}{typename}\ FormatArg,}
\DoxyCodeLine{04024\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ ErrorHandler>}
\DoxyCodeLine{04025\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ get\_dynamic\_spec(FormatArg\ arg,\ ErrorHandler\ eh)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{04026\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ value\ =\ visit\_format\_arg(Handler<ErrorHandler>(eh),\ arg);}
\DoxyCodeLine{04027\ \ \ \textcolor{keywordflow}{if}\ (value\ >\ to\_unsigned(max\_value<int>()))\ eh.on\_error(\textcolor{stringliteral}{"{}number\ is\ too\ big"{}});}
\DoxyCodeLine{04028\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(value);}
\DoxyCodeLine{04029\ \}}
\DoxyCodeLine{04030\ }
\DoxyCodeLine{04031\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Context,\ \textcolor{keyword}{typename}\ ID>}
\DoxyCodeLine{04032\ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ get\_arg(Context\&\ ctx,\ ID\ \textcolor{keywordtype}{id})\ -\/>}
\DoxyCodeLine{04033\ \ \ \ \ \textcolor{keyword}{typename}\ Context::format\_arg\ \{}
\DoxyCodeLine{04034\ \ \ \textcolor{keyword}{auto}\ arg\ =\ ctx.arg(\textcolor{keywordtype}{id});}
\DoxyCodeLine{04035\ \ \ \textcolor{keywordflow}{if}\ (!arg)\ ctx.on\_error(\textcolor{stringliteral}{"{}argument\ not\ found"{}});}
\DoxyCodeLine{04036\ \ \ \textcolor{keywordflow}{return}\ arg;}
\DoxyCodeLine{04037\ \}}
\DoxyCodeLine{04038\ }
\DoxyCodeLine{04039\ \textcolor{keyword}{template}\ <\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}>\ \textcolor{keyword}{class\ }Handler,\ \textcolor{keyword}{typename}\ Context>}
\DoxyCodeLine{04040\ FMT\_CONSTEXPR\ \textcolor{keywordtype}{void}\ handle\_dynamic\_spec(\textcolor{keywordtype}{int}\&\ value,}
\DoxyCodeLine{04041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arg\_ref<typename\ Context::char\_type>\ ref,}
\DoxyCodeLine{04042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Context\&\ ctx)\ \{}
\DoxyCodeLine{04043\ \ \ \textcolor{keywordflow}{switch}\ (ref.kind)\ \{}
\DoxyCodeLine{04044\ \ \ \textcolor{keywordflow}{case}\ arg\_id\_kind::none:}
\DoxyCodeLine{04045\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04046\ \ \ \textcolor{keywordflow}{case}\ arg\_id\_kind::index:}
\DoxyCodeLine{04047\ \ \ \ \ value\ =\ detail::get\_dynamic\_spec<Handler>(get\_arg(ctx,\ ref.val.index),}
\DoxyCodeLine{04048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ctx.error\_handler());}
\DoxyCodeLine{04049\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04050\ \ \ \textcolor{keywordflow}{case}\ arg\_id\_kind::name:}
\DoxyCodeLine{04051\ \ \ \ \ value\ =\ detail::get\_dynamic\_spec<Handler>(get\_arg(ctx,\ ref.val.name),}
\DoxyCodeLine{04052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ctx.error\_handler());}
\DoxyCodeLine{04053\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04054\ \ \ \}}
\DoxyCodeLine{04055\ \}}
\DoxyCodeLine{04056\ }
\DoxyCodeLine{04057\ \textcolor{preprocessor}{\#if\ FMT\_USE\_USER\_DEFINED\_LITERALS}}
\DoxyCodeLine{04058\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }udl\_formatter\ \{}
\DoxyCodeLine{04059\ \ \ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ str;}
\DoxyCodeLine{04060\ }
\DoxyCodeLine{04061\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ T>}
\DoxyCodeLine{04062\ \ \ \textcolor{keyword}{auto}\ operator()(T\&\&...\ args)\ \textcolor{keyword}{const}\ -\/>\ std::basic\_string<Char>\ \{}
\DoxyCodeLine{04063\ \ \ \ \ \textcolor{keywordflow}{return}\ vformat(str,\ fmt::make\_format\_args<\mbox{\hyperlink{classbasic__format__context}{buffer\_context<Char>}}>(args...));}
\DoxyCodeLine{04064\ \ \ \}}
\DoxyCodeLine{04065\ \};}
\DoxyCodeLine{04066\ }
\DoxyCodeLine{04067\ \textcolor{preprocessor}{\#\ \ if\ FMT\_USE\_NONTYPE\_TEMPLATE\_ARGS}}
\DoxyCodeLine{04068\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ N,}
\DoxyCodeLine{04069\ \ \ \ \ \ \ \ \ \ \ fmt::detail\_exported::fixed\_string<Char,\ N>\ Str>}
\DoxyCodeLine{04070\ \textcolor{keyword}{struct\ }statically\_named\_arg\ :\ view\ \{}
\DoxyCodeLine{04071\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ name\ =\ Str.data;}
\DoxyCodeLine{04072\ }
\DoxyCodeLine{04073\ \ \ \textcolor{keyword}{const}\ T\&\ value;}
\DoxyCodeLine{04074\ \ \ statically\_named\_arg(\textcolor{keyword}{const}\ T\&\ v)\ :\ value(v)\ \{\}}
\DoxyCodeLine{04075\ \};}
\DoxyCodeLine{04076\ }
\DoxyCodeLine{04077\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ N,}
\DoxyCodeLine{04078\ \ \ \ \ \ \ \ \ \ \ fmt::detail\_exported::fixed\_string<Char,\ N>\ Str>}
\DoxyCodeLine{04079\ \textcolor{keyword}{struct\ }is\_named\_arg<statically\_named\_arg<T,\ Char,\ N,\ Str>>\ :\ std::true\_type\ \{\};}
\DoxyCodeLine{04080\ }
\DoxyCodeLine{04081\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ N,}
\DoxyCodeLine{04082\ \ \ \ \ \ \ \ \ \ \ fmt::detail\_exported::fixed\_string<Char,\ N>\ Str>}
\DoxyCodeLine{04083\ \textcolor{keyword}{struct\ }is\_statically\_named\_arg<statically\_named\_arg<T,\ Char,\ N,\ Str>>}
\DoxyCodeLine{04084\ \ \ \ \ :\ std::true\_type\ \{\};}
\DoxyCodeLine{04085\ }
\DoxyCodeLine{04086\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ N,}
\DoxyCodeLine{04087\ \ \ \ \ \ \ \ \ \ \ fmt::detail\_exported::fixed\_string<Char,\ N>\ Str>}
\DoxyCodeLine{04088\ \textcolor{keyword}{struct\ }udl\_arg\ \{}
\DoxyCodeLine{04089\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{auto}\ operator=(T\&\&\ value)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{04090\ \ \ \ \ \textcolor{keywordflow}{return}\ statically\_named\_arg<T,\ Char,\ N,\ Str>(std::forward<T>(value));}
\DoxyCodeLine{04091\ \ \ \}}
\DoxyCodeLine{04092\ \};}
\DoxyCodeLine{04093\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{04094\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>\ \textcolor{keyword}{struct\ }udl\_arg\ \{}
\DoxyCodeLine{04095\ \ \ \textcolor{keyword}{const}\ Char*\ str;}
\DoxyCodeLine{04096\ }
\DoxyCodeLine{04097\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{auto}\ operator=(T\&\&\ value)\ \textcolor{keyword}{const}\ -\/>\ named\_arg<Char,\ T>\ \{}
\DoxyCodeLine{04098\ \ \ \ \ \textcolor{keywordflow}{return}\ \{str,\ std::forward<T>(value)\};}
\DoxyCodeLine{04099\ \ \ \}}
\DoxyCodeLine{04100\ \};}
\DoxyCodeLine{04101\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{04102\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ FMT\_USE\_USER\_DEFINED\_LITERALS}}
\DoxyCodeLine{04103\ }
\DoxyCodeLine{04104\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Locale,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{04105\ \textcolor{keyword}{auto}\ vformat(\textcolor{keyword}{const}\ Locale\&\ loc,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ fmt,}
\DoxyCodeLine{04106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__format__args}{basic\_format\_args}}<\mbox{\hyperlink{classbasic__format__context}{buffer\_context}}<type\_identity\_t<Char>>>\ args)}
\DoxyCodeLine{04107\ \ \ \ \ -\/>\ std::basic\_string<Char>\ \{}
\DoxyCodeLine{04108\ \ \ \textcolor{keyword}{auto}\ buf\ =\ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<Char>}}();}
\DoxyCodeLine{04109\ \ \ detail::vformat\_to(buf,\ fmt,\ args,\ \mbox{\hyperlink{classdetail_1_1locale__ref}{detail::locale\_ref}}(loc));}
\DoxyCodeLine{04110\ \ \ \textcolor{keywordflow}{return}\ \{buf.data(),\ buf.size()\};}
\DoxyCodeLine{04111\ \}}
\DoxyCodeLine{04112\ }
\DoxyCodeLine{04113\ \textcolor{keyword}{using\ }format\_func\ =\ void\ (*)(\mbox{\hyperlink{classdetail_1_1buffer}{detail::buffer<char>}}\&,\ int,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*);}
\DoxyCodeLine{04114\ }
\DoxyCodeLine{04115\ FMT\_API\ \textcolor{keywordtype}{void}\ format\_error\_code(buffer<char>\&\ out,\ \textcolor{keywordtype}{int}\ error\_code,}
\DoxyCodeLine{04116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ message)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{04117\ }
\DoxyCodeLine{04118\ FMT\_API\ \textcolor{keywordtype}{void}\ report\_error(format\_func\ func,\ \textcolor{keywordtype}{int}\ error\_code,}
\DoxyCodeLine{04119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ message)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{04120\ FMT\_END\_DETAIL\_NAMESPACE}
\DoxyCodeLine{04121\ }
\DoxyCodeLine{04122\ FMT\_API\ \textcolor{keyword}{auto}\ vsystem\_error(\textcolor{keywordtype}{int}\ error\_code,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ format\_str,}
\DoxyCodeLine{04123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__format__args}{format\_args}}\ args)\ -\/>\ std::system\_error;}
\DoxyCodeLine{04124\ }
\DoxyCodeLine{04142\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ T>}
\DoxyCodeLine{04143\ \textcolor{keyword}{auto}\ system\_error(\textcolor{keywordtype}{int}\ error\_code,\ \mbox{\hyperlink{classbasic__format__string}{format\_string<T...>}}\ fmt,\ T\&\&...\ args)}
\DoxyCodeLine{04144\ \ \ \ \ -\/>\ std::system\_error\ \{}
\DoxyCodeLine{04145\ \ \ \textcolor{keywordflow}{return}\ vsystem\_error(error\_code,\ fmt,\ fmt::make\_format\_args(args...));}
\DoxyCodeLine{04146\ \}}
\DoxyCodeLine{04147\ }
\DoxyCodeLine{04164\ FMT\_API\ \textcolor{keywordtype}{void}\ format\_system\_error(\mbox{\hyperlink{classdetail_1_1buffer}{detail::buffer<char>}}\&\ out,\ \textcolor{keywordtype}{int}\ error\_code,}
\DoxyCodeLine{04165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ message)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{04166\ }
\DoxyCodeLine{04167\ \textcolor{comment}{//\ Reports\ a\ system\ error\ without\ throwing\ an\ exception.}}
\DoxyCodeLine{04168\ \textcolor{comment}{//\ Can\ be\ used\ to\ report\ errors\ from\ destructors.}}
\DoxyCodeLine{04169\ FMT\_API\ \textcolor{keywordtype}{void}\ report\_system\_error(\textcolor{keywordtype}{int}\ error\_code,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ message)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{04170\ }
\DoxyCodeLine{04172\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classformat__int}{format\_int}}\ \{}
\DoxyCodeLine{04173\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{04174\ \ \ \textcolor{comment}{//\ Buffer\ should\ be\ large\ enough\ to\ hold\ all\ digits\ (digits10\ +\ 1),}}
\DoxyCodeLine{04175\ \ \ \textcolor{comment}{//\ a\ sign\ and\ a\ null\ character.}}
\DoxyCodeLine{04176\ \ \ \textcolor{keyword}{enum}\ \{\ buffer\_size\ =\ std::numeric\_limits<unsigned\ long\ long>::digits10\ +\ 3\ \};}
\DoxyCodeLine{04177\ \ \ \textcolor{keyword}{mutable}\ \textcolor{keywordtype}{char}\ buffer\_[buffer\_size];}
\DoxyCodeLine{04178\ \ \ \textcolor{keywordtype}{char}*\ str\_;}
\DoxyCodeLine{04179\ }
\DoxyCodeLine{04180\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ UInt>\ \textcolor{keyword}{auto}\ format\_unsigned(UInt\ value)\ -\/>\ \textcolor{keywordtype}{char}*\ \{}
\DoxyCodeLine{04181\ \ \ \ \ \textcolor{keyword}{auto}\ n\ =\ \textcolor{keyword}{static\_cast<}detail::uint32\_or\_64\_or\_128\_t<UInt>\textcolor{keyword}{>}(value);}
\DoxyCodeLine{04182\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::format\_decimal(buffer\_,\ n,\ buffer\_size\ -\/\ 1).begin;}
\DoxyCodeLine{04183\ \ \ \}}
\DoxyCodeLine{04184\ }
\DoxyCodeLine{04185\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Int>\ \textcolor{keyword}{auto}\ format\_signed(Int\ value)\ -\/>\ \textcolor{keywordtype}{char}*\ \{}
\DoxyCodeLine{04186\ \ \ \ \ \textcolor{keyword}{auto}\ abs\_value\ =\ \textcolor{keyword}{static\_cast<}detail::uint32\_or\_64\_or\_128\_t<Int>\textcolor{keyword}{>}(value);}
\DoxyCodeLine{04187\ \ \ \ \ \textcolor{keywordtype}{bool}\ negative\ =\ value\ <\ 0;}
\DoxyCodeLine{04188\ \ \ \ \ \textcolor{keywordflow}{if}\ (negative)\ abs\_value\ =\ 0\ -\/\ abs\_value;}
\DoxyCodeLine{04189\ \ \ \ \ \textcolor{keyword}{auto}\ begin\ =\ format\_unsigned(abs\_value);}
\DoxyCodeLine{04190\ \ \ \ \ \textcolor{keywordflow}{if}\ (negative)\ *-\/-\/begin\ =\ \textcolor{charliteral}{'-\/'};}
\DoxyCodeLine{04191\ \ \ \ \ \textcolor{keywordflow}{return}\ begin;}
\DoxyCodeLine{04192\ \ \ \}}
\DoxyCodeLine{04193\ }
\DoxyCodeLine{04194\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{04195\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__int}{format\_int}}(\textcolor{keywordtype}{int}\ value)\ :\ str\_(format\_signed(value))\ \{\}}
\DoxyCodeLine{04196\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__int}{format\_int}}(\textcolor{keywordtype}{long}\ value)\ :\ str\_(format\_signed(value))\ \{\}}
\DoxyCodeLine{04197\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__int}{format\_int}}(\textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ value)\ :\ str\_(format\_signed(value))\ \{\}}
\DoxyCodeLine{04198\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__int}{format\_int}}(\textcolor{keywordtype}{unsigned}\ value)\ :\ str\_(format\_unsigned(value))\ \{\}}
\DoxyCodeLine{04199\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__int}{format\_int}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ value)\ :\ str\_(format\_unsigned(value))\ \{\}}
\DoxyCodeLine{04200\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classformat__int}{format\_int}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ value)}
\DoxyCodeLine{04201\ \ \ \ \ \ \ :\ str\_(format\_unsigned(value))\ \{\}}
\DoxyCodeLine{04202\ }
\DoxyCodeLine{04204\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classformat__int_a2f1870d4b535ead8699717fdcb25e997}{size}}()\ const\ -\/>\ \textcolor{keywordtype}{size\_t}\ \{}
\DoxyCodeLine{04205\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::to\_unsigned(buffer\_\ -\/\ str\_\ +\ buffer\_size\ -\/\ 1);}
\DoxyCodeLine{04206\ \ \ \}}
\DoxyCodeLine{04207\ }
\DoxyCodeLine{04212\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classformat__int_ac8f7ea8ed9a0d5bdfa5cb0661e8851b8}{data}}()\ const\ -\/>\ const\ \textcolor{keywordtype}{char}*\ \{\ \textcolor{keywordflow}{return}\ str\_;\ \}}
\DoxyCodeLine{04213\ }
\DoxyCodeLine{04218\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classformat__int_aadfe4e08e0007018df9c78863ad13d23}{c\_str}}()\ const\ -\/>\ const\ \textcolor{keywordtype}{char}*\ \{}
\DoxyCodeLine{04219\ \ \ \ \ buffer\_[buffer\_size\ -\/\ 1]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{04220\ \ \ \ \ \textcolor{keywordflow}{return}\ str\_;}
\DoxyCodeLine{04221\ \ \ \}}
\DoxyCodeLine{04222\ }
\DoxyCodeLine{04228\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classformat__int_a0f1b5493b06b98edb747737ba864f86f}{str}}()\ const\ -\/>\ std::\textcolor{keywordtype}{string}\ \{\ \textcolor{keywordflow}{return}\ std::string(str\_,\ \mbox{\hyperlink{classformat__int_a2f1870d4b535ead8699717fdcb25e997}{size}}());\ \}}
\DoxyCodeLine{04229\ \};}
\DoxyCodeLine{04230\ }
\DoxyCodeLine{04231\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{04232\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<T,\ Char,\ enable\_if\_t<detail::has\_format\_as<T>::value>>}
\DoxyCodeLine{04233\ \ \ \ \ :\ \textcolor{keyword}{private}\ \mbox{\hyperlink{structformatter}{formatter}}<detail::format\_as\_t<T>>\ \{}
\DoxyCodeLine{04234\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structformatter}{base}}\ =\ \mbox{\hyperlink{structformatter}{formatter<detail::format\_as\_t<T>}}>;}
\DoxyCodeLine{04235\ \ \ \textcolor{keyword}{using\ }base::parse;}
\DoxyCodeLine{04236\ }
\DoxyCodeLine{04237\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{04238\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ T\&\ value,\ FormatContext\&\ ctx)\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keyword}{decltype}(ctx.out())\ \{}
\DoxyCodeLine{04239\ \ \ \ \ \textcolor{keywordflow}{return}\ base::format(format\_as(value),\ ctx);}
\DoxyCodeLine{04240\ \ \ \}}
\DoxyCodeLine{04241\ \};}
\DoxyCodeLine{04242\ }
\DoxyCodeLine{04243\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{04244\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<void*,\ Char>\ :\ \mbox{\hyperlink{structformatter}{formatter<const\ void*,\ Char>}}\ \{}
\DoxyCodeLine{04245\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{04246\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keywordtype}{void}*\ val,\ FormatContext\&\ ctx)\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keyword}{decltype}(ctx.out())\ \{}
\DoxyCodeLine{04247\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structformatter}{formatter<const\ void*,\ Char>::format}}(val,\ ctx);}
\DoxyCodeLine{04248\ \ \ \}}
\DoxyCodeLine{04249\ \};}
\DoxyCodeLine{04250\ }
\DoxyCodeLine{04251\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{04252\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<Char[N],\ Char>\ :\ \mbox{\hyperlink{structformatter}{formatter}}<basic\_string\_view<Char>,\ Char>\ \{}
\DoxyCodeLine{04253\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{04254\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ Char*\ val,\ FormatContext\&\ ctx)\ \textcolor{keyword}{const}}
\DoxyCodeLine{04255\ \ \ \ \ \ \ -\/>\ \textcolor{keyword}{decltype}(ctx.out())\ \{}
\DoxyCodeLine{04256\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structformatter}{formatter<basic\_string\_view<Char>}},\ Char>::format(val,\ ctx);}
\DoxyCodeLine{04257\ \ \ \}}
\DoxyCodeLine{04258\ \};}
\DoxyCodeLine{04259\ }
\DoxyCodeLine{04269\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{auto}\ ptr(T\ p)\ -\/>\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \{}
\DoxyCodeLine{04270\ \ \ \textcolor{keyword}{static\_assert}(std::is\_pointer<T>::value,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{04271\ \ \ \textcolor{keywordflow}{return}\ detail::bit\_cast<const\ void*>(p);}
\DoxyCodeLine{04272\ \}}
\DoxyCodeLine{04273\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Deleter>}
\DoxyCodeLine{04274\ \textcolor{keyword}{auto}\ ptr(\textcolor{keyword}{const}\ std::unique\_ptr<T,\ Deleter>\&\ p)\ -\/>\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \{}
\DoxyCodeLine{04275\ \ \ \textcolor{keywordflow}{return}\ p.get();}
\DoxyCodeLine{04276\ \}}
\DoxyCodeLine{04277\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{auto}\ ptr(\textcolor{keyword}{const}\ std::shared\_ptr<T>\&\ p)\ -\/>\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \{}
\DoxyCodeLine{04278\ \ \ \textcolor{keywordflow}{return}\ p.get();}
\DoxyCodeLine{04279\ \}}
\DoxyCodeLine{04280\ }
\DoxyCodeLine{04291\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Enum>}
\DoxyCodeLine{04292\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ underlying(Enum\ e)\ \textcolor{keyword}{noexcept}\ -\/>\ underlying\_t<Enum>\ \{}
\DoxyCodeLine{04293\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}underlying\_t<Enum>\textcolor{keyword}{>}(e);}
\DoxyCodeLine{04294\ \}}
\DoxyCodeLine{04295\ }
\DoxyCodeLine{04296\ \textcolor{keyword}{namespace\ }enums\ \{}
\DoxyCodeLine{04297\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Enum,\ FMT\_ENABLE\_IF(std::is\_enum<Enum>::value)>}
\DoxyCodeLine{04298\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ format\_as(Enum\ e)\ \textcolor{keyword}{noexcept}\ -\/>\ underlying\_t<Enum>\ \{}
\DoxyCodeLine{04299\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}underlying\_t<Enum>\textcolor{keyword}{>}(e);}
\DoxyCodeLine{04300\ \}}
\DoxyCodeLine{04301\ \}\ \ \textcolor{comment}{//\ namespace\ enums}}
\DoxyCodeLine{04302\ }
\DoxyCodeLine{04303\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classbytes}{bytes}}\ \{}
\DoxyCodeLine{04304\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{04305\ \ \ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ data\_;}
\DoxyCodeLine{04306\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<\mbox{\hyperlink{classbytes}{bytes}}>;}
\DoxyCodeLine{04307\ }
\DoxyCodeLine{04308\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{04309\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classbytes}{bytes}}(\mbox{\hyperlink{classbasic__string__view}{string\_view}}\ \mbox{\hyperlink{structdata}{data}})\ :\ data\_(\mbox{\hyperlink{structdata}{data}})\ \{\}}
\DoxyCodeLine{04310\ \};}
\DoxyCodeLine{04311\ }
\DoxyCodeLine{04312\ \textcolor{keyword}{template}\ <>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<\mbox{\hyperlink{classbytes}{bytes}}>\ \{}
\DoxyCodeLine{04313\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{04314\ \ \ \mbox{\hyperlink{structdetail_1_1dynamic__format__specs}{detail::dynamic\_format\_specs<>}}\ specs\_;}
\DoxyCodeLine{04315\ }
\DoxyCodeLine{04316\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{04317\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ParseContext>}
\DoxyCodeLine{04318\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ parse(ParseContext\&\ ctx)\ -\/>\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \{}
\DoxyCodeLine{04319\ \ \ \ \ \textcolor{keywordflow}{return}\ parse\_format\_specs(ctx.begin(),\ ctx.end(),\ specs\_,\ ctx,}
\DoxyCodeLine{04320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detail::type::string\_type);}
\DoxyCodeLine{04321\ \ \ \}}
\DoxyCodeLine{04322\ }
\DoxyCodeLine{04323\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{04324\ \ \ \textcolor{keyword}{auto}\ format(\mbox{\hyperlink{classbytes}{bytes}}\ b,\ FormatContext\&\ ctx)\ -\/>\ \textcolor{keyword}{decltype}(ctx.out())\ \{}
\DoxyCodeLine{04325\ \ \ \ \ detail::handle\_dynamic\_spec<detail::width\_checker>(specs\_.width,}
\DoxyCodeLine{04326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ specs\_.width\_ref,\ ctx);}
\DoxyCodeLine{04327\ \ \ \ \ detail::handle\_dynamic\_spec<detail::precision\_checker>(}
\DoxyCodeLine{04328\ \ \ \ \ \ \ \ \ specs\_.precision,\ specs\_.precision\_ref,\ ctx);}
\DoxyCodeLine{04329\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::write\_bytes(ctx.out(),\ b.data\_,\ specs\_);}
\DoxyCodeLine{04330\ \ \ \}}
\DoxyCodeLine{04331\ \};}
\DoxyCodeLine{04332\ }
\DoxyCodeLine{04333\ \textcolor{comment}{//\ group\_digits\_view\ is\ not\ derived\ from\ view\ because\ it\ copies\ the\ argument.}}
\DoxyCodeLine{04334\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structgroup__digits__view}{group\_digits\_view}}\ \{\ T\ value;\ \};}
\DoxyCodeLine{04335\ }
\DoxyCodeLine{04347\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{auto}\ group\_digits(T\ value)\ -\/>\ \mbox{\hyperlink{structgroup__digits__view}{group\_digits\_view<T>}}\ \{}
\DoxyCodeLine{04348\ \ \ \textcolor{keywordflow}{return}\ \{value\};}
\DoxyCodeLine{04349\ \}}
\DoxyCodeLine{04350\ }
\DoxyCodeLine{04351\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<\mbox{\hyperlink{structgroup__digits__view}{group\_digits\_view}}<T>>\ :\ \mbox{\hyperlink{structformatter}{formatter}}<T>\ \{}
\DoxyCodeLine{04352\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{04353\ \ \ \mbox{\hyperlink{structdetail_1_1dynamic__format__specs}{detail::dynamic\_format\_specs<>}}\ specs\_;}
\DoxyCodeLine{04354\ }
\DoxyCodeLine{04355\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{04356\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ParseContext>}
\DoxyCodeLine{04357\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ parse(ParseContext\&\ ctx)\ -\/>\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \{}
\DoxyCodeLine{04358\ \ \ \ \ \textcolor{keywordflow}{return}\ parse\_format\_specs(ctx.begin(),\ ctx.end(),\ specs\_,\ ctx,}
\DoxyCodeLine{04359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detail::type::int\_type);}
\DoxyCodeLine{04360\ \ \ \}}
\DoxyCodeLine{04361\ }
\DoxyCodeLine{04362\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{04363\ \ \ \textcolor{keyword}{auto}\ format(\mbox{\hyperlink{structgroup__digits__view}{group\_digits\_view<T>}}\ t,\ FormatContext\&\ ctx)}
\DoxyCodeLine{04364\ \ \ \ \ \ \ -\/>\ \textcolor{keyword}{decltype}(ctx.out())\ \{}
\DoxyCodeLine{04365\ \ \ \ \ detail::handle\_dynamic\_spec<detail::width\_checker>(specs\_.width,}
\DoxyCodeLine{04366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ specs\_.width\_ref,\ ctx);}
\DoxyCodeLine{04367\ \ \ \ \ detail::handle\_dynamic\_spec<detail::precision\_checker>(}
\DoxyCodeLine{04368\ \ \ \ \ \ \ \ \ specs\_.precision,\ specs\_.precision\_ref,\ ctx);}
\DoxyCodeLine{04369\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::write\_int(}
\DoxyCodeLine{04370\ \ \ \ \ \ \ \ \ ctx.out(),\ \textcolor{keyword}{static\_cast<}detail::uint64\_or\_128\_t<T>\textcolor{keyword}{>}(t.value),\ 0,\ specs\_,}
\DoxyCodeLine{04371\ \ \ \ \ \ \ \ \ detail::digit\_grouping<char>(\textcolor{stringliteral}{"{}\(\backslash\)3"{}},\ \textcolor{stringliteral}{"{},"{}}));}
\DoxyCodeLine{04372\ \ \ \}}
\DoxyCodeLine{04373\ \};}
\DoxyCodeLine{04374\ }
\DoxyCodeLine{04375\ \textcolor{comment}{//\ DEPRECATED!\ join\_view\ will\ be\ moved\ to\ ranges.h.}}
\DoxyCodeLine{04376\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ It,\ \textcolor{keyword}{typename}\ Sentinel,\ \textcolor{keyword}{typename}\ Char\ =\ \textcolor{keywordtype}{char}>}
\DoxyCodeLine{04377\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structjoin__view}{join\_view}}\ :\ \mbox{\hyperlink{structdetail_1_1view}{detail::view}}\ \{}
\DoxyCodeLine{04378\ \ \ It\ begin;}
\DoxyCodeLine{04379\ \ \ Sentinel\ end;}
\DoxyCodeLine{04380\ \ \ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ sep;}
\DoxyCodeLine{04381\ }
\DoxyCodeLine{04382\ \ \ \mbox{\hyperlink{structjoin__view}{join\_view}}(It\ b,\ Sentinel\ e,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ s)}
\DoxyCodeLine{04383\ \ \ \ \ \ \ :\ begin(b),\ end(e),\ sep(s)\ \{\}}
\DoxyCodeLine{04384\ \};}
\DoxyCodeLine{04385\ }
\DoxyCodeLine{04386\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ It,\ \textcolor{keyword}{typename}\ Sentinel,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{04387\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<\mbox{\hyperlink{structjoin__view}{join\_view}}<It,\ Sentinel,\ Char>,\ Char>\ \{}
\DoxyCodeLine{04388\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{04389\ \ \ \textcolor{keyword}{using\ }value\_type\ =}
\DoxyCodeLine{04390\ \textcolor{preprocessor}{\#ifdef\ \_\_cpp\_lib\_ranges}}
\DoxyCodeLine{04391\ \ \ \ \ \ \ std::iter\_value\_t<It>;}
\DoxyCodeLine{04392\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04393\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::iterator\_traits<It>::value\_type;}
\DoxyCodeLine{04394\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04395\ \ \ \mbox{\hyperlink{structformatter}{formatter<remove\_cvref\_t<value\_type>}},\ Char>\ value\_formatter\_;}
\DoxyCodeLine{04396\ }
\DoxyCodeLine{04397\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{04398\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ParseContext>}
\DoxyCodeLine{04399\ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ parse(ParseContext\&\ ctx)\ -\/>\ \textcolor{keyword}{const}\ Char*\ \{}
\DoxyCodeLine{04400\ \ \ \ \ \textcolor{keywordflow}{return}\ value\_formatter\_.parse(ctx);}
\DoxyCodeLine{04401\ \ \ \}}
\DoxyCodeLine{04402\ }
\DoxyCodeLine{04403\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{04404\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ \mbox{\hyperlink{structjoin__view}{join\_view<It,\ Sentinel,\ Char>}}\&\ value,}
\DoxyCodeLine{04405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FormatContext\&\ ctx)\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keyword}{decltype}(ctx.out())\ \{}
\DoxyCodeLine{04406\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ value.begin;}
\DoxyCodeLine{04407\ \ \ \ \ \textcolor{keyword}{auto}\ out\ =\ ctx.out();}
\DoxyCodeLine{04408\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ value.end)\ \{}
\DoxyCodeLine{04409\ \ \ \ \ \ \ out\ =\ value\_formatter\_.format(*it,\ ctx);}
\DoxyCodeLine{04410\ \ \ \ \ \ \ ++it;}
\DoxyCodeLine{04411\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (it\ !=\ value.end)\ \{}
\DoxyCodeLine{04412\ \ \ \ \ \ \ \ \ out\ =\ detail::copy\_str<Char>(value.sep.begin(),\ value.sep.end(),\ out);}
\DoxyCodeLine{04413\ \ \ \ \ \ \ \ \ ctx.advance\_to(out);}
\DoxyCodeLine{04414\ \ \ \ \ \ \ \ \ out\ =\ value\_formatter\_.format(*it,\ ctx);}
\DoxyCodeLine{04415\ \ \ \ \ \ \ \ \ ++it;}
\DoxyCodeLine{04416\ \ \ \ \ \ \ \}}
\DoxyCodeLine{04417\ \ \ \ \ \}}
\DoxyCodeLine{04418\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{04419\ \ \ \}}
\DoxyCodeLine{04420\ \};}
\DoxyCodeLine{04421\ }
\DoxyCodeLine{04426\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ It,\ \textcolor{keyword}{typename}\ Sentinel>}
\DoxyCodeLine{04427\ \textcolor{keyword}{auto}\ join(It\ begin,\ Sentinel\ end,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ sep)\ -\/>\ \mbox{\hyperlink{structjoin__view}{join\_view<It,\ Sentinel>}}\ \{}
\DoxyCodeLine{04428\ \ \ \textcolor{keywordflow}{return}\ \{begin,\ end,\ sep\};}
\DoxyCodeLine{04429\ \}}
\DoxyCodeLine{04430\ }
\DoxyCodeLine{04447\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Range>}
\DoxyCodeLine{04448\ \textcolor{keyword}{auto}\ join(Range\&\&\ range,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ sep)}
\DoxyCodeLine{04449\ \ \ \ \ -\/>\ \mbox{\hyperlink{structjoin__view}{join\_view<detail::iterator\_t<Range>}},\ detail::sentinel\_t<Range>>\ \{}
\DoxyCodeLine{04450\ \ \ \textcolor{keywordflow}{return}\ join(std::begin(range),\ std::end(range),\ sep);}
\DoxyCodeLine{04451\ \}}
\DoxyCodeLine{04452\ }
\DoxyCodeLine{04464\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(!std::is\_\textcolor{keywordtype}{int}egral<T>::value)>}
\DoxyCodeLine{04465\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ to\_string(\textcolor{keyword}{const}\ T\&\ value)\ -\/>\ std::string\ \{}
\DoxyCodeLine{04466\ \ \ \textcolor{keyword}{auto}\ buffer\ =\ \mbox{\hyperlink{classbasic__memory__buffer}{memory\_buffer}}();}
\DoxyCodeLine{04467\ \ \ detail::write<char>(\mbox{\hyperlink{classappender}{appender}}(buffer),\ value);}
\DoxyCodeLine{04468\ \ \ \textcolor{keywordflow}{return}\ \{buffer.\mbox{\hyperlink{classdetail_1_1buffer_aeb33e0a2d2be2bbca9e0236c148089c8}{data}}(),\ buffer.\mbox{\hyperlink{classdetail_1_1buffer_a8685285932360c284d19003fc4ba3edc}{size}}()\};}
\DoxyCodeLine{04469\ \}}
\DoxyCodeLine{04470\ }
\DoxyCodeLine{04471\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ FMT\_ENABLE\_IF(std::is\_\textcolor{keywordtype}{int}egral<T>::value)>}
\DoxyCodeLine{04472\ FMT\_NODISCARD\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ to\_string(T\ value)\ -\/>\ std::string\ \{}
\DoxyCodeLine{04473\ \ \ \textcolor{comment}{//\ The\ buffer\ should\ be\ large\ enough\ to\ store\ the\ number\ including\ the\ sign}}
\DoxyCodeLine{04474\ \ \ \textcolor{comment}{//\ or\ "{}false"{}\ for\ bool.}}
\DoxyCodeLine{04475\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ max\_size\ =\ detail::digits10<T>()\ +\ 2;}
\DoxyCodeLine{04476\ \ \ \textcolor{keywordtype}{char}\ buffer[max\_size\ >\ 5\ ?\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(max\_size)\ :\ 5];}
\DoxyCodeLine{04477\ \ \ \textcolor{keywordtype}{char}*\ begin\ =\ buffer;}
\DoxyCodeLine{04478\ \ \ \textcolor{keywordflow}{return}\ std::string(begin,\ detail::write<char>(begin,\ value));}
\DoxyCodeLine{04479\ \}}
\DoxyCodeLine{04480\ }
\DoxyCodeLine{04481\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char,\ \textcolor{keywordtype}{size\_t}\ SIZE>}
\DoxyCodeLine{04482\ FMT\_NODISCARD\ \textcolor{keyword}{auto}\ to\_string(\textcolor{keyword}{const}\ \mbox{\hyperlink{classbasic__memory__buffer}{basic\_memory\_buffer<Char,\ SIZE>}}\&\ buf)}
\DoxyCodeLine{04483\ \ \ \ \ -\/>\ std::basic\_string<Char>\ \{}
\DoxyCodeLine{04484\ \ \ \textcolor{keyword}{auto}\ size\ =\ buf.size();}
\DoxyCodeLine{04485\ \ \ detail::assume(size\ <\ std::basic\_string<Char>().max\_size());}
\DoxyCodeLine{04486\ \ \ \textcolor{keywordflow}{return}\ std::basic\_string<Char>(buf.data(),\ size);}
\DoxyCodeLine{04487\ \}}
\DoxyCodeLine{04488\ }
\DoxyCodeLine{04489\ FMT\_BEGIN\_DETAIL\_NAMESPACE}
\DoxyCodeLine{04490\ }
\DoxyCodeLine{04491\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{04492\ \textcolor{keywordtype}{void}\ vformat\_to(buffer<Char>\&\ buf,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ fmt,}
\DoxyCodeLine{04493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ vformat\_args<Char>::type\ args,\ locale\_ref\ loc)\ \{}
\DoxyCodeLine{04494\ \ \ \textcolor{keyword}{auto}\ out\ =\ buffer\_appender<Char>(buf);}
\DoxyCodeLine{04495\ \ \ \textcolor{keywordflow}{if}\ (fmt.size()\ ==\ 2\ \&\&\ equal2(fmt.data(),\ \textcolor{stringliteral}{"{}\{\}"{}}))\ \{}
\DoxyCodeLine{04496\ \ \ \ \ \textcolor{keyword}{auto}\ arg\ =\ args.get(0);}
\DoxyCodeLine{04497\ \ \ \ \ \textcolor{keywordflow}{if}\ (!arg)\ error\_handler().on\_error(\textcolor{stringliteral}{"{}argument\ not\ found"{}});}
\DoxyCodeLine{04498\ \ \ \ \ visit\_format\_arg(\mbox{\hyperlink{structdefault__arg__formatter}{default\_arg\_formatter<Char>}}\{out,\ args,\ loc\},\ arg);}
\DoxyCodeLine{04499\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{04500\ \ \ \}}
\DoxyCodeLine{04501\ }
\DoxyCodeLine{04502\ \ \ \textcolor{keyword}{struct\ }format\_handler\ :\ error\_handler\ \{}
\DoxyCodeLine{04503\ \ \ \ \ \mbox{\hyperlink{classbasic__format__parse__context}{basic\_format\_parse\_context<Char>}}\ parse\_context;}
\DoxyCodeLine{04504\ \ \ \ \ \mbox{\hyperlink{classbasic__format__context}{buffer\_context<Char>}}\ context;}
\DoxyCodeLine{04505\ }
\DoxyCodeLine{04506\ \ \ \ \ format\_handler(buffer\_appender<Char>\ p\_out,\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ str,}
\DoxyCodeLine{04507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__format__args}{basic\_format\_args}}<\mbox{\hyperlink{classbasic__format__context}{buffer\_context<Char>}}>\ p\_args,}
\DoxyCodeLine{04508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ locale\_ref\ p\_loc)}
\DoxyCodeLine{04509\ \ \ \ \ \ \ \ \ :\ parse\_context(str),\ context(p\_out,\ p\_args,\ p\_loc)\ \{\}}
\DoxyCodeLine{04510\ }
\DoxyCodeLine{04511\ \ \ \ \ \textcolor{keywordtype}{void}\ on\_text(\textcolor{keyword}{const}\ Char*\ begin,\ \textcolor{keyword}{const}\ Char*\ end)\ \{}
\DoxyCodeLine{04512\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ text\ =\ \mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}(begin,\ to\_unsigned(end\ -\/\ begin));}
\DoxyCodeLine{04513\ \ \ \ \ \ \ context.advance\_to(write<Char>(context.out(),\ text));}
\DoxyCodeLine{04514\ \ \ \ \ \}}
\DoxyCodeLine{04515\ }
\DoxyCodeLine{04516\ \ \ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ on\_arg\_id()\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{04517\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parse\_context.\mbox{\hyperlink{classbasic__format__parse__context_a152d3961cfbc244624a877d827fc1172}{next\_arg\_id}}();}
\DoxyCodeLine{04518\ \ \ \ \ \}}
\DoxyCodeLine{04519\ \ \ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ on\_arg\_id(\textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id})\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{04520\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parse\_context.\mbox{\hyperlink{classbasic__format__parse__context_a83f130644eeb162a932245c95447cf63}{check\_arg\_id}}(\textcolor{keywordtype}{id}),\ id;}
\DoxyCodeLine{04521\ \ \ \ \ \}}
\DoxyCodeLine{04522\ \ \ \ \ FMT\_CONSTEXPR\ \textcolor{keyword}{auto}\ on\_arg\_id(\mbox{\hyperlink{classbasic__string__view}{basic\_string\_view<Char>}}\ \textcolor{keywordtype}{id})\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{04523\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ arg\_id\ =\ context.arg\_id(\textcolor{keywordtype}{id});}
\DoxyCodeLine{04524\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (arg\_id\ <\ 0)\ on\_error(\textcolor{stringliteral}{"{}argument\ not\ found"{}});}
\DoxyCodeLine{04525\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ arg\_id;}
\DoxyCodeLine{04526\ \ \ \ \ \}}
\DoxyCodeLine{04527\ }
\DoxyCodeLine{04528\ \ \ \ \ FMT\_INLINE\ \textcolor{keywordtype}{void}\ on\_replacement\_field(\textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id},\ \textcolor{keyword}{const}\ Char*)\ \{}
\DoxyCodeLine{04529\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ arg\ =\ get\_arg(context,\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{04530\ \ \ \ \ \ \ context.advance\_to(visit\_format\_arg(}
\DoxyCodeLine{04531\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdefault__arg__formatter}{default\_arg\_formatter<Char>}}\{context.out(),\ context.args(),}
\DoxyCodeLine{04532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.locale()\},}
\DoxyCodeLine{04533\ \ \ \ \ \ \ \ \ \ \ arg));}
\DoxyCodeLine{04534\ \ \ \ \ \}}
\DoxyCodeLine{04535\ }
\DoxyCodeLine{04536\ \ \ \ \ \textcolor{keyword}{auto}\ on\_format\_specs(\textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id},\ \textcolor{keyword}{const}\ Char*\ begin,\ \textcolor{keyword}{const}\ Char*\ end)}
\DoxyCodeLine{04537\ \ \ \ \ \ \ \ \ -\/>\ \textcolor{keyword}{const}\ Char*\ \{}
\DoxyCodeLine{04538\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ arg\ =\ get\_arg(context,\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{04539\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (arg.type()\ ==\ type::custom\_type)\ \{}
\DoxyCodeLine{04540\ \ \ \ \ \ \ \ \ parse\_context.\mbox{\hyperlink{classbasic__format__parse__context_ad18dcd3d0fbeb0174569b88da00c87f2}{advance\_to}}(begin);}
\DoxyCodeLine{04541\ \ \ \ \ \ \ \ \ visit\_format\_arg(\mbox{\hyperlink{structcustom__formatter}{custom\_formatter<Char>}}\{parse\_context,\ context\},\ arg);}
\DoxyCodeLine{04542\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parse\_context.\mbox{\hyperlink{classbasic__format__parse__context_afb21ddaa0d32b5430f99eed530666ea9}{begin}}();}
\DoxyCodeLine{04543\ \ \ \ \ \ \ \}}
\DoxyCodeLine{04544\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ specs\ =\ \mbox{\hyperlink{structdetail_1_1dynamic__format__specs}{detail::dynamic\_format\_specs<Char>}}();}
\DoxyCodeLine{04545\ \ \ \ \ \ \ begin\ =\ parse\_format\_specs(begin,\ end,\ specs,\ parse\_context,\ arg.type());}
\DoxyCodeLine{04546\ \ \ \ \ \ \ detail::handle\_dynamic\_spec<detail::width\_checker>(}
\DoxyCodeLine{04547\ \ \ \ \ \ \ \ \ \ \ specs.width,\ specs.width\_ref,\ context);}
\DoxyCodeLine{04548\ \ \ \ \ \ \ detail::handle\_dynamic\_spec<detail::precision\_checker>(}
\DoxyCodeLine{04549\ \ \ \ \ \ \ \ \ \ \ specs.precision,\ specs.precision\_ref,\ context);}
\DoxyCodeLine{04550\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (begin\ ==\ end\ ||\ *begin\ !=\ \textcolor{charliteral}{'\}'})}
\DoxyCodeLine{04551\ \ \ \ \ \ \ \ \ on\_error(\textcolor{stringliteral}{"{}missing\ '\}'\ in\ format\ string"{}});}
\DoxyCodeLine{04552\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ f\ =\ \mbox{\hyperlink{structarg__formatter}{arg\_formatter<Char>}}\{context.out(),\ specs,\ context.locale()\};}
\DoxyCodeLine{04553\ \ \ \ \ \ \ context.advance\_to(visit\_format\_arg(f,\ arg));}
\DoxyCodeLine{04554\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ begin;}
\DoxyCodeLine{04555\ \ \ \ \ \}}
\DoxyCodeLine{04556\ \ \ \};}
\DoxyCodeLine{04557\ \ \ detail::parse\_format\_string<false>(fmt,\ format\_handler(out,\ fmt,\ args,\ loc));}
\DoxyCodeLine{04558\ \}}
\DoxyCodeLine{04559\ }
\DoxyCodeLine{04560\ \textcolor{preprocessor}{\#ifndef\ FMT\_HEADER\_ONLY}}
\DoxyCodeLine{04561\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ FMT\_API\ \textcolor{keywordtype}{void}\ vformat\_to(buffer<char>\&,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}},}
\DoxyCodeLine{04562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ vformat\_args<>::type,}
\DoxyCodeLine{04563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ locale\_ref);}
\DoxyCodeLine{04564\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ FMT\_API\ \textcolor{keyword}{auto}\ thousands\_sep\_impl<char>(locale\_ref)}
\DoxyCodeLine{04565\ \ \ \ \ -\/>\ \mbox{\hyperlink{structthousands__sep__result}{thousands\_sep\_result<char>}};}
\DoxyCodeLine{04566\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ FMT\_API\ \textcolor{keyword}{auto}\ thousands\_sep\_impl<wchar\_t>(locale\_ref)}
\DoxyCodeLine{04567\ \ \ \ \ -\/>\ \mbox{\hyperlink{structthousands__sep__result}{thousands\_sep\_result<wchar\_t>}};}
\DoxyCodeLine{04568\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ FMT\_API\ \textcolor{keyword}{auto}\ decimal\_point\_impl(locale\_ref)\ -\/>\ char;}
\DoxyCodeLine{04569\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ FMT\_API\ \textcolor{keyword}{auto}\ decimal\_point\_impl(locale\_ref)\ -\/>\ wchar\_t;}
\DoxyCodeLine{04570\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ FMT\_HEADER\_ONLY}}
\DoxyCodeLine{04571\ }
\DoxyCodeLine{04572\ FMT\_END\_DETAIL\_NAMESPACE}
\DoxyCodeLine{04573\ }
\DoxyCodeLine{04574\ \textcolor{preprocessor}{\#if\ FMT\_USE\_USER\_DEFINED\_LITERALS}}
\DoxyCodeLine{04575\ \textcolor{keyword}{inline}\ \textcolor{keyword}{namespace\ }literals\ \{}
\DoxyCodeLine{04586\ \textcolor{preprocessor}{\#\ \ if\ FMT\_USE\_NONTYPE\_TEMPLATE\_ARGS}}
\DoxyCodeLine{04587\ \textcolor{keyword}{template}\ <detail\_exported::fixed\_\textcolor{keywordtype}{string}\ Str>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \textcolor{keyword}{operator}\textcolor{stringliteral}{"{}"{}}\_a()\ \{}
\DoxyCodeLine{04588\ \ \ \textcolor{keyword}{using\ }char\_t\ =\ remove\_cvref\_t<\textcolor{keyword}{decltype}(Str.data[0])>;}
\DoxyCodeLine{04589\ \ \ \textcolor{keywordflow}{return}\ detail::udl\_arg<char\_t,\ \textcolor{keyword}{sizeof}(Str.data)\ /\ \textcolor{keyword}{sizeof}(char\_t),\ Str>();}
\DoxyCodeLine{04590\ \}}
\DoxyCodeLine{04591\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{04592\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \textcolor{keyword}{operator}\textcolor{stringliteral}{"{}"{}}\ \_a(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{size\_t})\ -\/>\ detail::udl\_arg<char>\ \{}
\DoxyCodeLine{04593\ \ \ \textcolor{keywordflow}{return}\ \{s\};}
\DoxyCodeLine{04594\ \}}
\DoxyCodeLine{04595\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{04596\ \}\ \ \textcolor{comment}{//\ namespace\ literals}}
\DoxyCodeLine{04597\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ FMT\_USE\_USER\_DEFINED\_LITERALS}}
\DoxyCodeLine{04598\ }
\DoxyCodeLine{04599\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Locale,\ FMT\_ENABLE\_IF(detail::is\_locale<Locale>::value)>}
\DoxyCodeLine{04600\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ vformat(\textcolor{keyword}{const}\ Locale\&\ loc,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ fmt,\ \mbox{\hyperlink{classbasic__format__args}{format\_args}}\ args)}
\DoxyCodeLine{04601\ \ \ \ \ -\/>\ std::string\ \{}
\DoxyCodeLine{04602\ \ \ \textcolor{keywordflow}{return}\ detail::vformat(loc,\ fmt,\ args);}
\DoxyCodeLine{04603\ \}}
\DoxyCodeLine{04604\ }
\DoxyCodeLine{04605\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Locale,\ \textcolor{keyword}{typename}...\ T,}
\DoxyCodeLine{04606\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(detail::is\_locale<Locale>::value)>}
\DoxyCodeLine{04607\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ Locale\&\ loc,\ \mbox{\hyperlink{classbasic__format__string}{format\_string<T...>}}\ fmt,\ T\&\&...\ args)}
\DoxyCodeLine{04608\ \ \ \ \ -\/>\ std::string\ \{}
\DoxyCodeLine{04609\ \ \ \textcolor{keywordflow}{return}\ fmt::vformat(loc,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}(fmt),\ fmt::make\_format\_args(args...));}
\DoxyCodeLine{04610\ \}}
\DoxyCodeLine{04611\ }
\DoxyCodeLine{04612\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Locale,}
\DoxyCodeLine{04613\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(\mbox{\hyperlink{structdetail_1_1is__output__iterator}{detail::is\_output\_iterator<OutputIt,\ char>::value}}\&\&}
\DoxyCodeLine{04614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detail::is\_locale<Locale>::value)>}
\DoxyCodeLine{04615\ \textcolor{keyword}{auto}\ vformat\_to(OutputIt\ out,\ \textcolor{keyword}{const}\ Locale\&\ loc,\ \mbox{\hyperlink{classbasic__string__view}{string\_view}}\ fmt,}
\DoxyCodeLine{04616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__format__args}{format\_args}}\ args)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{04617\ \ \ \textcolor{keyword}{using\ }detail::get\_buffer;}
\DoxyCodeLine{04618\ \ \ \textcolor{keyword}{auto}\&\&\ buf\ =\ get\_buffer<char>(out);}
\DoxyCodeLine{04619\ \ \ detail::vformat\_to(buf,\ fmt,\ args,\ \mbox{\hyperlink{classdetail_1_1locale__ref}{detail::locale\_ref}}(loc));}
\DoxyCodeLine{04620\ \ \ \textcolor{keywordflow}{return}\ detail::get\_iterator(buf,\ out);}
\DoxyCodeLine{04621\ \}}
\DoxyCodeLine{04622\ }
\DoxyCodeLine{04623\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ OutputIt,\ \textcolor{keyword}{typename}\ Locale,\ \textcolor{keyword}{typename}...\ T,}
\DoxyCodeLine{04624\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(\mbox{\hyperlink{structdetail_1_1is__output__iterator}{detail::is\_output\_iterator<OutputIt,\ char>::value}}\&\&}
\DoxyCodeLine{04625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detail::is\_locale<Locale>::value)>}
\DoxyCodeLine{04626\ FMT\_INLINE\ \textcolor{keyword}{auto}\ format\_to(OutputIt\ out,\ \textcolor{keyword}{const}\ Locale\&\ loc,}
\DoxyCodeLine{04627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__format__string}{format\_string<T...>}}\ fmt,\ T\&\&...\ args)\ -\/>\ OutputIt\ \{}
\DoxyCodeLine{04628\ \ \ \textcolor{keywordflow}{return}\ vformat\_to(out,\ loc,\ fmt,\ fmt::make\_format\_args(args...));}
\DoxyCodeLine{04629\ \}}
\DoxyCodeLine{04630\ }
\DoxyCodeLine{04631\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Locale,\ \textcolor{keyword}{typename}...\ T,}
\DoxyCodeLine{04632\ \ \ \ \ \ \ \ \ \ \ FMT\_ENABLE\_IF(detail::is\_locale<Locale>::value)>}
\DoxyCodeLine{04633\ FMT\_NODISCARD\ FMT\_INLINE\ \textcolor{keyword}{auto}\ formatted\_size(\textcolor{keyword}{const}\ Locale\&\ loc,}
\DoxyCodeLine{04634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbasic__format__string}{format\_string<T...>}}\ fmt,}
\DoxyCodeLine{04635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T\&\&...\ args)\ -\/>\ \textcolor{keywordtype}{size\_t}\ \{}
\DoxyCodeLine{04636\ \ \ \textcolor{keyword}{auto}\ buf\ =\ \mbox{\hyperlink{classdetail_1_1counting__buffer}{detail::counting\_buffer<>}}();}
\DoxyCodeLine{04637\ \ \ detail::vformat\_to<char>(buf,\ fmt,\ fmt::make\_format\_args(args...),}
\DoxyCodeLine{04638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdetail_1_1locale__ref}{detail::locale\_ref}}(loc));}
\DoxyCodeLine{04639\ \ \ \textcolor{keywordflow}{return}\ buf.count();}
\DoxyCodeLine{04640\ \}}
\DoxyCodeLine{04641\ }
\DoxyCodeLine{04642\ FMT\_END\_EXPORT}
\DoxyCodeLine{04643\ }
\DoxyCodeLine{04644\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Char>}
\DoxyCodeLine{04645\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{04646\ FMT\_CONSTEXPR\ FMT\_INLINE\ \textcolor{keyword}{auto}}
\DoxyCodeLine{04647\ \mbox{\hyperlink{structformatter}{formatter}}<T,\ Char,}
\DoxyCodeLine{04648\ \ \ \ \ \ \ \ \ \ \ enable\_if\_t<detail::type\_constant<T,\ Char>::value\ !=}
\DoxyCodeLine{04649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ detail::type::custom\_type>>::format(\textcolor{keyword}{const}\ T\&\ val,}
\DoxyCodeLine{04650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FormatContext\&\ ctx)}
\DoxyCodeLine{04651\ \ \ \ \ \textcolor{keyword}{const}\ -\/>\ \textcolor{keyword}{decltype}(ctx.out())\ \{}
\DoxyCodeLine{04652\ \ \ \textcolor{keywordflow}{if}\ (specs\_.width\_ref.kind\ !=\ detail::arg\_id\_kind::none\ ||}
\DoxyCodeLine{04653\ \ \ \ \ \ \ specs\_.precision\_ref.kind\ !=\ detail::arg\_id\_kind::none)\ \{}
\DoxyCodeLine{04654\ \ \ \ \ \textcolor{keyword}{auto}\ specs\ =\ specs\_;}
\DoxyCodeLine{04655\ \ \ \ \ detail::handle\_dynamic\_spec<detail::width\_checker>(specs.width,}
\DoxyCodeLine{04656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ specs.width\_ref,\ ctx);}
\DoxyCodeLine{04657\ \ \ \ \ detail::handle\_dynamic\_spec<detail::precision\_checker>(}
\DoxyCodeLine{04658\ \ \ \ \ \ \ \ \ specs.precision,\ specs.precision\_ref,\ ctx);}
\DoxyCodeLine{04659\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::write<Char>(ctx.out(),\ val,\ specs,\ ctx.locale());}
\DoxyCodeLine{04660\ \ \ \}}
\DoxyCodeLine{04661\ \ \ \textcolor{keywordflow}{return}\ detail::write<Char>(ctx.out(),\ val,\ specs\_,\ ctx.locale());}
\DoxyCodeLine{04662\ \}}
\DoxyCodeLine{04663\ }
\DoxyCodeLine{04664\ FMT\_END\_NAMESPACE}
\DoxyCodeLine{04665\ }
\DoxyCodeLine{04666\ \textcolor{preprocessor}{\#ifdef\ FMT\_HEADER\_ONLY}}
\DoxyCodeLine{04667\ \textcolor{preprocessor}{\#\ \ define\ FMT\_FUNC\ inline}}
\DoxyCodeLine{04668\ \textcolor{preprocessor}{\#\ \ include\ "{}format-\/inl.h"{}}}
\DoxyCodeLine{04669\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04670\ \textcolor{preprocessor}{\#\ \ define\ FMT\_FUNC}}
\DoxyCodeLine{04671\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04672\ }
\DoxyCodeLine{04673\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ FMT\_FORMAT\_H\_}}

\end{DoxyCode}
